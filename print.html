<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>计算机网络</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">计算机网络</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="前言"><a class="header" href="#前言">前言</a></h1>
<h1 id="参考资料"><a class="header" href="#参考资料">参考资料</a></h1>
<p><a href="https://www.xueyinonline.com/detail/214389254">湖南科技大学——高军——计算机网络（第3期）</a></p>
<p><a href="https://juejin.cn/collection/6887457358591557640">课程笔记</a></p>
<h1 id="what-happens-when"><a class="header" href="#what-happens-when">what-happens-when</a></h1>
<p>https://hellogithub.com/repository/436a67c5e69a40d89206c7c5720f517e</p>
<p>该项目详细地解释了当你在浏览器中输入 google.com 按下回车后发生了什么。</p>
<p>https://github.com/alex/what-happens-when</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="计算机网络概述"><a class="header" href="#计算机网络概述">计算机网络概述</a></h1>
<ul>
<li><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%9C%A8%E4%BF%A1%E6%81%AF%E6%97%B6%E4%BB%A3%E7%9A%84%E4%BD%9C%E7%94%A8">计算机网络在信息时代的作用</a></li>
<li><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html#%E5%9B%A0%E7%89%B9%E7%BD%91%E6%A6%82%E8%BF%B0">因特网概述</a></li>
<li><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html#%E4%B8%89%E7%A7%8D%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E5%92%8C%E6%8A%A5%E6%96%87%E4%BA%A4%E6%8D%A2">三种交换方式：电路交换、分组交换和报文交换</a>
<ul>
<li><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html#%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2">电路交换</a></li>
<li><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2">分组交换</a></li>
<li><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html#%E6%8A%A5%E6%96%87%E4%BA%A4%E6%8D%A2">报文交换</a></li>
<li><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html#%E4%B8%89%E7%A7%8D%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F%E7%9A%84%E6%AF%94%E8%BE%83">三种交换方式的比较</a></li>
</ul>
</li>
<li><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E5%AE%9A%E4%B9%89%E5%92%8C%E5%88%86%E7%B1%BB">计算机网络的定义和分类</a></li>
<li><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87">计算机网络的性能指标</a>
<ul>
<li><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html#%E9%80%9F%E7%8E%87%E5%B8%A6%E5%AE%BD%E5%90%9E%E5%90%90%E9%87%8F%E6%97%B6%E5%BB%B6">速率、带宽、吞吐量、时延</a></li>
<li><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html#%E6%97%B6%E5%BB%B6%E5%B8%A6%E5%AE%BD%E7%A7%AF%E5%BE%80%E8%BF%94%E6%97%B6%E9%97%B4%E5%88%A9%E7%94%A8%E7%8E%87%E4%B8%A2%E5%8C%85%E7%8E%87">时延带宽积、往返时间、利用率、丢包率</a></li>
</ul>
</li>
<li><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84">计算机网络体系结构</a>
<ul>
<li><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html#%E5%B8%B8%E8%A7%81%E7%9A%84%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84">常见的计算机网络体系结构</a></li>
<li><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html#%E5%88%86%E5%B1%82%E7%9A%84%E5%BF%85%E8%A6%81%E6%80%A7">分层的必要性</a></li>
<li><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html#%E5%88%86%E5%B1%82%E6%80%9D%E6%83%B3%E4%B8%BE%E4%BE%8B">分层思想举例</a></li>
<li><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html#%E4%B8%93%E7%94%A8%E6%9C%AF%E8%AF%AD">专用术语</a></li>
</ul>
</li>
<li><a href="%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0.html#%E6%80%BB%E7%BB%93">总结</a></li>
</ul>
<h2 id="计算机网络在信息时代的作用"><a class="header" href="#计算机网络在信息时代的作用">计算机网络在信息时代的作用</a></h2>
<p>计算机网络在信息时代扮演着至关重要的角色，促进了信息的快速传播和共享。它使得人们能够通过互联网进行沟通、协作和获取信息，推动了经济、教育、医疗等各个领域的发展。</p>
<h2 id="因特网概述"><a class="header" href="#因特网概述">因特网概述</a></h2>
<p>因特网是一个全球性的计算机网络，由无数个小型网络通过标准协议互联而成。因特网支持多种应用和服务，包括网页浏览、电子邮件、在线游戏等，成为现代社会不可或缺的一部分。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201134213.png" alt="" /></p>
<h2 id="三种交换方式电路交换分组交换和报文交换"><a class="header" href="#三种交换方式电路交换分组交换和报文交换">三种交换方式：电路交换、分组交换和报文交换</a></h2>
<p>在计算机网络中，数据传输的方式主要有三种：电路交换、分组交换和报文交换。每种交换方式都有其特点和适用场景。</p>
<h3 id="电路交换"><a class="header" href="#电路交换">电路交换</a></h3>
<p>电路交换是一种在通信双方之间建立专用物理连接的交换方式。在整个通话过程中，所需的带宽和资源被保留，直到通信结束。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201134241.png" alt="" /></p>
<p>特点：</p>
<ul>
<li><strong>固定带宽</strong>：在通话期间，连接的带宽是固定的，不会受到其他通信的影响。</li>
<li><strong>延迟低</strong>：由于建立了专用线路，延迟较低，适合实时通信。</li>
<li><strong>资源浪费</strong>：在通话没有进行时，资源仍然被占用，导致带宽的浪费。</li>
</ul>
<h3 id="分组交换"><a class="header" href="#分组交换">分组交换</a></h3>
<p>分组交换将数据分成多个小的数据包（分组），每个分组独立发送，并可能通过不同的路径到达目的地。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201134307.png" alt="" /></p>
<p>特点：</p>
<ul>
<li><strong>动态带宽</strong>：分组可以根据网络状况动态选择路径，带宽利用率高。</li>
<li><strong>灵活性强</strong>：支持多种类型的数据传输，适合大多数网络应用。</li>
<li><strong>延迟不稳定</strong>：由于分组可能经过不同路径，延迟可能会有所不同。</li>
</ul>
<h3 id="报文交换"><a class="header" href="#报文交换">报文交换</a></h3>
<p>报文交换是将整个消息作为一个单元进行传输，消息在网络中被存储和转发，直到到达目的地。</p>
<p>特点：</p>
<ul>
<li><strong>完整性</strong>：整个消息在传输过程中保持完整，适合大数据量的传输。</li>
<li><strong>存储转发</strong>：每个节点都可以存储报文，直到有条件将其转发，适合不可靠的网络。</li>
<li><strong>延迟较高</strong>：由于需要存储和转发，延迟通常较高。</li>
</ul>
<h3 id="三种交换方式的比较"><a class="header" href="#三种交换方式的比较">三种交换方式的比较</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201134326.png" alt="" /></p>
<p>以下是电路交换、分组交换和报文交换的异同点总结表：</p>
<div class="table-wrapper"><table><thead><tr><th>特性</th><th>电路交换</th><th>分组交换</th><th>报文交换</th></tr></thead><tbody>
<tr><td>连接方式</td><td>建立专用物理连接</td><td>动态分段，无需专用连接</td><td>整个消息作为一个单元传输</td></tr>
<tr><td>带宽利用率</td><td>低（资源在通话未进行时被占用）</td><td>高（根据网络状况动态分配）</td><td>中（存储转发，可能造成延迟）</td></tr>
<tr><td>延迟</td><td>低</td><td>不稳定（取决于路径）</td><td>较高</td></tr>
<tr><td>适用场景</td><td>实时通信（如电话）</td><td>数据传输（如互联网）</td><td>大数据量传输（如电子邮件）</td></tr>
<tr><td>可靠性</td><td>高（专用连接）</td><td>一般（依赖于网络状态）</td><td>低（可能丢失或延迟）</td></tr>
</tbody></table>
</div>
<h2 id="计算机网络的定义和分类"><a class="header" href="#计算机网络的定义和分类">计算机网络的定义和分类</a></h2>
<p>计算机网络是由多个计算机和其他设备通过通信介质连接而成的系统，旨在实现数据共享和资源共享。根据规模和应用场景，计算机网络可以分为局域网（LAN）、广域网（WAN）、城市区域网（MAN）等。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201134351.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201134414.png" alt="" /></p>
<h2 id="计算机网络的性能指标"><a class="header" href="#计算机网络的性能指标">计算机网络的性能指标</a></h2>
<h3 id="速率带宽吞吐量时延"><a class="header" href="#速率带宽吞吐量时延">速率、带宽、吞吐量、时延</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201134454.png" alt="" /></p>
<ul>
<li><strong>速率</strong>：指单位时间内传输的数据量，通常以比特每秒（bps）表示。</li>
<li><strong>带宽</strong>：网络能够支持的最大数据传输速率，通常以赫兹（Hz）或比特每秒（bps）表示。</li>
<li><strong>吞吐量</strong>：实际传输的数据量，可能受到网络拥塞和其他因素的影响。</li>
<li><strong>时延</strong>：数据从源到目的地所需的时间，通常包括传播时延、传输时延、排队时延和处理时延。</li>
</ul>
<h3 id="时延带宽积往返时间利用率丢包率"><a class="header" href="#时延带宽积往返时间利用率丢包率">时延带宽积、往返时间、利用率、丢包率</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201134519.png" alt="" /></p>
<ul>
<li><strong>时延带宽积</strong>：指在网络中，数据在传输过程中所占用的带宽和时延的乘积，反映了网络的延迟特性。</li>
<li><strong>往返时间（RTT）</strong>：发送数据包到目的地并返回的总时间，通常用于评估网络延迟。</li>
<li><strong>利用率</strong>：网络资源的使用效率，通常以实际吞吐量与带宽的比率表示。</li>
<li><strong>丢包率</strong>：在数据传输过程中丢失的数据包比例，通常以百分比表示，反映网络的可靠性。</li>
</ul>
<h2 id="计算机网络体系结构"><a class="header" href="#计算机网络体系结构">计算机网络体系结构</a></h2>
<h3 id="常见的计算机网络体系结构"><a class="header" href="#常见的计算机网络体系结构">常见的计算机网络体系结构</a></h3>
<p>计算机网络体系结构通常采用分层模型，如OSI模型和TCP/IP模型，便于理解和设计网络协议。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201134550.png" alt="" /></p>
<h3 id="分层的必要性"><a class="header" href="#分层的必要性">分层的必要性</a></h3>
<p>分层设计使得网络协议的开发、维护和升级变得更加简单和灵活。每一层都可以独立发展，降低了系统复杂性。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201134627.png" alt="" /></p>
<h3 id="分层思想举例"><a class="header" href="#分层思想举例">分层思想举例</a></h3>
<p>例如，在OSI模型中，应用层负责用户接口，传输层负责数据传输的可靠性，而网络层负责路由选择等功能。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201134704.png" alt="" /></p>
<h3 id="专用术语"><a class="header" href="#专用术语">专用术语</a></h3>
<p>在网络体系结构中，有许多专用术语，如“协议栈”、“封装”、“解封装”等，帮助描述不同层之间的交互和数据处理过程。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201134737.png" alt="" /></p>
<h2 id="总结"><a class="header" href="#总结">总结</a></h2>
<p>计算机网络的交换方式、性能指标和体系结构是理解现代网络的基础。电路交换、分组交换和报文交换各有其优缺点，适用于不同的应用场景。掌握这些概念将有助于更好地设计和管理计算机网络。</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="第二章物理层"><a class="header" href="#第二章物理层">第二章物理层</a></h1>
<ul>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#21-%E7%89%A9%E7%90%86%E5%B1%82%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">2.1 物理层的基本概念</a></li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#22-%E7%89%A9%E7%90%86%E5%B1%82%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93">2.2 物理层下面的传输媒体</a>
<ul>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E5%AF%BC%E5%BC%95%E5%9E%8B%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93">导引型传输媒体</a></li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E9%9D%9E%E5%AF%BC%E5%BC%95%E5%9E%8B%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93">非导引型传输媒体</a></li>
</ul>
</li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#23-%E4%BC%A0%E8%BE%93%E6%96%B9%E5%BC%8F">2.3 传输方式</a>
<ul>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E4%B8%B2%E8%A1%8C%E4%BC%A0%E8%BE%93%E5%92%8C%E5%B9%B6%E8%A1%8C%E4%BC%A0%E8%BE%93">串行传输和并行传输</a></li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E5%90%8C%E6%AD%A5%E4%BC%A0%E8%BE%93%E5%92%8C%E5%BC%82%E6%AD%A5%E4%BC%A0%E8%BE%93">同步传输和异步传输</a></li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E5%8D%95%E5%90%91%E9%80%9A%E4%BF%A1%E5%8D%95%E5%B7%A5%E5%8F%8C%E5%90%91%E4%BA%A4%E6%9B%BF%E9%80%9A%E4%BF%A1%E5%8D%8A%E5%8F%8C%E5%B7%A5%E5%92%8C%E5%8F%8C%E5%90%91%E5%90%8C%E6%97%B6%E9%80%9A%E4%BF%A1%E5%85%A8%E5%8F%8C%E5%B7%A5">单向通信（单工）、双向交替通信（半双工）和双向同时通信（全双工）</a></li>
</ul>
</li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#24-%E7%BC%96%E7%A0%81%E4%B8%8E%E8%B0%83%E5%88%B6">2.4 编码与调制</a>
<ul>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E5%B8%B8%E7%94%A8%E6%9C%AF%E8%AF%AD">常用术语</a></li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93%E4%B8%8E%E4%BF%A1%E9%81%93%E7%9A%84%E5%85%B3%E7%B3%BB">传输媒体与信道的关系</a></li>
</ul>
</li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E5%B8%B8%E7%94%A8%E7%BC%96%E7%A0%81">常用编码</a>
<ul>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E4%B8%8D%E5%BD%92%E9%9B%B6%E7%BC%96%E7%A0%81">不归零编码</a></li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E5%BD%92%E9%9B%B6%E7%BC%96%E7%A0%81">归零编码</a></li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E6%9B%BC%E5%BD%BB%E6%96%AF%E7%89%B9%E7%BC%96%E7%A0%81">曼彻斯特编码</a></li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E5%B7%AE%E5%88%86%E6%9B%BC%E5%BD%BB%E6%96%AF%E7%89%B9%E7%BC%96%E7%A0%81">差分曼彻斯特编码</a></li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E6%80%BB%E7%BB%93">总结</a></li>
</ul>
</li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E8%B0%83%E5%88%B6">调制</a></li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E7%A0%81%E5%85%83">码元</a></li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#25-%E4%BF%A1%E9%81%93%E7%9A%84%E6%9E%81%E9%99%90%E5%AE%B9%E9%87%8F">2.5 信道的极限容量</a></li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E8%A1%A5%E5%85%85%E4%BF%A1%E9%81%93%E5%A4%8D%E7%94%A8%E6%8A%80%E6%9C%AF">补充：信道复用技术</a>
<ul>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E9%A2%91%E5%88%86%E5%A4%8D%E7%94%A8%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8%E5%92%8C%E7%BB%9F%E8%AE%A1%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8">频分复用、时分复用和统计时分复用</a></li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E6%B3%A2%E5%88%86%E5%A4%8D%E7%94%A8">波分复用</a></li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#%E7%A0%81%E5%88%86%E5%A4%8D%E7%94%A8">码分复用</a></li>
</ul>
</li>
<li><a href="%E7%89%A9%E7%90%86%E5%B1%82.html#26-%E7%AB%A0%E8%8A%82%E5%B0%8F%E7%BB%93">2.6 章节小结</a></li>
</ul>
<h2 id="21-物理层的基本概念"><a class="header" href="#21-物理层的基本概念">2.1 物理层的基本概念</a></h2>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241102232202.png" alt="" /></p>
<h2 id="22-物理层下面的传输媒体"><a class="header" href="#22-物理层下面的传输媒体">2.2 物理层下面的传输媒体</a></h2>
<p><strong>传输媒体</strong>也称为传输介质或传输媒介，他就是数据传输系统中在发送器和接收器之间的物理通路。<strong>传输媒体</strong>课分为两大类，即<strong>导引型传输媒体</strong>和<strong>非导引型传输媒体</strong></p>
<p>传输媒体不属于计算机网络体系结构的任何一层。如果非要将它添加到体系结构中，那只能将其放置到物理层之下。</p>
<h3 id="导引型传输媒体"><a class="header" href="#导引型传输媒体">导引型传输媒体</a></h3>
<p>在导引型传输媒体中，电磁波被导引沿着固体媒体传播。</p>
<p><strong>同轴电缆</strong></p>
<p>基带同轴电缆（50Ω）：数字传输，过去用于局域网</p>
<p>宽带同轴电缆（75Ω）：模拟传输，目前主要用于有线电视</p>
<p>同轴电缆价格较贵且布线不够灵活和方便，随着集线器的出现，在局域网领域基本上都是采用双绞线作为传输媒体</p>
<p><strong>双绞线</strong></p>
<p>绞合的作用：</p>
<ul>
<li>抵御部分来自外界的电磁波干扰</li>
<li>减少相邻导线的电磁干扰</li>
</ul>
<p><strong>光纤</strong></p>
<p>优点：</p>
<ul>
<li>通信容量大：（25000~30000GHz的带宽）</li>
<li>传输损耗小，远距离传输时更加经济</li>
<li>抗雷电和电磁干扰性能好。这在大电流脉冲干扰的环境下尤为重要</li>
<li>无串音干扰，保密性好，不易被窃听</li>
<li>体积小，重量轻。</li>
</ul>
<p>缺点：</p>
<ul>
<li>割接需要专用设备</li>
<li>光电接口价格较贵</li>
</ul>
<p>光在纤芯中传输的方式是不断地全反射</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20241123125548.png" alt="" /></p>
<p><strong>多模光纤</strong>：可以存在多条不同角度入射的光线在一条光纤中传输。这种光纤就称为<strong>多模光纤</strong>。</p>
<p><strong>单模光纤</strong>：若光纤的直径减小到只有一个光的波长，则光纤就像一根波导那样，它可使光线一直向前传播，而不会产生多次反射。这样的光纤称为<strong>单模光纤</strong>。</p>
<p><strong>电力线</strong></p>
<h3 id="非导引型传输媒体"><a class="header" href="#非导引型传输媒体">非导引型传输媒体</a></h3>
<p>非导引型传输媒体指的是不依赖物理导体进行信号传输的通信方式。相较于导引型传输媒体（如光纤、铜线等），非导引型传输媒体利用电磁波或声波在空间中传播，使得信号可以在无直接物理连接的情况下进行传输。</p>
<p>常见的非导引型传输媒体包括：</p>
<ol>
<li><strong>无线电波</strong>：用于广播和移动通信，如Wi-Fi、手机信号等。</li>
<li><strong>微波</strong>：用于点对点的通信链路，常见于电视发送和卫星通信。</li>
<li><strong>红外线</strong>：用于短距离的通信，比如红外遥控器和某些类型的无线局域网。</li>
<li><strong>声波</strong>：在某些特定应用中，如水下通信，声波可以作为传输介质。</li>
<li>可见光</li>
<li>LIFI</li>
</ol>
<p>非导引型传输媒体的优点包括更大的灵活性和更广的覆盖范围，但也可能受到环境因素的影响，如障碍物、干扰等。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20241123130405.png" alt="" /></p>
<p>Li-Fi（Light Fidelity）是一种基于光的无线通信技术，通过调制可见光、紫外线和红外线来传输数据。与传统的Wi-Fi（无线保真）不同，Li-Fi利用光灯而不是电波进行数据传输，其基本原理是通过调节LED灯的光强度来编码数据。</p>
<p>Li-Fi的工作原理：</p>
<ol>
<li><strong>调制光信号</strong>：LED灯可以快速开启和关闭，尽管人眼无法察觉到这些变化。通过这种调制方式，可以将数据转换为光信号。</li>
<li><strong>接收器</strong>：光接收器（通常是光电二极管或相机）可以侦测到光的变化，将其转换回电信号，从而解码出数据。</li>
</ol>
<p>Li-Fi的优点：</p>
<ul>
<li><strong>高速传输</strong>：Li-Fi可以提供比传统Wi-Fi更快的数据传输速度，理论上可达几Gbps。</li>
<li><strong>安全性</strong>：由于光不能穿透墙壁，因此信号更难被截获，提供了一种相对安全的通信方式。</li>
<li><strong>无需频谱干扰</strong>：Li-Fi不依赖于无线频谱，可以解决频谱拥堵的问题，尤其是在信号拥挤的环境中。</li>
</ul>
<p>应用领域：</p>
<ul>
<li><strong>智能家居</strong>：用于设备间的高速数据交换。</li>
<li><strong>医疗环境</strong>：在医院等对无线电波敏感的场所。</li>
<li><strong>交通管理</strong>：通过灯光信号进行车辆间的数据通信。</li>
<li><strong>户外和室内场所</strong>：包括商场、影院等，提供增值服务和信息传递。</li>
</ul>
<p>尽管Li-Fi具有很多优点，但也面临一些挑战，比如需要照明设备和接收器在视线范围内，并且在强光或复杂环境中信号可能会受到干扰。</p>
<p>蜂窝移动通信（900MHz、1800MHz、3.4GHz）</p>
<p>注：蜂窝网络中的几G代表第几代通信技术</p>
<ul>
<li>2G频段：GSM900和GSM1800在900MHz和1800MHz频段左右。技术标准：GSM、CDMA</li>
<li>3G频段：1880MHz-1900MHz和2010MHz-2025MHz。四种标准：CDMA2000、WCDMA、TD-SCDMA、WiMAX</li>
<li>4G频段：1880-1900MHz、2320-2370MHz、2575-2635MHz。——150Mbps，关键技术：OFDM、MIMO、智能天线技术、SDR技术</li>
<li>5G频段：3300-3400MHz（原则上限室内使用）、3400-3600MHz和4800-5000MHz。——10Gbps</li>
</ul>
<h2 id="23-传输方式"><a class="header" href="#23-传输方式">2.3 传输方式</a></h2>
<h3 id="串行传输和并行传输"><a class="header" href="#串行传输和并行传输">串行传输和并行传输</a></h3>
<p><strong>串行传输</strong>：数据是一个比特一个比特依次发送的，因此在发送端与接收端之间，只需要一条数据传输线路即可</p>
<p><strong>并行传输</strong>：</p>
<ul>
<li>一次发送n个比特，因此，在发送端和接收端之间需要有n条传输线路</li>
<li>并行传输的优点是比串行传输的速度n倍，但成本高</li>
</ul>
<p>数据在传输线路上的传输采用是<strong>串行传输</strong>，计算机内部的数据传输常用<strong>并行传输</strong></p>
<h3 id="同步传输和异步传输"><a class="header" href="#同步传输和异步传输">同步传输和异步传输</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20241123131215.png" alt="" /></p>
<p><strong>同步传输</strong>：</p>
<ul>
<li>数据块以稳定的比特流的形式传输。字节之间没有间隔</li>
<li>接收端在每个比特信号的中间时刻进行检测，以判别接收到的是比特0还是比特1</li>
<li>由于不同设备的时钟频率存在一定差异，不可能做到完全相同，在传输大量数据的过程中，所产生的判别时刻的累计误差，会导致接收端对比特信号的判别错位。所以要使收发双发时钟保持同步</li>
</ul>
<p><strong>异步传输</strong>：</p>
<ul>
<li>以字节为独立的传输单位，字节之间的时间间隔不是固定的</li>
<li>接收端仅在每个字节的起始处对字节内的比特实现同步</li>
<li>通常在每个字节前后分别加上起始位和结束位</li>
</ul>
<h3 id="单向通信单工双向交替通信半双工和双向同时通信全双工"><a class="header" href="#单向通信单工双向交替通信半双工和双向同时通信全双工">单向通信（单工）、双向交替通信（半双工）和双向同时通信（全双工）</a></h3>
<p>在许多情况下，我们要使用“<strong>信道（channel）</strong>”这一名词。信道和电路并不等同。信道一般都是用来表示向某一个方向传送信息的媒体。因此，一条通信电路往往包含一条发送信道和一条接收信道。</p>
<p>从通信的双方信息交互的方式来看，可以有以下三种基本方式：</p>
<p><strong>单向通信</strong>：又称为<strong>单工通信</strong>，即只能有一个方向的通信而没有反方向的交互。无线电广播或有线电以及电视广播就属于这种类型</p>
<p><strong>双向交替通信</strong>：又称为<strong>半双工通信</strong>，即通信的双方可以发送信息，但不能双方同时发送（当然也就不能同时接收）。这种通信方式使一方发送另一方接收，过一段时间后可以再反过来</p>
<p><strong>双向同时通信</strong>：又称为<strong>全双工通信</strong>，即通信的双发可以同时发送和接收信息。</p>
<p><strong>单向通信</strong>只需要一条信道，而<strong>双向交替通信</strong>或<strong>双向同时通信</strong>则需要两条信道（每个方向各一条）。</p>
<p><strong>双向同时通信</strong>的传输效率最高。</p>
<h2 id="24-编码与调制"><a class="header" href="#24-编码与调制">2.4 编码与调制</a></h2>
<h3 id="常用术语"><a class="header" href="#常用术语"><strong>常用术语</strong></a></h3>
<ul>
<li><strong>数据 (data)</strong> —— 运送消息的实体。</li>
<li><strong>信号 (signal)</strong> —— 数据的电磁表现。</li>
<li><strong>模拟信号 (analogous signal)</strong> —— 代表消息的参数的取值是连续的。</li>
<li><strong>数字信号 (digital signal)</strong> —— 代表消息的参数的取值是离散的。</li>
<li><strong>码元 (code)</strong> —— 在使用时间域（或简称为时域）的波形表示数字信号时，代表不同离散数值的基本波形。</li>
<li><strong>基带信号</strong>（即基本频带信号）—— 来自信源的信号。像计算机输出的代表各种文字或图像文件的数据信号都属于基带信号。</li>
<li>基带信号往往包含有较多的低频成分，甚至有直流成分，而许多信道并不能传输这种低频分量或直流分量。因此必须对基带信号进行<strong>调制</strong> (modulation)。</li>
</ul>
<p>在计算机网络中，常见的是将数字基带信号通过编码或调制的方法在相应信道进行传输</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20241123131417.png" alt="" /></p>
<h3 id="传输媒体与信道的关系"><a class="header" href="#传输媒体与信道的关系">传输媒体与信道的关系</a></h3>
<p><strong>信道的几个基本概念</strong></p>
<ul>
<li><strong>信道</strong> —— 一般用来表示向某一个方向传送信息的媒体。</li>
<li><strong>单向通信（单工通信）</strong>——只能有一个方向的通信而没有反方向的交互。</li>
<li><strong>双向交替通信（半双工通信）</strong>——通信的双方都可以发送信息，但不能双方同时发送(当然也就不能同时接收)。</li>
<li><strong>双向同时通信（全双工通信）</strong>——通信的双方可以同时发送和接收信息。</li>
</ul>
<p>严格来说，传输媒体不能和信道划等号。</p>
<p>对于单工传输，传输媒体只包含一个信道，要么是发送信道，要么是接收信道。</p>
<p>对于半双工和全双工，传输媒体中要包含两个信道，一个发送信道，另一个是接收信道。</p>
<p>如果使用信道复用技术，一条传输媒体还可以包含多个信道。</p>
<h2 id="常用编码"><a class="header" href="#常用编码">常用编码</a></h2>
<h3 id="不归零编码"><a class="header" href="#不归零编码"><strong>不归零编码</strong></a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20241126121424.png" alt="" /></p>
<ul>
<li>正电平表示比特1/0</li>
<li>负电平表示比特0/1</li>
<li>中间的虚线是零电平，所谓不归零编码，就是指在整个码元时间内，电平不会出现零电平</li>
</ul>
<p><strong>实际比特1和比特0的表示要看现实怎么规定</strong></p>
<p>这需要发送方的发送与接收方的接收做到严格的同步</p>
<ul>
<li>需要<strong>额外一根传输线来传输时钟信号</strong>，使发送方和接收方同步，接收方按时钟信号的节拍来逐个接收码元</li>
<li><strong>但是</strong>对于计算机网络，<strong>宁愿利用这根传输线传输数据信号</strong>，而不是传输时钟信号</li>
</ul>
<p>由于<strong>不归零编码</strong>存在<strong>同步问题</strong>，因此计算机网络中的数据传输不采用这类编码！</p>
<h3 id="归零编码"><a class="header" href="#归零编码"><strong>归零编码</strong></a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20241126122059.png" alt="" /></p>
<p>归零编码虽然自同步，但<strong>编码效率低</strong></p>
<h3 id="曼彻斯特编码"><a class="header" href="#曼彻斯特编码"><strong>曼彻斯特编码</strong></a></h3>
<p>在每个码元时间的中间时刻，信号都会发生跳变</p>
<ul>
<li>负跳变表示比特1/0</li>
<li>正跳变表示比特0/1</li>
<li>码元中间时刻的跳变即表示时钟，又表示数据</li>
</ul>
<p><strong>实际比特1和比特0的表示要看现实怎么规定</strong></p>
<p>传统以太网使用的就是曼切斯特编码</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20241126122915.png" alt="" /></p>
<h3 id="差分曼彻斯特编码"><a class="header" href="#差分曼彻斯特编码"><strong>差分曼彻斯特编码</strong></a></h3>
<p>在每个码元时间的中间时刻，信号都会发送跳变，但与<strong>曼彻斯特不同</strong></p>
<ul>
<li><strong>跳变仅表示时钟</strong></li>
<li><strong>码元开始处电平是否变换表示数据</strong></li>
<li>变化表示比特1/0</li>
<li>不变化表示比特0/1</li>
</ul>
<p><strong>实际比特1和比特0的表示要看现实怎么规定</strong></p>
<p>比曼彻斯特编码变化少，更适合较高的传输速率</p>
<h3 id="总结-1"><a class="header" href="#总结-1"><strong>总结</strong></a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20241126122947.png" alt="" /></p>
<h2 id="调制"><a class="header" href="#调制">调制</a></h2>
<p>数字信号转换为模拟信号，在模拟信道中传输，例如WiFi，采用补码键控CCK/直接序列扩频DSSS/正交频分复用OFDM等<strong>调制</strong>方式。</p>
<p>模拟信号转换为另一种模拟信号，在模拟信道中传输，例如，语音数据加载到模拟的载波信号中传输。频分复用FDM技术，充分利用带宽资源。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20241126123017.png" alt="" /></p>
<p><strong>基本调制方法</strong></p>
<ul>
<li><strong>调幅AM</strong>：所调制的信号由两种不同振幅的基本波形构成。每个基本波形只能表示1比特信息量。</li>
<li><strong>调频FM</strong>：所调制的信号由两种不同频率的基本波形构成。每个基本波形只能表示1比特信息量。</li>
<li><strong>调相PM</strong>：所调制的信号由两种不同初相位的基本波形构成。每个基本波形只能表示1比特信息量。</li>
</ul>
<p>但是使用基本调制方法，1个码元只能包含1个比特信息</p>
<p><strong>混合调制</strong></p>
<p>上图码元所对应的4个比特是错误的，码元不能随便对应4个比特</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20241126123411.png" alt="" /></p>
<h2 id="码元"><a class="header" href="#码元">码元</a></h2>
<p>在使用时间域的波形表示数字信号时，代表不同离散数值的基本波形。</p>
<h2 id="25-信道的极限容量"><a class="header" href="#25-信道的极限容量">2.5 信道的极限容量</a></h2>
<ul>
<li>任何实际的信道都不是理想的，在传输信号时会产生各种失真以及带来多种干扰。</li>
<li>码元传输的速率越高，或信号传输的距离越远，或传输媒体质量越差，在信道的输出端的波形的失真就越严重。</li>
</ul>
<p>失真的原因：</p>
<ul>
<li>码元传输的速率</li>
<li>信号传输的距离</li>
<li>噪声干扰</li>
<li>传输媒体质量</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20241126123936.png" alt="" /></p>
<p>只要采用更好的调制方法，让码元可以携带更多的比特，岂不是可以无限制地提高信息的传输速率？</p>
<p>答案是否定的。因为信道的极限信息传输速率还要受限于实际的信号在信道中传输时的信噪比</p>
<p>奈氏准则和香农公式对比：</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20241126124340.png" alt="" /></p>
<p>在信道带宽一定的情况下，根据奈氏准则和香农公式，要想提高信息的传输速率就必须采用多元制
（更好的调制方法）和努力提高信道中的信噪比</p>
<p>自从香农公式发表后，各种新的信号处理和调制方法就不断出现，其目的都是为了尽可能地接近香农公式给出的传输速率极限</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20241126124602.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20241126124934.png" alt="" /></p>
<h2 id="补充信道复用技术"><a class="header" href="#补充信道复用技术">补充：信道复用技术</a></h2>
<p>本节内容视频未讲到，是《计算机网络（第7版）谢希仁》物理层的内容</p>
<h3 id="频分复用时分复用和统计时分复用"><a class="header" href="#频分复用时分复用和统计时分复用">频分复用、时分复用和统计时分复用</a></h3>
<p>复用 (multiplexing) 是通信技术中的基本概念。</p>
<p>它允许用户使用一个共享信道进行通信，降低成本，提高利用率。</p>
<p><strong>频分复用 FDM (Frequency Division Multiplexing)</strong></p>
<ul>
<li>将整个带宽分为多份，用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。</li>
<li><strong>频分复用</strong>的所有用户在同样的时间<strong>占用不同的带宽资源</strong>（请注意，这里的“带宽”是频率带宽而不是数据的发送速率）。</li>
</ul>
<p><strong>时分复用TDM (Time Division Multiplexing)</strong></p>
<ul>
<li><strong>时分复用</strong>则是将时间划分为一段段等长的<strong>时分复用帧（TDM帧）</strong>。每一个时分复用的用户在每一个 TDM 帧中占用固定序号的时隙。</li>
<li>每一个用户所占用的时隙是<strong>周期性地出现</strong>（其周期就是TDM帧的长度）的。</li>
<li>TDM 信号也称为<strong>等时</strong> (isochronous) 信号。</li>
<li><strong>时分复用的所有用户在不同的时间占用同样的频带宽度。</strong></li>
</ul>
<p>时分复用可能会造成线路资源的浪费</p>
<p>使用时分复用系统传送计算机数据时，由于计算机数据的突发性质，用户对分配到的子信道的利用率一般是不高的。</p>
<p><strong>统计时分复用 STDM (Statistic TDM)</strong></p>
<h3 id="波分复用"><a class="header" href="#波分复用">波分复用</a></h3>
<p>波分复用 WDM(Wavelength Division Multiplexing)</p>
<h3 id="码分复用"><a class="header" href="#码分复用">码分复用</a></h3>
<p>码分复用 CDM (Code Division Multiplexing)</p>
<p>常用的名词是<strong>码分多址</strong> CDMA (Code Division Multiple Access)。</p>
<p>各用户使用经过特殊挑选的不同码型，因此彼此不会造成干扰。</p>
<p>这种系统发送的信号有很强的抗干扰能力，其频谱类似于白噪声，不易被敌人发现。</p>
<h2 id="26-章节小结"><a class="header" href="#26-章节小结">2.6 章节小结</a></h2>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241102100050.png" alt="" /></p>
<p>基带传输和宽带传输是两种不同的数据传输方式，它们之间有几个关键区别：</p>
<ol>
<li>定义</li>
</ol>
<ul>
<li><strong>基带传输</strong>：指在一个信道上只传输一个信号，通常是数字信号。信号在信道内以其原始形式进行传输，无需调制。</li>
<li><strong>宽带传输</strong>：指可以在同一信道上同时传输多个信号，通常是模拟信号。它涉及频分复用（FDM）技术，可以将信道划分为多个频带，每个频带传输一个信号。</li>
</ul>
<ol start="2">
<li>传输方式</li>
</ol>
<ul>
<li><strong>基带传输</strong>：常用于短距离通信，如局域网（LAN）。信号强度随距离衰减，因此通常仅适合在较短的范围内传输。</li>
<li><strong>宽带传输</strong>：适用于长距离通信，如电话网络和有线电视，通过调制技术可以有效地发送信号，因此适合在更大范围内传输。</li>
</ul>
<ol start="3">
<li>频谱利用</li>
</ol>
<ul>
<li><strong>基带传输</strong>：利用整个带宽来传输一个信号，但带宽使用效率较低，因为每次只能传输一种信息。</li>
<li><strong>宽带传输</strong>：通过多个信号共享同一地带宽，提高了频谱的使用效率。</li>
</ul>
<ol start="4">
<li>应用场景</li>
</ol>
<ul>
<li><strong>基带传输</strong>：常见于 Ethernet（以太网）、串口通信和数字通信系统等。</li>
<li><strong>宽带传输</strong>：应用于电话网络、视频监控及互联网高速接入等。</li>
</ul>
<ol start="5">
<li>信号特性</li>
</ol>
<ul>
<li><strong>基带传输</strong>：通常传输的是数字信号，适合传输数据而不适合传输模拟信号。</li>
<li><strong>宽带传输</strong>：可以传输模拟信号及数字信号，并且通常涉及对信号的调制和解调过程。</li>
</ul>
<p>总结来说，基带传输通常用于短距和局域网环境，适合简单的数字信号传输；而宽带传输则适合远程和大规模的信号传输，能够高效利用频段资源。</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="数据链路层"><a class="header" href="#数据链路层">数据链路层</a></h1>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E6%A6%82%E8%BF%B0">概述</a>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#1-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD">1. 数据链路层的主要功能</a>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#11-%E6%95%B0%E6%8D%AE%E5%B8%A7%E5%B0%81%E8%A3%85">1.1 数据帧封装</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#12-%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80%E5%AF%BB%E5%9D%80">1.2 物理地址寻址</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#13-%E9%94%99%E8%AF%AF%E6%A3%80%E6%B5%8B%E4%B8%8E%E7%BA%A0%E6%AD%A3">1.3 错误检测与纠正</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#14-%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6">1.4 流量控制</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#15-%E5%AA%92%E4%BD%93%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6">1.5 媒体访问控制</a></li>
</ul>
</li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#2-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E7%9A%84%E5%8D%8F%E8%AE%AE%E4%B8%8E%E6%A0%87%E5%87%86">2. 数据链路层的协议与标准</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E7%9A%84%E7%B1%BB%E5%9E%8B">3. 数据链路层的类型</a>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#31-%E9%80%BB%E8%BE%91%E9%93%BE%E8%B7%AF%E6%8E%A7%E5%88%B6llc">3.1 逻辑链路控制（LLC）</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#32-%E5%AA%92%E4%BD%93%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6mac">3.2 媒体访问控制（MAC）</a></li>
</ul>
</li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#4-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%9C%A8%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B8%AD%E7%9A%84%E4%BD%9C%E7%94%A8">4. 数据链路层在计算机网络中的作用</a></li>
</ul>
</li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7">封装成帧</a>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93">透明传输</a></li>
</ul>
</li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B">差错检测</a>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E5%A5%87%E5%81%B6%E6%A0%A1%E9%AA%8C">奇偶校验</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E6%A0%A1%E9%AA%8Ccrccyclic-redundancy-check">循环冗余校验CRC(Cyclic Redundancy Check)</a></li>
</ul>
</li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93">可靠传输</a>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">可靠传输的基本概念</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E4%B8%89%E7%A7%8D%E5%8F%AF%E9%9D%A0%E5%8D%8F%E8%AE%AE">三种可靠协议</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6%E5%81%9C%E6%AD%A2-%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE">可靠传输的实现机制—停止-等待协议</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6%E5%9B%9E%E9%80%80n%E5%B8%A7%E5%8D%8F%E8%AE%AE">可靠传输的实现机制—回退N帧协议</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E6%97%A0%E5%B7%AE%E9%94%99%E6%83%85%E5%86%B5%E6%B5%81%E7%A8%8B">无差错情况流程</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E7%B4%AF%E8%AE%A1%E7%A1%AE%E8%AE%A4">累计确认</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E6%9C%89%E5%B7%AE%E9%94%99%E6%83%85%E5%86%B5">有差错情况</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6%E9%80%89%E6%8B%A9%E9%87%8D%E4%BC%A0%E5%8D%8F%E8%AE%AE">可靠传输的实现机制—选择重传协议</a></li>
</ul>
</li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AEppp">点对点协议PPP</a>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E5%B8%A7%E6%A0%BC%E5%BC%8F">帧格式</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93-1">透明传输</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E5%B7%A5%E4%BD%9C%E7%8A%B6%E6%80%81">工作状态</a></li>
</ul>
</li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E5%AA%92%E4%BD%93%E6%8E%A5%E5%85%A5%E6%8E%A7%E5%88%B6mac">媒体接入控制MAC</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E5%AA%92%E4%BD%93%E6%8E%A5%E5%85%A5%E6%8E%A7%E5%88%B6mac-1">媒体接入控制（MAC）</a>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#1-%E5%AA%92%E4%BD%93%E6%8E%A5%E5%85%A5%E6%8E%A7%E5%88%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">1. 媒体接入控制的基本概念</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#2-%E5%AA%92%E4%BD%93%E6%8E%A5%E5%85%A5%E6%8E%A7%E5%88%B6--%E9%9D%99%E6%80%81%E5%88%92%E5%88%86%E4%BF%A1%E9%81%93">2. 媒体接入控制 — 静态划分信道</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#3-%E5%AA%92%E4%BD%93%E6%8E%A5%E5%85%A5%E6%8E%A7%E5%88%B6--%E9%9A%8F%E6%9C%BA%E6%8E%A5%E5%85%A5--csmacd%E5%8D%8F%E8%AE%AE">3. 媒体接入控制 — 随机接入 — CSMA/CD协议</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#4-%E5%AA%92%E4%BD%93%E6%8E%A5%E5%85%A5%E6%8E%A7%E5%88%B6--%E9%9A%8F%E6%9C%BA%E6%8E%A5%E5%85%A5--csmaca%E5%8D%8F%E8%AE%AE">4. 媒体接入控制 — 随机接入 — CSMA/CA协议</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E6%80%BB%E7%BB%93">总结</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#mac%E5%9C%B0%E5%9D%80%E4%B8%8Eip%E5%9C%B0%E5%9D%80">MAC地址与IP地址</a>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#mac%E5%9C%B0%E5%9D%80">MAC地址</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#ip%E5%9C%B0%E5%9D%80">IP地址</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#mac%E5%9C%B0%E5%9D%80%E4%B8%8Eip%E5%9C%B0%E5%9D%80%E7%9A%84%E5%85%B3%E7%B3%BB">MAC地址与IP地址的关系</a></li>
</ul>
</li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#arp%E5%92%8Crarp%E5%8D%8F%E8%AE%AE%E8%AF%A6%E8%A7%A3">ARP和RARP协议详解</a>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#arp%E5%8D%8F%E8%AE%AE">ARP协议</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#rarp%E5%8D%8F%E8%AE%AE">RARP协议</a></li>
</ul>
</li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E9%9B%86%E7%BA%BF%E5%99%A8%E4%B8%8E%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%8C%BA%E5%88%AB">集线器与交换机的区别</a>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#1-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">1. 工作原理</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#2-%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E6%95%88%E7%8E%87">2. 数据传输效率</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#3-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%AC%A1">3. 网络层次</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#4-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">4. 应用场景</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#5-%E6%88%90%E6%9C%AC">5. 成本</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E6%80%BB%E7%BB%93-1">总结</a></li>
</ul>
</li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E8%87%AA%E5%AD%A6%E4%B9%A0%E5%92%8C%E8%BD%AC%E5%8F%91%E5%B8%A7%E7%9A%84%E6%B5%81%E7%A8%8B">以太网交换机自学习和转发帧的流程</a>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#1-%E8%87%AA%E5%AD%A6%E4%B9%A0%E8%BF%87%E7%A8%8B">1. 自学习过程</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#2-%E8%BD%AC%E5%8F%91%E5%B8%A7%E8%BF%87%E7%A8%8B">2. 转发帧过程</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#3-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">3. 性能优化</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E6%80%BB%E7%BB%93-2">总结</a></li>
</ul>
</li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AEstp">以太网交换机的生成树协议STP</a>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#1-stp%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">1. STP的工作原理</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#2-stp%E7%9A%84%E4%B8%BB%E8%A6%81%E7%BB%84%E4%BB%B6">2. STP的主要组件</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#3-stp%E7%9A%84%E4%BC%98%E5%8A%BF%E5%8F%8A%E5%B1%80%E9%99%90%E6%80%A7">3. STP的优势及局限性</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#4-stp%E7%9A%84%E7%B1%BB%E5%9E%8B">4. STP的类型</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#5-stp%E7%9A%84%E9%85%8D%E7%BD%AE">5. STP的配置</a></li>
</ul>
</li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91vlan">虚拟局域网VLAN</a>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#1-vlan%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">1. VLAN的工作原理</a>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#11-%E6%A0%87%E8%AF%86%E5%92%8C%E6%A0%87%E8%AE%B0">1.1 标识和标记</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#12-vlan%E6%88%90%E5%91%98">1.2 VLAN成员</a></li>
</ul>
</li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#2-vlan%E7%9A%84%E4%BC%98%E5%8A%BF">2. VLAN的优势</a>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#21-%E5%A2%9E%E5%BC%BA%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E6%80%A7">2.1 增强网络安全性</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#22-%E6%B5%81%E9%87%8F%E7%AE%A1%E7%90%86%E4%B8%8E%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">2.2 流量管理与性能优化</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#23-%E7%81%B5%E6%B4%BB%E7%9A%84%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86">2.3 灵活的网络管理</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#24-%E7%AE%80%E5%8C%96%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5">2.4 简化故障排查</a></li>
</ul>
</li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#3-%E5%B8%B8%E8%A7%81%E7%9A%84vlan%E7%B1%BB%E5%9E%8B">3. 常见的VLAN类型</a>
<ul>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#31-%E5%9F%BA%E4%BA%8E%E7%AB%AF%E5%8F%A3%E7%9A%84vlan">3.1 基于端口的VLAN</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#32-%E5%9F%BA%E4%BA%8Emac%E5%9C%B0%E5%9D%80%E7%9A%84vlan">3.2 基于MAC地址的VLAN</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#33-%E5%9F%BA%E4%BA%8E%E5%8D%8F%E8%AE%AE%E7%9A%84vlan">3.3 基于协议的VLAN</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#34-%E5%8A%A8%E6%80%81vlan">3.4 动态VLAN</a></li>
</ul>
</li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#4-vlan%E7%9A%84%E9%85%8D%E7%BD%AE">4. VLAN的配置</a></li>
<li><a href="%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82.html#5-vlan%E5%9C%A8%E7%BD%91%E7%BB%9C%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">5. VLAN在网络中的应用场景</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="概述"><a class="header" href="#概述">概述</a></h2>
<p>数据链路层是计算机网络的七层模型（OSI模型）中的第二层，位于物理层和网络层之间。它的主要任务是为网络层提供可靠的数据传输服务，确保在物理传输介质上有效、无误地传输数据帧。数据链路层主要关注在单一物理网络内的节点之间的直接连接，并负责将数据包封装成数据帧进行传输。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241103124335.png" alt="" /></p>
<p>数据链路层是计算机网络中不可或缺的一部分，为稳定和可靠的数据传输提供必要的支持。通过协议和标准，数据链路层负责确保数据的正确传输、设备的寻址、以及流量的控制。理解数据链路层的功能和机制对于网络工程师和IT专业人员在构建和维护网络时尤为重要。</p>
<p>以下将详细介绍数据链路层的主要功能、协议、框架与标准、类型、以及在计算机网络中的作用。</p>
<h3 id="1-数据链路层的主要功能"><a class="header" href="#1-数据链路层的主要功能">1. 数据链路层的主要功能</a></h3>
<p>数据链路层的主要功能可以概括为以下几个方面：</p>
<h4 id="11-数据帧封装"><a class="header" href="#11-数据帧封装">1.1 数据帧封装</a></h4>
<p>数据链路层将网络层传输的数据包（数据单元）封装成数据帧。每个数据帧通常包含源和目的MAC地址、控制信息（例如，帧类型和长度）、数据负载和错误检测码等。</p>
<h4 id="12-物理地址寻址"><a class="header" href="#12-物理地址寻址">1.2 物理地址寻址</a></h4>
<p>数据链路层负责使用MAC地址对设备进行物理寻址。每个NIC（网络接口卡）通常具有唯一的MAC地址，用于标识网络上的设备。</p>
<h4 id="13-错误检测与纠正"><a class="header" href="#13-错误检测与纠正">1.3 错误检测与纠正</a></h4>
<p>数据链路层通过在帧中添加错误检测机制（如循环冗余检查，CRC）以确保数据的完整性。当接收方检测到帧的错误时，可以请求重传，确保数据的准确性。</p>
<h4 id="14-流量控制"><a class="header" href="#14-流量控制">1.4 流量控制</a></h4>
<p>数据链路层通过流量控制机制减少发送方和接收方之间的数据传输速率差异，例如使用停止-等待协议，防止丢包和缓冲区溢出。</p>
<h4 id="15-媒体访问控制"><a class="header" href="#15-媒体访问控制">1.5 媒体访问控制</a></h4>
<p>在共享传输介质中，数据链路层通过媒介访问控制（MAC）协议来协调多个设备对传输介质的访问，确保无冲突的稳定数据传输。常见的MAC协议包括CSMA/CD（载波监听多路访问/碰撞检测）和CSMA/CA（载波监听多路访问/碰撞避免）。</p>
<h3 id="2-数据链路层的协议与标准"><a class="header" href="#2-数据链路层的协议与标准">2. 数据链路层的协议与标准</a></h3>
<p>数据链路层包含多种协议和标准，以满足不同网络技术的需求。主要的协议和标准有：</p>
<ul>
<li>
<p><strong>以太网（Ethernet）</strong>：</p>
<ul>
<li>一种最常用的局域网（LAN）技术，采用CSMA/CD机制，实现数据帧的互通，广泛应用于家庭和企业网络。</li>
</ul>
</li>
<li>
<p><strong>Wi-Fi（无线局域网）</strong>：</p>
<ul>
<li>基于IEEE 802.11标准的无线网络技术，采用CSMA/CA机制，以支持不同设备的无线连接。</li>
</ul>
</li>
<li>
<p><strong>点对点协议（PPP）</strong>：</p>
<ul>
<li>一种用于点对点连接的协议，通常用于通过串行连接提供数据链路层服务，支持多种网络层协议。</li>
</ul>
</li>
<li>
<p><strong>Frame Relay</strong>：</p>
<ul>
<li>一种广域网（WAN）技术，通过帧中继交换数据，适用于需要高带宽的网络应用。</li>
</ul>
</li>
<li>
<p><strong>HDLC（高级数据链路控制协议）</strong>：</p>
<ul>
<li>一种用于同步和异步传输的协议，广泛用于点对点和多点通信网络。</li>
</ul>
</li>
</ul>
<h3 id="3-数据链路层的类型"><a class="header" href="#3-数据链路层的类型">3. 数据链路层的类型</a></h3>
<p>数据链路层通常可以分为两种类型：</p>
<h4 id="31-逻辑链路控制llc"><a class="header" href="#31-逻辑链路控制llc">3.1 逻辑链路控制（LLC）</a></h4>
<p>逻辑链路控制子层为数据链路层的上层，主要负责提供面向连接的服务，管理不同网络协议的复用。LLC为上层协议提供了数据链路层服务的接口，通常采用IEEE 802.2标准。</p>
<h4 id="32-媒体访问控制mac"><a class="header" href="#32-媒体访问控制mac">3.2 媒体访问控制（MAC）</a></h4>
<p>媒体访问控制子层负责控制对物理介质的访问，确保不同设备能够高效地共享介质。MAC层使用各种机制，如CSMA/CD和CSMA/CA，以避免数据碰撞并处理冲突。</p>
<h3 id="4-数据链路层在计算机网络中的作用"><a class="header" href="#4-数据链路层在计算机网络中的作用">4. 数据链路层在计算机网络中的作用</a></h3>
<p>数据链路层在计算机网络中起着至关重要的作用，其主要作用包括：</p>
<ul>
<li>
<p><strong>确保数据完整性</strong>：</p>
<ul>
<li>数据链路层通过错误检测机制和重传策略，确保在传输过程中的数据完整性，防止错误的数据到达目的主机。</li>
</ul>
</li>
<li>
<p><strong>提供物理地址寻址</strong>：</p>
<ul>
<li>通过MAC地址的使用，数据链路层为网络中不同设备提供了一种唯一的识别方法，实现设备间的有序通信。</li>
</ul>
</li>
<li>
<p><strong>优化网络性能</strong>：</p>
<ul>
<li>通过流量控制和冲突避免机制，数据链路层帮助提升网络的性能，减少数据丢失。</li>
</ul>
</li>
<li>
<p><strong>支持不同网络协议</strong>：</p>
<ul>
<li>数据链路层可以支持多种网络层协议（如IPv4、IPv6等），并实现它们的互通，增加了网络的灵活性和可扩展性。</li>
</ul>
</li>
</ul>
<h2 id="封装成帧"><a class="header" href="#封装成帧">封装成帧</a></h2>
<p>封装成帧是指数据链路层给上层交付的协议数据单元添加帧头和帧尾使之成为帧</p>
<ul>
<li><strong>帧头和帧尾中包含有重要的控制信息</strong></li>
</ul>
<p>发送方的数据链路层将上层交付下来的协议数据单元封装成帧后，还要通过物理层，将构成帧的各比特，转换成电信号交给传输媒体，那么接收方的数据链路层如何从物理层交付的比特流中提取出一个个的帧？</p>
<p>答：需要帧头和帧尾来做<strong>帧定界</strong></p>
<p>但比不是每一种数据链路层协议的帧都包含有帧定界标志，例如下面例子</p>
<blockquote>
<p>前导码</p>
<ul>
<li>
<p>前同步码：作用是使接收方的时钟同步</p>
</li>
<li>
<p>帧开始定界符：表明其后面紧跟着的就是MAC帧</p>
</li>
</ul>
</blockquote>
<p>另外以太网还规定了帧间间隔为96比特时间，因此，MAC帧不需要帧结束定界符</p>
<h3 id="透明传输"><a class="header" href="#透明传输">透明传输</a></h3>
<blockquote>
<p><strong>透明</strong>：指某一个实际存在的事物看起来却好像不存在一样。</p>
</blockquote>
<p>透明传输是指<strong>数据链路层对上层交付的传输数据没有任何限制</strong>，好像数据链路层不存在一样</p>
<p>帧界定标志也就是个特定数据值，如果在上层交付的协议数据单元中， 恰好也包含这个特定数值，接收方就不能正确接收</p>
<blockquote>
<p>所以数据链路层应该对上层交付的数据有限制，其内容不能包含帧定界符的值</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241103125713.png" alt="" /></p>
<p><strong>解决透明传输问题</strong></p>
<ul>
<li><strong>解决方法</strong>：面向字节的物理链路使用<strong>字节填充</strong> (byte stuffing) 或<strong>字符填充</strong> (character stuffing)，面向比特的物理链路使用比特填充的方法实现透明传输</li>
<li>发送端的数据链路层在数据中出现控制字符“SOH”或“EOT”的前面<strong>插入一个转义字符“ESC”</strong>(其十六进制编码是1B)。</li>
<li>接收端的数据链路层在将数据送往网络层之前删除插入的转义字符。</li>
<li>如果转义字符也出现在数据当中，那么应在转义字符前面插入一个转义字符 ESC。当接收端收到连续的两个转义字符时，就删除其中前面的一个。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241103125828.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241103125949.png" alt="" /></p>
<h2 id="差错检测"><a class="header" href="#差错检测">差错检测</a></h2>
<p>实际的通信链路都不是理想的，比特在传输过程中可能会产生差错：1可能会变成0，而0也可能变成1。这称为比特差错。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241103130243.png" alt="" /></p>
<h3 id="奇偶校验"><a class="header" href="#奇偶校验">奇偶校验</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241103130321.png" alt="" /></p>
<h3 id="循环冗余校验crccyclic-redundancy-check"><a class="header" href="#循环冗余校验crccyclic-redundancy-check">循环冗余校验CRC(Cyclic Redundancy Check)</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241103130408.png" alt="" /></p>
<p>算法要求生成多项式必须包含最低次项1</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241103130616.png" alt="" /></p>
<p>循环冗余校验 CRC 是一种检错方法，而帧校验序列 FCS 是添加在数据后面的冗余码</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241103130748.png" alt="" /></p>
<h2 id="可靠传输"><a class="header" href="#可靠传输">可靠传输</a></h2>
<h3 id="可靠传输的基本概念"><a class="header" href="#可靠传输的基本概念">可靠传输的基本概念</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241103131212.png" alt="" /></p>
<p>常见传输差错：</p>
<ul>
<li>比特差错：实际的通信链路都不是理想的，比特在传输过程中可能会产生差错：1可能会变成0，而0也可能变成1。</li>
<li>分组丢失：路由器输入队列快满了，主动丢弃收到的分组</li>
<li>分组失序：数据并未按照发送顺序依次到达接收端</li>
<li>分组重复：由于某些原因，有些分组在网络中滞留了，没有及时到达接收端，这可能会造成发送端对该分组的重发，重发的分组到达接收端，但一段时间后，滞留在网络的分组也到达了接收端，这就造成<strong>分组重复</strong>的传输差错</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241103131242.png" alt="" /></p>
<h3 id="三种可靠协议"><a class="header" href="#三种可靠协议">三种可靠协议</a></h3>
<ul>
<li>停止-等待协议SW</li>
<li>回退N帧协议GBN</li>
<li>选择重传协议SR</li>
</ul>
<p>这三种可靠传输实现机制的基本原理并不仅限于数据链路层，可以应用到计算机网络体系结构的各层协议中。</p>
<h3 id="可靠传输的实现机制停止-等待协议"><a class="header" href="#可靠传输的实现机制停止-等待协议">可靠传输的实现机制—停止-等待协议</a></h3>
<p>停止-等待协议可能遇到的四个问题</p>
<p><strong>确认与否认</strong></p>
<p><strong>超时重传</strong></p>
<p><strong>确认丢失</strong></p>
<blockquote>
<p>既然数据分组需要编号，确认分组是否需要编号？</p>
<p>要。如下图所示</p>
</blockquote>
<p><strong>确认迟到</strong></p>
<blockquote>
<p>注意，图中最下面那个数据分组与之前序号为0的那个数据分组不是同一个数据分组</p>
</blockquote>
<p><strong>注意事项</strong></p>
<p>停止-等待协议的信道利用率</p>
<p>假设收发双方之间是一条直通的信道</p>
<ul>
<li><strong>TD</strong>：是发送方发送数据分组所耗费的发送时延</li>
<li><strong>RTT</strong>：是收发双方之间的往返时间</li>
<li><strong>TA</strong>：是接收方发送确认分组所耗费的发送时延</li>
</ul>
<p>TA一般都远小于TD，可以忽略，当RTT远大于TD时，信道利用率会非常低</p>
<p>像停止-等待协议这样通过确认和重传机制实现的可靠传输协议，常称为自动请求重传协议ARQ(<strong>A</strong>utomatic <strong>R</strong>epeat re<strong>Q</strong>uest)，意思是重传的请求是自动进行，因为不需要接收方显式地请求，发送方重传某个发送的分组。</p>
<h3 id="可靠传输的实现机制回退n帧协议"><a class="header" href="#可靠传输的实现机制回退n帧协议">可靠传输的实现机制—回退N帧协议</a></h3>
<p>为什么用回退N帧协议？</p>
<p>在相同的时间内，使用停止-等待协议的发送方只能发送一个数据分组，而采用流水线传输的发送方，可以发送多个数据分组</p>
<p>回退N帧协议在流水线传输的基础上，利用发送窗口来限制发送方可连续发送数据分组的个数</p>
<h3 id="无差错情况流程"><a class="header" href="#无差错情况流程">无差错情况流程</a></h3>
<p>发送方将序号落在发送窗口内的0~4号数据分组，依次连续发送出去</p>
<p>他们经过互联网传输正确到达接收方，就是没有乱序和误码，接收方按序接收它们，每接收一个，接收窗口就向前滑动一个位置，并给发送方发送针对所接收分组的确认分组，在通过互联网的传输正确到达了发送方</p>
<p>发送方每接收一个、发送窗口就向前滑动一个位置，这样就有新的序号落入发送窗口，发送方可以将收到确认的数据分组从缓存中删除了，而接收方可以择机将已接收的数据分组交付上层处理</p>
<h3 id="累计确认"><a class="header" href="#累计确认">累计确认</a></h3>
<p>优点:</p>
<ul>
<li>即使确认分组丢失，发送方也可能不必重传</li>
<li>减小接收方的开销</li>
<li>减小对网络资源的占用</li>
</ul>
<p>缺点：</p>
<ul>
<li>不能向发送方及时反映出接收方已经正确接收的数据分组信息</li>
</ul>
<h3 id="有差错情况"><a class="header" href="#有差错情况">有差错情况</a></h3>
<p>例如在传输数据分组时，5号数据分组出现误码，接收方通过数据分组中的检错码发现了错误，于是丢弃该分组，而后续到达的这剩下四个分组与接收窗口的序号不匹配。</p>
<p>接收同样也不能接收它们，讲它们丢弃，并对之前按序接收的最后一个数据分组进行确认，发送ACK4，<strong>每丢弃一个数据分组，就发送一个ACK4</strong></p>
<p>当收到重复的ACK4时，就知道之前所发送的数据分组出现了差错，于是可以不等超时计时器超时就立刻开始重传，具体收到几个重复确认就立刻重传，根据具体实现决定</p>
<p>如果收到这4个重复的确认并不会触发发送立刻重传，一段时间后。超时计时器超时，也会将发送窗口内以发送过的这些数据分组全部重传</p>
<p>若WT超过取值范围，例如WT=8，会出现什么情况？</p>
<ul>
<li>
<p>回退N帧协议在流水线传输的基础上利用发送窗口来限制发送方连续发送数据分组的数量，是一种连续ARQ协议</p>
</li>
<li>
<p>在协议的工作过程中发送窗口和接收窗口不断向前滑动，因此这类协议又称为滑动窗口协议</p>
</li>
<li>
<p>由于回退N帧协议的特性，当通信线路质量不好时，其信道利用率并不比停止-等待协议高</p>
</li>
</ul>
<h3 id="可靠传输的实现机制选择重传协议"><a class="header" href="#可靠传输的实现机制选择重传协议">可靠传输的实现机制—选择重传协议</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131232953.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131233016.png" alt="" /></p>
<h2 id="点对点协议ppp"><a class="header" href="#点对点协议ppp">点对点协议PPP</a></h2>
<ul>
<li>点对点协议PPP（Point-to-Point Protocol）是目前使用最广泛的点对点数据链路层协议</li>
<li>PPP协议是因特网工程任务组IEIF在1992年制定的。经过1993年和1994年的修订，现在的PPP协议已成为因特网的正式标准<code>[RFC1661，RFC1662]</code></li>
<li>数据链路层使用的一种协议，它的特点是：简单；只检测差错，而不是纠正差错；不使用序号，也不进行流量控制；可同时支持多种网络层协议</li>
<li>PPPoE 是宽带上网的主机使用的链路层协议</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131233342.png" alt="" /></p>
<h3 id="帧格式"><a class="header" href="#帧格式">帧格式</a></h3>
<p>必须规定特殊的字符作为帧定界符</p>
<h3 id="透明传输-1"><a class="header" href="#透明传输-1">透明传输</a></h3>
<p>必须保证数据传输的透明性</p>
<p>实现透明传输的方法</p>
<ul>
<li>面向字节的异步链路：字节填充法（插入“转义字符”）</li>
<li>面向比特的同步链路：比特填充法（插入“比特0”）</li>
</ul>
<p>能够对接收端收到的帧进行检测，并立即丢弃有差错的帧。</p>
<h3 id="工作状态"><a class="header" href="#工作状态">工作状态</a></h3>
<ul>
<li>当用户拨号接入 ISP 时，路由器的调制解调器对拨号做出确认，并建立一条物理连接。</li>
<li>PC 机向路由器发送一系列的 LCP 分组（封装成多个 PPP 帧）。</li>
<li>这些分组及其响应选择一些 PPP 参数，并进行网络层配置，NCP 给新接入的 PC 机</li>
<li>分配一个临时的 IP 地址，使 PC 机成为因特网上的一个主机。</li>
<li>通信完毕时，NCP 释放网络层连接，收回原来分配出去的 IP 地址。接着，LCP 释放数据链路层连接。最后释放的是物理层的连接。</li>
</ul>
<p>可见，PPP 协议已不是纯粹的数据链路层的协议，它还包含了物理层和网络层的内容。</p>
<h2 id="媒体接入控制mac"><a class="header" href="#媒体接入控制mac">媒体接入控制MAC</a></h2>
<p><strong>媒体接入控制（介质访问控制）使用一对多的广播通信方式</strong></p>
<blockquote>
<p><strong>Medium Access Control</strong>翻译成媒体接入控制，有些翻译成介质访问控制</p>
</blockquote>
<p><strong>局域网的数据链路层</strong></p>
<ul>
<li>
<p>局域网最主要的<strong>特点</strong>是：</p>
<ul>
<li>网络为一个单位所拥有；</li>
<li>地理范围和站点数目均有限。</li>
</ul>
</li>
<li>
<p>局域网具有如下<strong>主要优点</strong>：</p>
<ul>
<li>具有广播功能，从一个站点可很方便地访问全网。局域网上的主机可共享连接在局域网上的各种硬件和软件资源。</li>
<li>便于系统的扩展和逐渐地演变，各设备的位置可灵活调整和改变。</li>
<li>提高了系统的可靠性、可用性和残存性。</li>
</ul>
</li>
</ul>
<p><strong>数据链路层的两个子层</strong></p>
<p>为了使数据链路层能更好地适应多种局域网标准，IEEE 802 委员会就将局域网的数据链路层拆成<strong>两个子层</strong>：</p>
<ol>
<li><strong>逻辑链路控制</strong> LLC (Logical Link Control)子层；</li>
<li><strong>媒体接入控制</strong> MAC (Medium Access Control)子层。</li>
</ol>
<p>与接入到传输媒体有关的内容都放在 MAC子层，而 LLC 子层则与传输媒体无关。 <strong>不管采用何种协议的局域网，对 LLC 子层来说都是透明的。</strong></p>
<h1 id="媒体接入控制mac-1"><a class="header" href="#媒体接入控制mac-1">媒体接入控制（MAC）</a></h1>
<p>媒体接入控制（MAC）是计算机网络中的一个重要层，位于数据链路层（Layer 2），负责控制设备如何访问和使用共享的通信媒介（如无线路由器、以太网等）。本节将从以下四个小节详细介绍MAC的基本概念、静态信道划分、随机接入中的CSMA/CD和CSMA/CA协议。</p>
<h3 id="1-媒体接入控制的基本概念"><a class="header" href="#1-媒体接入控制的基本概念">1. 媒体接入控制的基本概念</a></h3>
<p>1.1 定义</p>
<p>媒体接入控制是数据链路层的一个子层，负责在共享介质上管理多个网络设备的访问，以确保数据的可靠传输。它的主要任务是解决在同一网络环境中多个设备同时发送数据时的冲突问题。</p>
<p>1.2 功能</p>
<ul>
<li><strong>网络地址分配</strong>：MAC层为每个网络接口分配唯一的MAC地址，这一地址用于在同一局域网内识别设备。</li>
<li><strong>冲突检测与避免</strong>：MAC层通过冲突检测和避免机制，确保多个设备在发送数据时不会产生干扰。</li>
<li><strong>帧封装与解封装</strong>：在数据帧的传输过程中，MAC层负责将网络层传来的数据封装成帧，并在接收端将其解封装。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201132625.png" alt="" /></p>
<h3 id="2-媒体接入控制--静态划分信道"><a class="header" href="#2-媒体接入控制--静态划分信道">2. 媒体接入控制 — 静态划分信道</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201132731.png" alt="" /></p>
<p>2.1 定义</p>
<p>静态划分信道是媒体接入控制的一种方法，通过预先划分信道，确保每个用户在特定时间或频率范围内的独占访问。这种方法的典型应用包括时分多址（TDMA）和频分多址（FDMA）。</p>
<p>2.2 实现方式</p>
<ul>
<li>
<p><strong>时分多址（TDMA）</strong>：网络中的设备在时间上被划分成若干时隙，每个设备在特定的时隙内发送数据。这样可以避免冲突，实现公平访问。</p>
<p>例如，蜂窝通信系统常常使用TDMA技术，每个用户在不同时间段内进行数据传输。</p>
</li>
<li>
<p><strong>频分多址（FDMA）</strong>：设备通过在不同的频段上同时发送数据，避免互相干扰。这种方式在广播和某些卫星通信技术中发挥重要作用。</p>
</li>
</ul>
<p>2.3 优缺点</p>
<ul>
<li>
<p><strong>优点</strong>：</p>
<ul>
<li>冲突概率低，资源利用率高，适合高稳定性场合。</li>
<li>适合有确定通信需求的情况，比如固定容量的电话系统。</li>
</ul>
</li>
<li>
<p><strong>缺点</strong>：</p>
<ul>
<li>灵活性差，无法根据业务量动态调整带宽资源。</li>
<li>时间分配不均可能导致某些设备的空闲时间过长。</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201132755.png" alt="" /></p>
<h3 id="3-媒体接入控制--随机接入--csmacd协议"><a class="header" href="#3-媒体接入控制--随机接入--csmacd协议">3. 媒体接入控制 — 随机接入 — CSMA/CD协议</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201133128.png" alt="" /></p>
<p>3.1 定义</p>
<p>CSMA/CD（Carrier Sense Multiple Access with Collision Detection）是一种随机接入协议，允许多个设备在共享信道上进行数据传输，同时能够检测和处理冲突。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201132900.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201132935.png" alt="" /></p>
<p>3.2 工作流程</p>
<ol>
<li><strong>载波监听</strong>：在发送数据之前，设备首先监听信道以确定是否空闲。</li>
<li><strong>数据发送</strong>：如果信道空闲，设备开始发送数据帧。</li>
<li><strong>冲突检测</strong>：在发送过程中，设备继续监听信道，检测是否发生冲突。如果监听到冲突，所有发送的设备会停止发送。</li>
<li><strong>重传机制</strong>：检测到冲突后，设备会进行随机的退避处理（如等待一段随机时间），然后再尝试重新发送数据。</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201133019.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201133058.png" alt="" /></p>
<p>3.3 应用场景</p>
<p>CSMA/CD主要应用于以太网和早期的局域网环境，适合较少设备且流量不大的网络。</p>
<p>3.4 限制</p>
<p>由于CSMA/CD在发生冲突时会导致延迟和网络效率降低，这使得它不适用于高流量或大量设备的网络，如现代以太网中已被全双工模式所取代。</p>
<h3 id="4-媒体接入控制--随机接入--csmaca协议"><a class="header" href="#4-媒体接入控制--随机接入--csmaca协议">4. 媒体接入控制 — 随机接入 — CSMA/CA协议</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201133259.png" alt="" /></p>
<p>4.1 定义</p>
<p>CSMA/CA（Carrier Sense Multiple Access with Collision Avoidance）是另一种随机接入协议，主要用于无线网络，如Wi-Fi。其目标是避免而不是检测冲突。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201133443.png" alt="" /></p>
<p>4.2 工作流程</p>
<ol>
<li><strong>载波监听</strong>：设备在发送数据之前同样监测信道是否空闲。</li>
<li><strong>数据发送请求</strong>：如果信道空闲，设备发送RTS（请求发送）帧请求信道访问，目标设备接收到RTS后回复CTS（清除发送）帧。</li>
<li><strong>数据发送</strong>：获得CTS后，发送方在确认信道空闲的情况下发送数据帧。</li>
<li><strong>确认机制</strong>：接收设备在成功接收到数据后发送ACK（确认）帧给发送方。</li>
</ol>
<p>4.3 应用场景</p>
<p>CSMA/CA广泛应用于无线局域网（如802.11协议），尤其是需要避免冲突的无线环境。</p>
<p>4.4 优势与局限</p>
<ul>
<li>
<p><strong>优势</strong>：</p>
<ul>
<li>有效避免冲突，能在高流量环境中保持通信稳定。</li>
<li>在某些情况下（如远程位置联网），无需担心信号干扰。</li>
</ul>
</li>
<li>
<p><strong>局限</strong>：</p>
<ul>
<li>相比CSMA/CD，CSMA/CA协议的延迟更高，尤其是在高负载情况下。</li>
<li>由于无线信道的不稳定性，数据包丢失的风险增加。</li>
</ul>
</li>
</ul>
<h3 id="总结-2"><a class="header" href="#总结-2">总结</a></h3>
<p>媒体接入控制(MAC) 是确保网络中设备能够有效共享通道的重要机制。通过静态信道划分与随机接入协议，如CSMA/CD和CSMA/CA，MAC能够在不同的网络环境中平衡碰撞检测、资源利用率及网络延迟等因素，从而实现高效、稳定的数据传输。</p>
<h2 id="mac地址与ip地址"><a class="header" href="#mac地址与ip地址">MAC地址与IP地址</a></h2>
<p>在计算机网络中，MAC地址和IP地址是用于设备识别和通信的两种重要标识符，同时ARP（地址解析协议）和RARP（逆地址解析协议）则是用于这两者之间相互转换的协议。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201132015.png" alt="" /></p>
<p>以下是对它们的详细介绍及其关系。</p>
<h3 id="mac地址"><a class="header" href="#mac地址">MAC地址</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201132102.png" alt="" /></p>
<p>MAC（Media Access Control）地址是一种唯一的物理地址，用于在局域网（LAN）中唯一标识网络接口设备。它通常由48位二进制数组成，通常以6个字节表示，形式为<code>00:1A:2B:3C:4D:5E</code>。</p>
<p>特点</p>
<ul>
<li><strong>硬件地址</strong>：MAC地址在设备生产时被硬编码到网络接口卡（NIC）中，理论上是唯一的。</li>
<li><strong>局部性</strong>：MAC地址用于局域网通信，只有在同一局域网上的设备能直接使用它进行互相识别。</li>
<li><strong>不可更改</strong>：虽然有些设备可以通过软件修改MAC地址，但通常情况下，它是固定不变的。</li>
</ul>
<h3 id="ip地址"><a class="header" href="#ip地址">IP地址</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201132134.png" alt="" /></p>
<p>IP（Internet Protocol）地址是网络中设备的逻辑地址，主要用于在互联网上进行设备定位和数据传输。它通常分为IPv4和IPv6两种格式：</p>
<ul>
<li><strong>IPv4</strong>：形式为<code>192.168.1.1</code>，由32位二进制数组成，分为四个八位字节。</li>
<li><strong>IPv6</strong>：形式为<code>2001:0db8:85a3:0000:0000:8a2e:0370:7334</code>，由128位二进制数组成，使用冒号分隔的八组十六进制数表示。</li>
</ul>
<p>特点：</p>
<ul>
<li><strong>逻辑地址</strong>：IP地址不是硬件固定的，可以根据网络情况进行动态更改（如通过DHCP）。</li>
<li><strong>全局性</strong>：可以在更广泛的网络中进行通信，适用于广域网（WAN）和互联网。</li>
<li><strong>分层结构</strong>：IP地址由网络部分和主机部分组成，允许对网络进行分层，便于路由和管理。</li>
</ul>
<h3 id="mac地址与ip地址的关系"><a class="header" href="#mac地址与ip地址的关系">MAC地址与IP地址的关系</a></h3>
<p>MAC地址和IP地址相辅相成，共同构成了网络通信的基本框架：</p>
<ul>
<li><strong>层次结构</strong>：在OSI模型中，MAC地址属于数据链路层（Layer 2），而IP地址属于网络层（Layer 3）。网络数据包通过IP地址进行路由，而在局域网内通过MAC地址进行传输。</li>
<li><strong>映射关系</strong>：ARP将IP地址转换为MAC地址以便在局域网中通信，而RARP则允许网络设备依据其MAC地址请求其IP地址，建立通讯连接。</li>
</ul>
<h2 id="arp和rarp协议详解"><a class="header" href="#arp和rarp协议详解">ARP和RARP协议详解</a></h2>
<h3 id="arp协议"><a class="header" href="#arp协议">ARP协议</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201132231.png" alt="" /></p>
<p>ARP（Address Resolution Protocol）是用于在局域网中，将IP地址解析为MAC地址的协议。当一个设备需要发送数据给另一个具有已知IP地址的设备时，它利用ARP获取目标设备的MAC地址。</p>
<p>工作流程：</p>
<ol>
<li><strong>请求广播</strong>：发送设备发送一个ARP请求帧，内容包含目标IP地址，请求“谁拥有这个IP地址，请回复我的MAC地址。”</li>
<li><strong>响应</strong>：拥有该IP地址的设备接收到请求后，发送ARP应答帧，包含其MAC地址。</li>
<li><strong>更新表</strong>：发送设备接收到应答后，会将这个IP地址和对应的MAC地址保存在其ARP缓存中，以便将来的通信。</li>
</ol>
<h3 id="rarp协议"><a class="header" href="#rarp协议">RARP协议</a></h3>
<p>RARP（Reverse Address Resolution Protocol）是一种用于将MAC地址解析为IP地址的协议，主要用于那些没有持久存储设备的网络，如某些网络工作站和打印机。</p>
<p>工作流程：</p>
<ol>
<li><strong>请求广播</strong>：设备发送RARP请求，内容包含其MAC地址，请求“请告诉我我的IP地址。”</li>
<li><strong>响应</strong>：RARP服务器提供对应的IP地址并发送回请求设备。</li>
<li><strong>配置</strong>：设备获取到IP地址后，进行网络配置，开始正常的网络通信。</li>
</ol>
<h2 id="集线器与交换机的区别"><a class="header" href="#集线器与交换机的区别">集线器与交换机的区别</a></h2>
<p>在网络中，集线器（Hub）和交换机（Switch）都是用于连接多台设备的网络设备，但它们的工作原理和功能有显著的不同。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201120308.png" alt="" /></p>
<p>以下是它们的详细比较：</p>
<h3 id="1-工作原理"><a class="header" href="#1-工作原理">1. 工作原理</a></h3>
<p>集线器是一种简单的网络设备，用于连接多个设备并在它们之间传输数据。它通过将接收到的数据包广播到所有连接的端口，依靠所有设备共享同一个网络带宽。它没有智能分配流量的能力。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201120239.png" alt="" /></p>
<p>交换机是一种更智能的网络设备，根据数据包的目的地址，将数据包发送到特定的设备。交换机能够学习连接设备的MAC地址，并通过维护地址表来优化数据传输，提高网络效率。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201120209.png" alt="" /></p>
<h3 id="2-数据传输效率"><a class="header" href="#2-数据传输效率">2. 数据传输效率</a></h3>
<p>由于采用广播机制，集线器在传输数据时可能导致网络拥塞，尤其是在设备较多时，这是因为所有设备共享同一带宽，容易造成碰撞。</p>
<p>交换机通过点对点的方式进行数据传输，能有效减少数据碰撞，提高网络的整体性能和带宽利用率。每个端口都拥有独立的带宽，允许多个设备同时进行数据传输。</p>
<h3 id="3-网络层次"><a class="header" href="#3-网络层次">3. 网络层次</a></h3>
<p>集线器通常被认为是在OSI模型的物理层（Layer 1），只负责物理信号的传输，而不处理数据的内容。</p>
<p>交换机工作在OSI模型的链接层（Layer 2），根据数据链路层的地址进行数据转发，能够进行更复杂的网络处理。</p>
<h3 id="4-应用场景"><a class="header" href="#4-应用场景">4. 应用场景</a></h3>
<p>集线器适用于小型网络或对性能要求不高的场景，通常用于临时连接或低流量需求的网络环境。</p>
<p>交换机更适合用于需要高性能和高带宽的企业网络，支持更复杂的网络架构，如VLAN和网络安全管理。</p>
<h3 id="5-成本"><a class="header" href="#5-成本">5. 成本</a></h3>
<p>集线器通常成本较低，适合预算有限的小型网络。</p>
<p>交换机的成本相对较高，但随着技术的发展，价格逐渐降低，性价比不断提升。</p>
<h3 id="总结-3"><a class="header" href="#总结-3">总结</a></h3>
<p>综上所述，尽管集线器和交换机都是连接网络设备的工具，但由于它们在工作原理、数据传输效率、网络层次、应用场景和成本等方面的差异，使用者应根据实际需要选择合适的网络设备。工作在数据链路层的以太网交换机，其性能远远超过工作在物理层的集线器，而且价格并不贵，这就使得集线器逐渐被市场淘汰。对于现代网络，交换机通常是更优的选择。</p>
<h2 id="以太网交换机自学习和转发帧的流程"><a class="header" href="#以太网交换机自学习和转发帧的流程">以太网交换机自学习和转发帧的流程</a></h2>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201120557.png" alt="" /></p>
<p>以太网交换机是一种智能网络设备，能够根据数据包的目标地址高效地转发信息。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201120438.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250201120541.png" alt="" /></p>
<p>其自学习和转发帧的流程复杂而又高效，以下是详细的介绍：</p>
<h3 id="1-自学习过程"><a class="header" href="#1-自学习过程">1. 自学习过程</a></h3>
<p>1.1 MAC地址学习</p>
<p>以太网交换机通过监听传入的每个数据帧，从中提取源MAC地址并记录下这些地址。这一过程的步骤如下：</p>
<ul>
<li><strong>接收数据帧</strong>：当数据帧到达交换机的某个端口时，交换机会读取该帧的源MAC地址。</li>
<li><strong>更新地址表</strong>：交换机会查看其MAC地址表（也称为转发表），如果该源MAC地址尚未存在于表中，交换机会将其记录下来，并关联到接收该数据帧的端口。</li>
<li><strong>设置过期时间</strong>：每个MAC地址表项都会有一个过期时间（通常为几分钟），如果在这段时间内未再接收到该MAC地址的数据帧，该表项将被删除。</li>
</ul>
<p>1.2 学习效果的实现</p>
<p>通过这个过程，交换机能够建立一个动态的MAC地址表，使其能够记住网络中连接的设备，并优化数据转发。</p>
<h3 id="2-转发帧过程"><a class="header" href="#2-转发帧过程">2. 转发帧过程</a></h3>
<p>2.1 接收数据帧</p>
<p>当交换机收到一个数据帧时，首先会分析帧的目标MAC地址和源MAC地址。</p>
<p>2.2 查找转发表</p>
<p>交换机会根据目标MAC地址查找其MAC地址表：</p>
<ul>
<li><strong>成功匹配</strong>：如果找到了对应的目标MAC地址，交换机会将数据帧转发到记录的端口，只将数据发送到目标设备，避免不必要的广播。</li>
<li><strong>未匹配</strong>：如果没有找到目标MAC地址，交换机会将数据帧广播到所有其他端口（除了接收端口），允许目标设备响应并更新MAC地址表。</li>
</ul>
<p>2.3 更新MAC地址表</p>
<p>在转发的同时，如果数据帧中还包含新的源MAC地址，交换机会根据前面描述的自学习过程更新MAC地址表。</p>
<p>2.4 处理特殊情况</p>
<p>在某些情况下，交换机还会执行额外的转发策略，例如：</p>
<ul>
<li><strong>广播帧</strong>：当接收到广播帧（如ARP请求），交换机会在所有端口（除了源端口）转发该帧。</li>
<li><strong>多播帧</strong>：对于多播数据，交换机会根据配置的多播组转发数据帧。</li>
</ul>
<h3 id="3-性能优化"><a class="header" href="#3-性能优化">3. 性能优化</a></h3>
<p>3.1 端口隔离</p>
<p>为了提高网络性能，交换机可以在某些端口上设置隔离，在数据帧转发时，确保不影响其他端口的通信。</p>
<p>3.2 VLAN支持</p>
<p>交换机还可以通过虚拟局域网（VLAN）将网络进行逻辑划分，进一步提高网络性能和安全性。</p>
<h3 id="总结-4"><a class="header" href="#总结-4">总结</a></h3>
<p>以太网交换机的自学习和转发帧流程使其成为一种高效的网络通信设备。通过动态学习源MAC地址并基于目标MAC地址进行帧转发，交换机能够优化网络流量，提高数据传输效率。这种智能化的处理方式使得现代网络能够支持日益增长的带宽需求和复杂数据流量管理。</p>
<h2 id="以太网交换机的生成树协议stp"><a class="header" href="#以太网交换机的生成树协议stp">以太网交换机的生成树协议STP</a></h2>
<p>生成树协议（Spanning Tree Protocol，STP）是一种网络协议，旨在防止以太网交换机网络中的环路。网络中的环路会导致广播风暴、重复帧、以及网络效率的降低，因此STP被广泛应用于局域网（LAN）中的交换机网络，以确保数据的有效和稳定传输。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131234319.png" alt="" /></p>
<p>生成树协议（STP）是保持以太网交换机网络中数据稳定传输的重要协议，通过创建无环路的网络拓扑，避免重发和广播风暴的问题。尽管STP存在收敛速度慢和带宽利用不充分的不足，但其基本原理和实现方案仍然在众多大型网络中可以有效保障网络的运行。了解STP和其变种（如RSTP、MSTP等）的使用，有助于网络管理者构建和维护高效、稳定的网络。</p>
<p>以下将详细介绍STP的工作原理、主要组件、优势及局限性、STP的类型及其配置。</p>
<h3 id="1-stp的工作原理"><a class="header" href="#1-stp的工作原理">1. STP的工作原理</a></h3>
<p>STP通过创建无环路的拓扑结构，确保在多个交换机和桥接设备之间建立稳定的逻辑连接。其基本工作原理如下：</p>
<p>1.1 选举根桥（Root Bridge）</p>
<p>在STP网络中，首先通过根桥选举的方式确定网络的“中心”。所有交换机根据其优先级和MAC地址相比较，选出一个具有最低桥接标识符（Bridge ID）的交换机作为根桥。</p>
<ul>
<li><strong>桥接标识符</strong>：桥接标识符由优先级（默认为32768）和交换机的MAC地址组成。</li>
</ul>
<p>1.2 计算最佳路径</p>
<p>一旦确定根桥，各个交换机将依据根桥的MAC地址，计算与根桥的最优路径。每个交换机通过生成树算法（Spanning Tree Algorithm，STA）确定到根桥的最短路径，进而建立无环路的拓扑结构。</p>
<p>1.3 端口状态转换</p>
<p>在确保网络无环的基础上，STP会将每个端口分配不同的状态，包括：</p>
<ul>
<li><strong>阻塞（Blocking）</strong>：端口不参与数据转发，仅接收BPDU（桥协议数据单元）。</li>
<li><strong>监听（Listening）</strong>：端口在等待确认没有环路的情况下准备转发数据，但尚未实际转发数据。</li>
<li><strong>学习（Learning）</strong>：端口开始学习MAC地址，并准备转发数据，但尚未转发数据。</li>
<li><strong>转发（Forwarding）</strong>：端口处于转发状态，可以进行正常的数据发送和接收。</li>
<li><strong>关闭（Disabled）</strong>：端口被禁用，不会参与任何数据传输。</li>
</ul>
<h3 id="2-stp的主要组件"><a class="header" href="#2-stp的主要组件">2. STP的主要组件</a></h3>
<p>STP的实施依赖多个重要的组件，这些组件共同协作以维护网络的稳定性：</p>
<p>2.1 桥接设备</p>
<p>所有在同一STP域内的交换机或桥都是参与STP过程的设备。它们交换BPDU信息，以便得知当前网络的拓扑状态。</p>
<p>2.2 BPDU（桥协议数据单元）</p>
<p>BPDU是一种由交换机发送的信息包，包含关于网络拓扑的信息，包括根桥的身份、路径成本及端口状态等。BPDU是STP协议运作的核心，交换机利用BPDU信息维护和更新拓扑结构。</p>
<p>2.3 路径成本</p>
<p>路径成本是用于评估到根桥的网络开销。STP根据路径成本选择最优转发路径，成本的计算基于连接速度（例如，千兆以太网的路径成本低于百兆以太网）。</p>
<h3 id="3-stp的优势及局限性"><a class="header" href="#3-stp的优势及局限性">3. STP的优势及局限性</a></h3>
<p>3.1 优势</p>
<ul>
<li>
<p><strong>避免网络环路</strong>：</p>
<ul>
<li>STP可以有效防止因网络环路带来的广播风暴和转发问题，确保网络的稳定性。</li>
</ul>
</li>
<li>
<p><strong>动态拓扑更新</strong>：</p>
<ul>
<li>STP能够在网络拓扑发生变化（如设备添加或故障）时，自动重新计算并更新路径。</li>
</ul>
</li>
<li>
<p><strong>链路冗余</strong>：</p>
<ul>
<li>STP支持网络中的链路冗余设计，确保在主链路失败的情况下，备用链路能够自动启用，提升网络的可靠性。</li>
</ul>
</li>
</ul>
<p>3.2 局限性</p>
<ul>
<li>
<p><strong>收敛速度慢</strong>：</p>
<ul>
<li>STP在网络拓扑变化时的收敛速度相对较慢，可能会导致短时间内的网络不稳定。</li>
</ul>
</li>
<li>
<p><strong>无法有效利用带宽</strong>：</p>
<ul>
<li>在STP中，某些链路可能处于阻塞状态，导致网络带宽未能得到充分利用。</li>
</ul>
</li>
</ul>
<h3 id="4-stp的类型"><a class="header" href="#4-stp的类型">4. STP的类型</a></h3>
<p>随着网络技术的发展，出现了多个STP的变种，主要包括：</p>
<p>4.1 Rapid Spanning Tree Protocol（RSTP）</p>
<p>RSTP（IEEE 802.1w）是STP的增强版本，通过快速收敛机制缩短了收敛时间，通常在几秒钟内完成。这使得网络能够在链路故障或拓扑变化时迅速恢复。</p>
<p>4.2 Multiple Spanning Tree Protocol（MSTP）</p>
<p>MSTP（IEEE 802.1s）允许多个VLAN在同一网络中共享一个生成树实例。通过这种方法，可以优化网络资源的分配，提高多个VLAN的流量效率。</p>
<p>4.3 Per VLAN Spanning Tree（PVST）</p>
<p>PVST是一种Cisco专有的STP实现，支持针对每个VLAN独立运行STP，从而为每个VLAN实现独立的生成树。</p>
<h3 id="5-stp的配置"><a class="header" href="#5-stp的配置">5. STP的配置</a></h3>
<p>STP的配置通常在以太网交换机的管理界面上进行，基本的配置步骤包括：</p>
<ol>
<li><strong>开启STP</strong>：确保交换机上启用STP功能。</li>
<li><strong>设置优先级</strong>：根据需要配置交换机的桥接优先级，以影响根桥的选举。</li>
<li><strong>观察BPDU</strong>：监控BPDU的流量，以确保STP正常运行。</li>
<li><strong>配置端口</strong>：根据需要将某些端口设置为阻塞、转发等不同状态。</li>
</ol>
<h2 id="虚拟局域网vlan"><a class="header" href="#虚拟局域网vlan">虚拟局域网VLAN</a></h2>
<p>虚拟局域网（Virtual Local Area Network，VLAN）是一种逻辑上划分网络的技术，使得在同一物理网络基础设施上能够创建多个逻辑分隔的网络。VLAN可以将不同的网络设备和用户根据业务需求进行划分，增强网络管理的灵活性、安全性和性能。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131233628.png" alt="" /></p>
<p>虚拟局域网（VLAN）是一种强大的网络管理工具，能够在物理网络层面上实现灵活的逻辑隔离。通过使用VLAN，组织可以有效管理网络、安全隔离部门流量、优化性能并简化网络管理流程。了解VLAN的工作原理与配置，以及其应用场景，有助于网络工程师和管理者构建高效、安全的网络环境。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131233853.png" alt="" /></p>
<p>以下将详细介绍VLAN的工作原理、优势、常见协议、应用场景及其配置。</p>
<h3 id="1-vlan的工作原理"><a class="header" href="#1-vlan的工作原理">1. VLAN的工作原理</a></h3>
<p>VLAN的基本工作原理是通过交换机上的逻辑配置来分隔数据流，即使这些设备在物理上连接在同一交换机上或同一网络中。 VLAN的创建和管理通常依赖于802.1Q（IEEE标准）协议，允许网络管理员将一个物理网络划分成多个虚拟网络。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131233810.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131233828.png" alt="" /></p>
<h4 id="11-标识和标记"><a class="header" href="#11-标识和标记">1.1 标识和标记</a></h4>
<p>在VLAN中，每个VLAN都有一个唯一的标识符，称为VLAN ID。在以太网帧中，802.1Q协议在以太网帧头中添加一个4字节的标签，指示该帧属于哪个VLAN。这个标签包含VLAN ID，从而接收交换机能够识别到帧的来源和去向。</p>
<h4 id="12-vlan成员"><a class="header" href="#12-vlan成员">1.2 VLAN成员</a></h4>
<p>设备可以通过交换机上的端口被分配到特定的VLAN。这些端口可以是接入端口（Access Port）或汇聚端口（Trunk Port）。</p>
<ul>
<li><strong>接入端口</strong>：连接到终端设备（如计算机、打印机等），允许它们接入属于该VLAN的数据传输。</li>
<li><strong>汇聚端口</strong>：用于连接多个VLAN之间的交换机，允许在不同VLAN之间进行数据通信。</li>
</ul>
<h3 id="2-vlan的优势"><a class="header" href="#2-vlan的优势">2. VLAN的优势</a></h3>
<p>VLAN技术带来了许多显著的优势，包括：</p>
<h4 id="21-增强网络安全性"><a class="header" href="#21-增强网络安全性">2.1 增强网络安全性</a></h4>
<p>通过将不同部门或团队的设备分配到不同的VLAN，VLAN可以有效隔离潜在的网络攻击和未经授权的访问，提高整体网络安全性。</p>
<h4 id="22-流量管理与性能优化"><a class="header" href="#22-流量管理与性能优化">2.2 流量管理与性能优化</a></h4>
<p>VLAN可以减少广播流量的传播，因为广播数据包仅在同一VLAN内转发，从而提升网络性能和管理效率。</p>
<h4 id="23-灵活的网络管理"><a class="header" href="#23-灵活的网络管理">2.3 灵活的网络管理</a></h4>
<p>VLAN使网络管理员能够根据需要灵活地划分网络，无需物理更改网络拓扑，简化了网络的重组和扩展过程。</p>
<h4 id="24-简化故障排查"><a class="header" href="#24-简化故障排查">2.4 简化故障排查</a></h4>
<p>由于VLAN能够将设备分组到逻辑网络中，因此在故障排查时，可以更容易识别和隔离问题，从而提高网络的可用性。</p>
<h3 id="3-常见的vlan类型"><a class="header" href="#3-常见的vlan类型">3. 常见的VLAN类型</a></h3>
<p>根据功能和设置，VLAN可以细分为几种类型：</p>
<h4 id="31-基于端口的vlan"><a class="header" href="#31-基于端口的vlan">3.1 基于端口的VLAN</a></h4>
<p>最常见的VLAN类型，通过交换机的端口来根据设备类型、位置或用户需求进行分配。每个端口只属于一个VLAN。</p>
<h4 id="32-基于mac地址的vlan"><a class="header" href="#32-基于mac地址的vlan">3.2 基于MAC地址的VLAN</a></h4>
<p>根据设备的MAC地址进行VLAN分配，MAC地址表决定设备的VLAN归属。这种方法相对灵活，但在管理上稍显复杂。</p>
<h4 id="33-基于协议的vlan"><a class="header" href="#33-基于协议的vlan">3.3 基于协议的VLAN</a></h4>
<p>此VLAN类型根据层2协议进行划分，允许同一网络接口上的不同协议流量被分配到不同的VLAN中。</p>
<h4 id="34-动态vlan"><a class="header" href="#34-动态vlan">3.4 动态VLAN</a></h4>
<p>通过802.1X等协议动态分配VLAN，允许设备在接入网络时自动与适当的VLAN关联。这种类型通常用于需要更高安全性的环境。</p>
<h3 id="4-vlan的配置"><a class="header" href="#4-vlan的配置">4. VLAN的配置</a></h3>
<p>VLAN的配置通常涉及到多个步骤，典型的配置流程包括：</p>
<ol>
<li><strong>交换机配置</strong>：在交换机上创建VLAN并为每个VLAN分配一个唯一的VLAN ID。</li>
<li><strong>端口分配</strong>：将交换机的端口分配到指定的VLAN，可能包括将特定端口设置为接入端口或汇聚端口。</li>
<li><strong>配置VLAN间路由</strong>：如果需要不同VLAN之间的通信，则需配置三层交换机或路由器进行VLAN间路由。</li>
<li><strong>测试与监控</strong>：通过网络监控工具测试VLAN的配置和性能，确保VLAN能够正常工作。</li>
</ol>
<h3 id="5-vlan在网络中的应用场景"><a class="header" href="#5-vlan在网络中的应用场景">5. VLAN在网络中的应用场景</a></h3>
<p>VLAN能够在各种网络环境中得到广泛应用，主要包括：</p>
<ul>
<li>
<p><strong>企业内部网络</strong>：</p>
<ul>
<li>不同部门（如财务、研发、市场等）可以使用不同的VLAN，以便于管理和提升安全性。</li>
</ul>
</li>
<li>
<p><strong>教育网络</strong>：</p>
<ul>
<li>学校可以将教师、学生和来宾的设备分别划分到不同的VLAN，以实现灵活的网络管理和安全隔离。</li>
</ul>
</li>
<li>
<p><strong>大型数据中心</strong>：</p>
<ul>
<li>通过VLAN划分不同的服务和应用，优化资源利用率并简化管理。</li>
</ul>
</li>
<li>
<p><strong>虚拟化环境</strong>：</p>
<ul>
<li>在虚拟化环境中，VLAN可用于隔离虚拟机流量，提供增强的安全性和管理能力。</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="网络层"><a class="header" href="#网络层">网络层</a></h1>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E6%A6%82%E8%BF%B0">概述</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E7%BD%91%E7%BB%9C%E5%B1%82%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD">网络层的主要功能</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#1-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9">1. 路由选择</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#2-%E9%80%BB%E8%BE%91%E5%9C%B0%E5%9D%80">2. 逻辑地址</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#3-%E5%88%86%E6%AE%B5%E4%B8%8E%E9%87%8D%E7%BB%84">3. 分段与重组</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#4-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6">4. 拥塞控制</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#5-%E6%95%B0%E6%8D%AE%E5%8C%85%E8%BD%AC%E5%8F%91">5. 数据包转发</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E7%BD%91%E7%BB%9C%E5%B1%82%E7%9A%84%E5%8D%8F%E8%AE%AE">网络层的协议</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E7%BD%91%E7%BB%9C%E5%B1%82%E4%B8%8E%E5%85%B6%E4%BB%96%E5%B1%82%E7%9A%84%E5%85%B3%E7%B3%BB">网络层与其他层的关系</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E7%BD%91%E7%BB%9C%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%9C%8D%E5%8A%A1">网络层提供的两种服务</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E8%99%9A%E7%94%B5%E8%B7%AF%E6%9C%8D%E5%8A%A1">虚电路服务</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E7%89%B9%E5%BE%81">特征</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B">使用示例</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E6%95%B0%E6%8D%AE%E5%8C%85%E6%9C%8D%E5%8A%A1">数据包服务</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E7%89%B9%E5%BE%81-1">特征</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B-1">使用示例</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E8%99%9A%E7%94%B5%E8%B7%AF%E6%9C%8D%E5%8A%A1%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%8C%85%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%AF%94%E8%BE%83">虚电路服务与数据包服务的比较</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#ipv4%E5%9C%B0%E5%9D%80%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8">IPv4地址及其应用</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#ipv4%E5%9C%B0%E5%9D%80%E6%A6%82%E8%BF%B0">IPv4地址概述</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E7%89%B9%E7%82%B9">特点</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80%E7%9A%84ipv4%E5%9C%B0%E5%9D%80">分类编址的IPv4地址</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91%E7%9A%84ipv4%E5%9C%B0%E5%9D%80">划分子网的IPv4地址</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81">子网掩码</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E6%97%A0%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80%E7%9A%84ipv4%E5%9C%B0%E5%9D%80">无分类编址的IPv4地址</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#cidr%E7%89%B9%E6%80%A7">CIDR特性</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#ipv4%E5%9C%B0%E5%9D%80%E7%9A%84%E5%BA%94%E7%94%A8%E8%A7%84%E5%88%92">IPv4地址的应用规划</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#ip%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E5%8F%91%E9%80%81%E5%92%8C%E8%BD%AC%E5%8F%91%E8%BF%87%E7%A8%8B">IP数据报的发送和转发过程</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#1-%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E7%94%9F%E6%88%90">1. 数据报的生成</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#2-%E5%8F%91%E8%B5%B7%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82">2. 发起发送请求</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#3-%E5%8F%91%E9%80%81ip%E6%95%B0%E6%8D%AE%E6%8A%A5">3. 发送IP数据报</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#4-%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E8%BD%AC%E5%8F%91%E8%BF%87%E7%A8%8B">4. 数据报的转发过程</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#5-%E5%88%B0%E8%BE%BE%E7%9B%AE%E6%A0%87%E4%B8%BB%E6%9C%BA">5. 到达目标主机</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE%E5%8F%8A%E5%85%B6%E5%8F%AF%E8%83%BD%E4%BA%A7%E7%94%9F%E7%9A%84%E8%B7%AF%E7%94%B1%E7%8E%AF%E8%B7%AF%E9%97%AE%E9%A2%98">静态路由配置及其可能产生的路由环路问题</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#1-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E7%9A%84%E6%A6%82%E8%BF%B0">1. 静态路由的概述</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E7%89%B9%E7%82%B9-1">特点</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#2-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE">2. 静态路由配置</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#21-%E7%A1%AE%E5%AE%9A%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91">2.1 确定网络拓扑</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#22-%E9%80%89%E6%8B%A9%E8%B7%AF%E7%94%B1%E5%99%A8">2.2 选择路由器</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#23-%E8%AE%BF%E9%97%AE%E8%B7%AF%E7%94%B1%E5%99%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%95%8C%E9%9D%A2">2.3 访问路由器命令行界面</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#24-%E8%BE%93%E5%85%A5%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E5%91%BD%E4%BB%A4">2.4 输入静态路由命令</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#25-%E7%A1%AE%E8%AE%A4%E5%92%8C%E4%BF%9D%E5%AD%98%E9%85%8D%E7%BD%AE">2.5 确认和保存配置</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#3-%E8%B7%AF%E7%94%B1%E7%8E%AF%E8%B7%AF%E7%9A%84%E9%97%AE%E9%A2%98">3. 路由环路的问题</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#31-%E8%B7%AF%E7%94%B1%E7%8E%AF%E8%B7%AF%E7%9A%84%E5%AE%9A%E4%B9%89">3.1 路由环路的定义</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#32-%E8%B7%AF%E7%94%B1%E7%8E%AF%E8%B7%AF%E7%9A%84%E4%BA%A7%E7%94%9F%E5%8E%9F%E5%9B%A0">3.2 路由环路的产生原因</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#33-%E8%B7%AF%E7%94%B1%E7%8E%AF%E8%B7%AF%E7%9A%84%E5%BD%B1%E5%93%8D">3.3 路由环路的影响</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#4-%E9%81%BF%E5%85%8D%E8%B7%AF%E7%94%B1%E7%8E%AF%E8%B7%AF%E7%9A%84%E6%96%B9%E6%B3%95">4. 避免路由环路的方法</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE">路由选择协议</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E5%B8%B8%E8%A7%81%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE">常见的路由选择协议</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#1-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1">1. 静态路由</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#2-%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE">2. 动态路由协议</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#21-%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF%E5%8D%8F%E8%AE%AE-rip">2.1 路由信息协议 (RIP)</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#22-%E5%BC%80%E6%94%BE%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E4%BC%98%E5%85%88-ospf">2.2 开放最短路径优先 (OSPF)</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#23-%E5%A2%9E%E5%BC%BA%E5%9E%8B%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE-eigrp">2.3 增强型内部网关路由协议 (EIGRP)</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#3-%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE-bgp">3. 边界网关协议 (BGP)</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#4-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE%E7%9A%84%E6%AF%94%E8%BE%83">4. 路由选择协议的比较</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84">路由器的基本结构</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#ipv4%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F">IPv4数据报的首部格式</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#1-ipv4%E9%A6%96%E9%83%A8%E6%80%BB%E8%A7%88">1. IPv4首部总览</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#2-%E5%90%84%E5%AD%97%E6%AE%B5%E8%AF%A6%E7%BB%86%E8%AF%B4%E6%98%8E">2. 各字段详细说明</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E7%BD%91%E9%99%85%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AEicmp">网际控制报文协议ICMP</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#1-icmp%E7%9A%84%E7%9B%AE%E7%9A%84%E5%92%8C%E5%8A%9F%E8%83%BD">1. ICMP的目的和功能</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#2-icmp%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">2. ICMP的工作原理</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#3-icmp%E6%B6%88%E6%81%AF%E7%B1%BB%E5%9E%8B">3. ICMP消息类型</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#31-%E9%94%99%E8%AF%AF%E6%B6%88%E6%81%AF">3.1 错误消息</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#32-%E6%9F%A5%E8%AF%A2%E6%B6%88%E6%81%AF">3.2 查询消息</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#4-icmp%E7%9A%84%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F">4. ICMP的报文格式</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#5-icmp%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">5. ICMP的应用场景</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#6-icmp%E7%9A%84%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91">6. ICMP的安全考虑</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2nat">网络地址转换NAT</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#1-nat%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">1. NAT的工作原理</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#2-nat%E7%9A%84%E7%B1%BB%E5%9E%8B">2. NAT的类型</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#21-%E9%9D%99%E6%80%81nat">2.1 静态NAT</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#22-%E5%8A%A8%E6%80%81nat">2.2 动态NAT</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#23-pat%E7%AB%AF%E5%8F%A3%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2">2.3 PAT（端口地址转换）</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#3-nat%E7%9A%84%E4%BC%98%E5%8A%BF">3. NAT的优势</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#4-nat%E7%9A%84%E7%BC%BA%E7%82%B9">4. NAT的缺点</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#5-nat%E5%9C%A8%E7%BD%91%E7%BB%9C%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">5. NAT在网络中的应用场景</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91vpn">虚拟专用网VPN</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#1-vpn%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">1. VPN的工作原理</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#2-vpn%E7%9A%84%E7%B1%BB%E5%9E%8B">2. VPN的类型</a>
<ul>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#21-%E6%8C%89%E7%85%A7%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F%E5%88%86%E7%B1%BB">2.1 按照部署方式分类</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#22-%E6%8C%89%E7%85%A7%E8%BF%9E%E6%8E%A5%E6%96%B9%E5%BC%8F%E5%88%86%E7%B1%BB">2.2 按照连接方式分类</a></li>
</ul>
</li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#3-%E5%B8%B8%E8%A7%81%E7%9A%84vpn%E5%8D%8F%E8%AE%AE">3. 常见的VPN协议</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#4-vpn%E7%9A%84%E4%BC%98%E5%8A%BF">4. VPN的优势</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#5-vpn%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF">5. VPN的使用场景</a></li>
<li><a href="%E7%BD%91%E7%BB%9C%E5%B1%82.html#6-%E5%AE%89%E5%85%A8%E8%80%83%E8%99%91%E5%8F%8A%E6%BD%9C%E5%9C%A8%E9%A3%8E%E9%99%A9">6. 安全考虑及潜在风险</a></li>
</ul>
</li>
</ul>
<h2 id="概述-1"><a class="header" href="#概述-1">概述</a></h2>
<p>网络层是计算机网络的第三层，位于传输层之下和数据链路层之上。它的主要功能是负责数据包的传输、路由选择和数据流的控制，确保数据能够从源主机传输到目标主机。网络层的主要任务是确定如何在不同的网络之间传输数据，并管理分组的流动。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131211724.png" alt="" /></p>
<p>网络层在计算机网络中起着至关重要的作用，确保数据在不同网络之间的有效传输。通过逻辑地址、路由选择、数据包转发和拥塞控制等机制，网络层实现数据的高效、安全传输。</p>
<h3 id="网络层的主要功能"><a class="header" href="#网络层的主要功能">网络层的主要功能</a></h3>
<ol>
<li><strong>路由选择</strong></li>
<li><strong>逻辑地址</strong></li>
<li><strong>分段与重组</strong></li>
<li><strong>拥塞控制</strong></li>
<li><strong>数据包转发</strong></li>
</ol>
<h4 id="1-路由选择"><a class="header" href="#1-路由选择">1. 路由选择</a></h4>
<ul>
<li><strong>定义</strong>：路由选择是指在网络中选择数据包从源头到目的地的最佳路径的过程。</li>
<li><strong>内容</strong>：网络层根据网络拓扑、开销、链路的状态等信息，通过路由算法确定数据的转发路径。</li>
<li><strong>协议</strong>：常见的路由协议包括 RIP（路由信息协议）、OSPF（开放最短路径优先）和 BGP（边界网关协议）。</li>
</ul>
<h4 id="2-逻辑地址"><a class="header" href="#2-逻辑地址">2. 逻辑地址</a></h4>
<ul>
<li><strong>定义</strong>：网络层使用逻辑地址（如 IP 地址）来标识网络中的主机。</li>
<li><strong>结构</strong>：逻辑地址通常分为网络部分和主机部分，以支持地址的层次结构。</li>
<li><strong>类型</strong>：IPv4 和 IPv6 是最常见的网络层协议。IPv4 地址由32位二进制数构成，而IPv6则使用128位地址，以支持更多的地址。</li>
</ul>
<h4 id="3-分段与重组"><a class="header" href="#3-分段与重组">3. 分段与重组</a></h4>
<ul>
<li><strong>定义</strong>：网络层将数据传输的上层协议（如TCP）产生的数据流分割成适合的大小，以便在不同的网络上进行有效传输。</li>
<li><strong>过程</strong>：
<ul>
<li>分段：将较大的数据报文分割为多个小的数据包，每个包都有网络层头部附加的逻辑地址和序列信息。</li>
<li>重组：在目的主机，网络层负责将这些数据包重新组合成完整的数据流，以传递到上层协议。</li>
</ul>
</li>
</ul>
<h4 id="4-拥塞控制"><a class="header" href="#4-拥塞控制">4. 拥塞控制</a></h4>
<ul>
<li><strong>定义</strong>：拥塞控制是网络层管理网络流量，避免网络过载和性能下降的过程。</li>
<li><strong>手段</strong>：通常使用流量监测、缓冲管理和动态调整路由策略等技术来控制数据流量。</li>
<li><strong>目标</strong>：确保网络在高流量情况下的稳定运行，最大限度地减少数据丢失和传输延迟。</li>
</ul>
<h4 id="5-数据包转发"><a class="header" href="#5-数据包转发">5. 数据包转发</a></h4>
<ul>
<li><strong>定义</strong>：数据包转发是指根据网络层的路由表，将数据包从输入端口转发到合适的输出端口的过程。</li>
<li><strong>过程</strong>：
<ul>
<li>查找：网络层根据数据包的目的地址查找路由表，确定传输路径。</li>
<li>转发：一旦确定路径，网络层将数据包向下传递到数据链路层以继续传输。</li>
</ul>
</li>
</ul>
<h3 id="网络层的协议"><a class="header" href="#网络层的协议">网络层的协议</a></h3>
<ul>
<li><strong>IPv4（互联网协议版本4）</strong>：最广泛使用的网络层协议，提供基本的寻址和分组转发功能。</li>
<li><strong>IPv6（互联网协议版本6）</strong>：为了解决 IPv4 地址枯竭问题而设计，提供更大的地址空间和改进的安全性。</li>
<li><strong>ICMP（互联网控制消息协议）</strong>：用于发送错误消息和网络操作信息，例如 ping 命令的实现。</li>
</ul>
<h3 id="网络层与其他层的关系"><a class="header" href="#网络层与其他层的关系">网络层与其他层的关系</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131211749.png" alt="" /></p>
<ul>
<li><strong>与数据链路层</strong>：网络层依赖数据链路层提供的服务（如物理网络的封装与传输），数据链路层负责在两个直接相连的设备之间传输数据包。</li>
<li><strong>与传输层</strong>：网络层为传输层提供服务，封装来自传输层的数据段（如 TCP 段），并将其传送到目标主机。</li>
</ul>
<h2 id="网络层提供的两种服务"><a class="header" href="#网络层提供的两种服务">网络层提供的两种服务</a></h2>
<p>在网络层，有两种主要的数据传输服务方式：<strong>虚电路服务</strong>和<strong>数据包服务</strong>。这两种服务在网络层提供不同的传输机制。它们在实现方式、可靠性、资源分配等方面有显著的区别。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131212017.png" alt="" /></p>
<p>虚电路服务和数据包服务各有其优势和劣势，适用于不同的应用场景。虚电路服务提供更高的可靠性和顺序性，适用于需要确保数据顺序和可靠性的重要应用。而数据包服务提供灵活性和简单性，适合需要快速传输大量数据的场合，如互联网数据传输。对于网络设计者和应用开发者而言，根据具体需求选择合适的服务类型至关重要。</p>
<h3 id="虚电路服务"><a class="header" href="#虚电路服务">虚电路服务</a></h3>
<p>虚电路服务是一种在网络层提供的连接导向服务。在这种服务中，数据包在发送之前，首先通过网络建立一条虚拟连接（或虚电路）。这种连接在数据传输期间保持不变，数据通过该连接进行传送。</p>
<h4 id="特征"><a class="header" href="#特征">特征</a></h4>
<ol>
<li><strong>连接导向</strong>：在发送数据之前，必须先建立虚电路。这个过程类似于电话拨号，事先建立一条路径。</li>
<li><strong>资源保留</strong>：在虚电路的整个生命周期内，为该连接保留一定的网络资源（例如带宽和缓冲）。</li>
<li><strong>顺序传输</strong>：通过虚电路发送的数据包按照建立时的顺序到达接收方，确保数据的顺序性。</li>
<li><strong>状态信息</strong>：网络中的每个路由器在虚电路建立期间维护状态信息，以跟踪连接的各个参数。</li>
</ol>
<h4 id="使用示例"><a class="header" href="#使用示例">使用示例</a></h4>
<ul>
<li><strong>X.25</strong> 和 <strong>Frame Relay</strong> 是虚电路服务的经典实现，它们常用于公共数据网络中，提供可靠的数据传输。</li>
</ul>
<h3 id="数据包服务"><a class="header" href="#数据包服务">数据包服务</a></h3>
<p>数据包服务是一种无连接的服务方式，数据可以独立地在网络中传输。每个数据包都包含完整的目标地址信息，无需事先建立连接。</p>
<h4 id="特征-1"><a class="header" href="#特征-1">特征</a></h4>
<ol>
<li><strong>无连接</strong>：没有建立虚电路的过程，数据包可以随时发送。</li>
<li><strong>资源不保留</strong>：每个数据包在网络中独立处理，不为特定传输保留资源。</li>
<li><strong>顺序不保证</strong>：数据包的到达顺序可能与发送顺序不同，因为每个包可以通过不同的路径独立发送。</li>
<li><strong>灵活性</strong>：网络的任意部分可以选择不同的路径进行数据传输，适应网络的动态变化。</li>
</ol>
<h4 id="使用示例-1"><a class="header" href="#使用示例-1">使用示例</a></h4>
<ul>
<li>**IP（互联网协议）**是最常见的数据包服务的实现，每个IP数据包都独立发送，而不依赖于连接状态。</li>
</ul>
<h3 id="虚电路服务与数据包服务的比较"><a class="header" href="#虚电路服务与数据包服务的比较">虚电路服务与数据包服务的比较</a></h3>
<div class="table-wrapper"><table><thead><tr><th>特性</th><th>虚电路服务</th><th>数据包服务</th></tr></thead><tbody>
<tr><td><strong>连接类型</strong></td><td>连接导向</td><td>无连接</td></tr>
<tr><td><strong>资源分配</strong></td><td>为连接保留资源</td><td>不为数据传输保留资源</td></tr>
<tr><td><strong>顺序传输</strong></td><td>保证数据包按顺序到达</td><td>不保证数据包顺序</td></tr>
<tr><td><strong>建立过程</strong></td><td>先建立虚电路</td><td>不需要建立过程</td></tr>
<tr><td><strong>灵活性</strong></td><td>一旦建立，路径固定</td><td>每个数据包可以选择不同路径</td></tr>
<tr><td><strong>状态信息</strong></td><td>路由器维护连接状态信息</td><td>路由器不维护状态信息</td></tr>
<tr><td><strong>复杂度</strong></td><td>协议实现和网络管理较复杂</td><td>协议实现和网络管理较简单</td></tr>
<tr><td><strong>适用场景</strong></td><td>适合需要高可靠性和实时性的大型数据传输</td><td>适合信息传递要求，带宽利用率为重点</td></tr>
</tbody></table>
</div>
<h2 id="ipv4地址及其应用"><a class="header" href="#ipv4地址及其应用">IPv4地址及其应用</a></h2>
<p>IPv4（互联网协议版本4）是用于网络中主机识别和数据路由的重要协议。IPv4地址是唯一标识网络中每一个主机的数字标签，能够支持最多约43亿个主机地址。尽管IPv4地址在互联网中广泛使用，但由于人数的迅速增长和设备的普及，IPv4地址逐渐达到了其分配的上限。因此，理解IPv4地址的结构及其应用显得尤为重要。</p>
<p>IPv4地址是互联网中至关重要的组成部分，了解其类型、特点及规划方案是网络管理和设计的基本要求。有鉴于IPv4地址即将耗尽，网络工程师还需考虑到如何平滑过渡到IPv6等更先进的协议。</p>
<h3 id="ipv4地址概述"><a class="header" href="#ipv4地址概述">IPv4地址概述</a></h3>
<p>IPv4地址是一个32位的二进制数，通常用四组十进制数表示，如192.168.1.1，每组数的范围是0到255。这种表示方式被称为“点分十进制表示法”。IPv4地址分为网络部分和主机部分，网络部分用于标识所连接网络，主机部分用于识别同一网络中的各个设备。IPv4地址的总数为2^32，大约为42.95亿个地址。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131212620.png" alt="" /></p>
<h4 id="特点"><a class="header" href="#特点">特点</a></h4>
<ul>
<li><strong>地址长度</strong>：32位。</li>
<li><strong>表示方式</strong>：点分十进制格式。</li>
<li><strong>目的</strong>：唯一标识网络中的每个主机。</li>
</ul>
<h3 id="分类编址的ipv4地址"><a class="header" href="#分类编址的ipv4地址">分类编址的IPv4地址</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131212646.png" alt="" /></p>
<p>IPv4地址根据其网络特性被划分成五类：A类、B类、C类、D类和E类。</p>
<ol>
<li>
<p><strong>A类地址</strong>：</p>
<ul>
<li><strong>范围</strong>：1.0.0.0 到 126.255.255.255</li>
<li><strong>网络部分位数</strong>：8位</li>
<li><strong>主机部分位数</strong>：24位</li>
<li><strong>用途</strong>：适合大型网络，通常由大型组织和互联网服务提供商使用。</li>
</ul>
</li>
<li>
<p><strong>B类地址</strong>：</p>
<ul>
<li><strong>范围</strong>：128.0.0.0 到 191.255.255.255</li>
<li><strong>网络部分位数</strong>：16位</li>
<li><strong>主机部分位数</strong>：16位</li>
<li><strong>用途</strong>：适合中型网络，如大学和大型企业。</li>
</ul>
</li>
<li>
<p><strong>C类地址</strong>：</p>
<ul>
<li><strong>范围</strong>：192.0.0.0 到 223.255.255.255</li>
<li><strong>网络部分位数</strong>：24位</li>
<li><strong>主机部分位数</strong>：8位</li>
<li><strong>用途</strong>：适合小型网络，如小型企业。</li>
</ul>
</li>
<li>
<p><strong>D类地址</strong>：</p>
<ul>
<li><strong>范围</strong>：224.0.0.0 到 239.255.255.255</li>
<li><strong>用途</strong>：用于多播组，不用于常规主机。</li>
</ul>
</li>
<li>
<p><strong>E类地址</strong>：</p>
<ul>
<li><strong>范围</strong>：240.0.0.0 到 255.255.255.255</li>
<li><strong>用途</strong>：保留地址，通常用于实验目的。</li>
</ul>
</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106124228.png" alt="" /></p>
<p>每一类地址都由两个固定长度的字段组成，其中一个字段是<strong>网络号 net-id</strong>，它标志主机（或路由器）所连接到的网络，而另一个字段则是<strong>主机号 host-id</strong>，它标志该主机（或路由器）。</p>
<p>主机号在它前面的网络号所指明的网络范围内必须是唯一的。</p>
<p>由此可见，<strong>一个 IP 地址在整个互联网范围内是唯一的</strong>。</p>
<p><strong>A类地址</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106124420.png" alt="" /></p>
<p><strong>B类地址</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106124456.png" alt="" /></p>
<p><strong>C类地址</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106124521.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106124802.png" alt="" /></p>
<p>总结</p>
<p><strong>IP 地址的指派范围</strong></p>
<p><strong>一般不使用的特殊的 IP 地址</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106124723.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106125030.png" alt="" /></p>
<p><strong>IP 地址的一些重要特点</strong></p>
<p>(1) <strong>IP 地址是一种分等级的地址结构</strong>。分等级有两个好处：</p>
<ul>
<li><strong>第一</strong>，IP 地址管理机构在分配 IP 地址时只分配网络号，而剩下的主机号则由得到该网络号的单位自行分配。这样就方便了 IP 地址的管理。</li>
<li><strong>第二</strong>，路由器仅根据目的主机所连接的网络号来转发分组（而不考虑目的主机号），这样就可以使路由表中的项目数大幅度减少，从而减小了路由表所占的存储空间。</li>
</ul>
<p>(2) <strong>实际上 IP 地址是标志一个主机（或路由器）和一条链路的接口</strong>。</p>
<ul>
<li>当一个主机同时连接到两个网络上时，该主机就必须同时具有两个相应的 IP 地址，其网络号 net-id 必须是不同的。这种主机称为<strong>多归属主机</strong> (multihomed host)。</li>
<li>由于一个路由器至少应当连接到两个网络（这样它才能将 IP 数据报从一个网络转发到另一个网络），因此<strong>一个路由器至少应当有两个不同的 IP 地址</strong>。</li>
</ul>
<p>(3) <strong>用转发器或网桥连接起来的若干个局域网仍为一个网络</strong>，因此这些局域网都具有同样的网络号 net-id。</p>
<p>(4) <strong>所有分配到网络号 net-id 的网络，无论是范围很小的局域网，还是可能覆盖很大地理范围的广域网，都是平等的。</strong></p>
<h3 id="划分子网的ipv4地址"><a class="header" href="#划分子网的ipv4地址">划分子网的IPv4地址</a></h3>
<p>子网划分是一种将大型网络划分为更小网络（子网）的技术，目的是提高网络的组织性和管理效率。子网划分通过使用子网掩码来确定哪些位代表网络部分，哪些位代表主机部分。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131212742.png" alt="" /></p>
<p>为什么要划分子网？</p>
<p>在 ARPANET 的早期，IP 地址的设计确实不够合理：</p>
<ul>
<li>IP 地址空间的利用率有时很低。</li>
<li>给每一个物理网络分配一个网络号会使路由表变得太大因而使网络性能变坏。</li>
<li>两级的 IP 地址不够灵活。</li>
</ul>
<p>如果想要将原来的网络划分成三个独立的网路，是否可以从主机号部分借用一部分作为子网号呢？</p>
<p>但是如果未在图中标记子网号部分，那么我们和计算机又如何知道分类地址中主机号有多少比特被用作子网号了呢？</p>
<p>所以就有了划分子网的工具：<strong>子网掩码</strong></p>
<ul>
<li>从 1985 年起在 IP 地址中又增加了一个“<strong>子网号字段</strong>”，使两级的 IP 地址变成为<strong>三级的 IP 地址</strong>。</li>
<li>这种做法叫做<strong>划分子网</strong> (subnetting) 。</li>
<li>划分子网已成为互联网的正式标准协议。</li>
</ul>
<p>如何划分子网？</p>
<p>基本思路</p>
<ul>
<li>划分子网纯属一个<strong>单位内部的事情</strong>。单位对外仍然表现为没有划分子网的网络。</li>
<li>从主机号<strong>借用</strong>若干个位作为<strong>子网号</strong> subnet-id，而主机号 host-id 也就相应减少了若干个位。</li>
<li>凡是从其他网络发送给本单位某个主机的 IP 数据报，仍然是根据 IP 数据报的<strong>目的网络号</strong> net-id，先找到连接在本单位网络上的路由器。</li>
<li>然后<strong>此路由器</strong>在收到 IP 数据报后，再按<strong>目的网络号</strong> net-id 和<strong>子网号</strong> subnet-id 找到目的子网。</li>
<li>最后就将 IP 数据报直接交付目的主机。</li>
</ul>
<p>划分为三个子网后对外仍是一个网络。</p>
<p><strong>优点</strong></p>
<ol>
<li>减少了 IP 地址的浪费</li>
<li>使网络的组织更加灵活</li>
<li>更便于维护和管理</li>
</ol>
<p><strong>划分子网纯属一个单位内部的事情，对外部网络透明</strong>，对外仍然表现为没有划分子网的一个网络。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106125749.png" alt="" /></p>
<p>(IP 地址) AND (子网掩码) = 网络地址</p>
<p>总结</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106130051.png" alt="" /></p>
<ul>
<li>子网掩码是一个网络或一个子网的重要属性。</li>
<li>路由器在和相邻路由器交换路由信息时，必须把自己所在网络（或子网）的子网掩码告诉相邻路由器。</li>
<li>路由器的路由表中的每一个项目，除了要给出目的网络地址外，还必须同时给出该网络的子网掩码。</li>
<li>若一个路由器连接在两个子网上，就拥有两个网络地址和两个子网掩码。</li>
</ul>
<h4 id="子网掩码"><a class="header" href="#子网掩码">子网掩码</a></h4>
<ul>
<li><strong>定义</strong>：子网掩码是一个32位的二进制数，用于指示IP地址中哪些位用于网络标识，哪些位用于主机标识。例如，255.255.255.0是一个常用的子网掩码，表示前24位为网络部分，后8位为主机部分。</li>
<li><strong>好处</strong>：
<ul>
<li>减少广播域。</li>
<li>提高网络安全性和性能。</li>
<li>更有效地利用可用的IPv4地址。</li>
</ul>
</li>
</ul>
<h3 id="无分类编址的ipv4地址"><a class="header" href="#无分类编址的ipv4地址">无分类编址的IPv4地址</a></h3>
<p>无分类编址（CIDR，Classless Inter-Domain Routing）是一种改进的地址分配方式，打破了传统的A、B、C类地址限制，以提高地址空间的利用率。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131212815.png" alt="" /></p>
<h4 id="cidr特性"><a class="header" href="#cidr特性">CIDR特性</a></h4>
<ul>
<li><strong>地址格式</strong>：CIDR使用“IP地址/前缀长度”的格式，例如192.168.1.0/24。</li>
<li><strong>可变长度子网掩码（VLSM）</strong>：支持不同大小的子网，允许更灵活的IP地址分配。</li>
<li><strong>路由聚合</strong>：多个IP地址块可以被聚合成一个路由条目，从而减少路由表的大小，提高路由器性能。</li>
</ul>
<p>为什么使用无分类编址？</p>
<p><strong>无分类域间路由选择 CIDR</strong> (Classless Inter-Domain Routing)。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106130514.png" alt="" /></p>
<p><strong>CIDR 最主要的特点</strong></p>
<ul>
<li>CIDR使用各种长度的“<strong>网络前缀</strong>”(network-prefix)来代替分类地址中的网络号和子网号。</li>
<li><strong>IP 地址从三级编址（使用子网掩码）又回到了两级编址</strong>。</li>
</ul>
<p>如何使用无分类编址？</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106130625.png" alt="" /></p>
<p>举例</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106130652.png" alt="" /></p>
<p>路由聚合（构造超网）</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106130733.png" alt="" /></p>
<p>总结</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106130814.png" alt="" /></p>
<h3 id="ipv4地址的应用规划"><a class="header" href="#ipv4地址的应用规划">IPv4地址的应用规划</a></h3>
<p>IPv4地址的合理规划对于确保网络的高效性和可扩展性极为重要。有效的IPv4地址规划需要考虑以下几个方面：</p>
<ol>
<li>
<p><strong>地址分配策略</strong>：</p>
<ul>
<li>采用CIDR划分网络，灵活划分子网以满足不同网络规模的需求。</li>
<li>优先使用私有地址（如192.168.x.x）来减少对公共IPv4地址的需求。</li>
</ul>
</li>
<li>
<p><strong>地址使用记录</strong>：</p>
<ul>
<li>记录每个子网的地址使用情况，确保不会发生冲突或地址浪费。</li>
<li>在网络中实施动态主机配置协议（DHCP）以有效管理临时地址分配。</li>
</ul>
</li>
<li>
<p><strong>安全性和可扩展性</strong>：</p>
<ul>
<li>向内部分配地址时考虑安全策略，如通过网络隔离和使用适当的防火墙规则。</li>
<li>设计时预留足够的地址空间，以支持未来的扩展需求。</li>
</ul>
</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131212933.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106131046.png" alt="" /></p>
<p>给定一个IPv4地址快，如何将其划分成几个更小的地址块，并将这些地址块分配给互联网中不同网络，进而可以给各网络中的主机和路由器接口分配IPv4地址</p>
<p>定长的子网掩码FLSM（Fixed Length Subnet Mask）</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106131238.png" alt="" /></p>
<p><strong>划分子网的IPv4就是定长的子网掩码</strong></p>
<p>举例</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106131330.png" alt="" /></p>
<p>通过上面步骤分析，就可以从子网1~8中任选5个分配给左图中的N1~N5</p>
<p><strong>采用定长的子网掩码划分，只能划分出2^n个子网，其中n是从主机号部分借用的用来作为子网号的比特数量，每个子网所分配的IP地址数量相同</strong></p>
<p><strong>但是也因为每个子网所分配的IP地址数量相同，不够灵活，容易造成IP地址的浪费</strong></p>
<p>在现实中，如果将一个A类网络分配给一个组织使用，但是这个组织内部的计算机又没有16777214台，这就会造成大量的IP地址闲置与浪费。因此，需要有一种更加灵活的方式根据网络规模的大小来划分网络。思路就是将一个网络再划分为更小的多个子网供不同组织使用。这种划分网络的方式使用的技术就是可变长度子网掩码（VLSM）。可变长度子网掩码在公网与企业内部中都可以使用。</p>
<p>采用可变长度子网掩码，网络的类别已不重要了，网络中主机的数量也不是固定的而是依据实际需要定。为了实现灵活的网络大小规划，在网络号与主机号中间增加了一个概念——子网。子网概念的增加并没有改变IP v4中IP地址的实际长度，而是采用：从表示主机的二进制位位数中借用一定的位数来表示子网的方法实现（网络中主机数会减少）。同时，子网掩码也不再是8位、16、24位这些8的倍数了，它会根据实际需要使用不同的位数来表示网络号。</p>
<p>变长的子网掩码VLSM（Variable Length Subnet Mask）</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106131402.png" alt="" /></p>
<p><strong>无分类编址的IPv4就是变长的子网掩码</strong></p>
<p>举例</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241106131440.png" alt="" /></p>
<h2 id="ip数据报的发送和转发过程"><a class="header" href="#ip数据报的发送和转发过程">IP数据报的发送和转发过程</a></h2>
<p>IP数据报是互联网协议（IP）在网络层所传输的基本数据单位。它包含了源地址和目标地址，负责在不同的网络之间传输数据。IP数据报的发送和转发过程涉及多个步骤，从数据的生成到最终的传递，每个环节都有其关键角色。下面详细介绍IP数据报的发送和转发过程。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131213148.png" alt="" /></p>
<p>IP数据报的发送和转发过程涉及多个层次和环节，从数据的生成、发送到路由转发，直至最终到达目标主机。每一个环节都在保证数据可可靠传输的基础上，采用灵活的路由机制进行高效的网络通信。这一过程是互联网通信的基础，也是理解网络架构和协议的关键。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131213225.png" alt="" /></p>
<h3 id="1-数据报的生成"><a class="header" href="#1-数据报的生成">1. 数据报的生成</a></h3>
<ol>
<li>
<p><strong>数据封装</strong>：在应用层，生成的数据（如HTTP请求）被逐层封装。首先被传输层协议（如TCP或UDP）封装，建立传输层报文。</p>
</li>
<li>
<p><strong>添加IP头部</strong>：传输层报文进一步封装为IP数据报。IP层添加包含源IP地址、目标IP地址、协议类型及其他信息的IP头部。</p>
</li>
</ol>
<h3 id="2-发起发送请求"><a class="header" href="#2-发起发送请求">2. 发起发送请求</a></h3>
<ol>
<li>
<p><strong>本地IP堆栈</strong>：数据报由操作系统的网络堆栈处理。应用程序请求网络发送数据时，操作系统会生成和排队IP数据报。</p>
</li>
<li>
<p><strong>选择路由和接口</strong>：发送方的网络接口卡（NIC）会根据目标IP地址查找路由表，决定将数据发送到何处。路由表中的条目根据目标地址的前缀进行匹配。</p>
</li>
</ol>
<h3 id="3-发送ip数据报"><a class="header" href="#3-发送ip数据报">3. 发送IP数据报</a></h3>
<ol>
<li>
<p><strong>数据链路层封装</strong>：IP数据报被传递到数据链路层。数据链路层负责将IP数据报封装成帧。其中添加了MAC地址、帧头和帧尾。</p>
</li>
<li>
<p><strong>通过物理层发送</strong>：数据链路层将帧发送到物理媒介（如以太网、电缆或无线信号），通过电信号或光信号等形式进行数据传输。</p>
</li>
</ol>
<h3 id="4-数据报的转发过程"><a class="header" href="#4-数据报的转发过程">4. 数据报的转发过程</a></h3>
<ol>
<li>
<p><strong>接收IP数据报</strong>：目标主机的网络接口卡接收到数据帧，并将其传递到数据链路层，接收并剥离帧头，将IP数据报送到网络层。</p>
</li>
<li>
<p><strong>检查IP数据报有效性</strong>：</p>
<ul>
<li>网络层检查IP数据报的头部，包括校验和和目标IP地址是否有效。</li>
<li>如果数据报无效，主机将发送ICMP错误消息，并丢弃数据报。</li>
</ul>
</li>
<li>
<p><strong>根据目标IP地址转发数据报</strong>：</p>
<ul>
<li><strong>路由查找</strong>：网络层根据数据报的目标IP地址查找路由表，找出最佳路径。</li>
<li><strong>下一跳选择</strong>：路由器根据路由表信息选择下一跳，并决定如何转发数据。</li>
</ul>
</li>
<li>
<p><strong>转发到下一跳</strong>：路由器将数据报重新封装到数据链路层组织，以适合下一跳的物理媒介。</p>
<ul>
<li><strong>重新封装</strong>：每一个路由器负责将数据报装入适合其接口的数据链路帧中。</li>
<li><strong>发送</strong>：通过物理层，将封装后的帧再次发送到下一个路由器或目标主机。</li>
</ul>
</li>
</ol>
<h3 id="5-到达目标主机"><a class="header" href="#5-到达目标主机">5. 到达目标主机</a></h3>
<ol>
<li>
<p><strong>重复转发过程</strong>：IP数据报在网络中的每个路由器上重复上述转发过程，经过多个跳点，直到最终的目标主机。</p>
</li>
<li>
<p><strong>到达目标主机</strong>：</p>
<ul>
<li>最后一个路由器将数据帧发送到目标主机的网络接口。</li>
<li>目标主机接收数据帧，移除帧头并将IP数据报传送到网络层。</li>
</ul>
</li>
<li>
<p><strong>数据处理</strong>：</p>
<ul>
<li>网络层检测目的IP地址是否与本机匹配。</li>
<li>如果匹配，目标主机会解析IP数据报，剥离IP头，将上层协议（如TCP或UDP）的数据提取出来，送交相应的应用层处理。</li>
<li>如果不匹配，则丢弃数据报。</li>
</ul>
</li>
</ol>
<h2 id="静态路由配置及其可能产生的路由环路问题"><a class="header" href="#静态路由配置及其可能产生的路由环路问题">静态路由配置及其可能产生的路由环路问题</a></h2>
<p>静态路由配置是一种简单而有效的网络管理方案，适合于小型和相对稳定的网络环境。然而，不当的配置可能导致路由环路的产生，造成网络资源的浪费和性能下降。采取审查、测试和更新等措施可以有效地减少路由环路的风险。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131213416.png" alt="" /></p>
<p>静态路由是网络工程中一种简单而有效的路由选择方法，用于手动配置路由表，以确定数据包如何在网络中传输。尽管静态路由具有一定的优势，如控制性和安全性，但在使用不当时，也可能出现路由环路问题。以下将详细介绍静态路由配置的过程及其相关的路由环路问题。</p>
<h3 id="1-静态路由的概述"><a class="header" href="#1-静态路由的概述">1. 静态路由的概述</a></h3>
<p>静态路由是一种手动配置的路由方法，通过在路由器上显式设置路由条目，让路由器知道如何到达特定的网络或主机。与动态路由协议（如RIP、OSPF、EIGRP）不同，静态路由不依赖于协议学习网络路径，而是依赖管理员的配置。</p>
<h4 id="特点-1"><a class="header" href="#特点-1">特点</a></h4>
<ul>
<li><strong>简单性</strong>：配置过程相对简单，适合小型和稳定的网络环境。</li>
<li><strong>控制性</strong>：管理员直接控制路由表，防止无意间引入不必要的更改。</li>
<li><strong>安全性</strong>：降低网络受到动态路由协议攻击的风险。</li>
</ul>
<h3 id="2-静态路由配置"><a class="header" href="#2-静态路由配置">2. 静态路由配置</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131213554.png" alt="" /></p>
<p>静态路由的配置通常涉及以下步骤：</p>
<h4 id="21-确定网络拓扑"><a class="header" href="#21-确定网络拓扑">2.1 确定网络拓扑</a></h4>
<p>在配置静态路由之前，首先需了解网络拓扑结构，包括各个网络之间的连接关系和地址信息。</p>
<h4 id="22-选择路由器"><a class="header" href="#22-选择路由器">2.2 选择路由器</a></h4>
<p>选择需要配置静态路由的路由器，通常涉及到核心路由器或边缘路由器。</p>
<h4 id="23-访问路由器命令行界面"><a class="header" href="#23-访问路由器命令行界面">2.3 访问路由器命令行界面</a></h4>
<p>通过SSH、telnet或控制台直接访问路由器的命令行界面。</p>
<h4 id="24-输入静态路由命令"><a class="header" href="#24-输入静态路由命令">2.4 输入静态路由命令</a></h4>
<p>在路由器的命令行中使用特定的命令添加路由条目，命令格式如下（以Cisco路由器为例）：</p>
<pre><code>ip route [目标网络] [子网掩码] [下一跳地址] [行政距离]
</code></pre>
<ul>
<li><strong>目标网络</strong>：即目标网络的IP地址。</li>
<li><strong>子网掩码</strong>：用于定义目标网络的范围。</li>
<li><strong>下一跳地址</strong>：到达目标网络所需的下一跳路由器的IP地址。</li>
<li><strong>行政距离</strong>（Optional）：控制选择路由的优先级，缺省值为1。</li>
</ul>
<p><strong>示例</strong>：</p>
<pre><code>ip route 10.1.0.0 255.255.0.0 192.168.1.1
</code></pre>
<p>该命令配置静态路由，指向目标网络10.1.0.0/16，通过下一跳地址192.168.1.1到达。</p>
<h4 id="25-确认和保存配置"><a class="header" href="#25-确认和保存配置">2.5 确认和保存配置</a></h4>
<p>配置完成后，通过命令<code>show ip route</code>确认路由表中的条目是否正确，然后使用命令<code>write memory</code>（或<code>copy running-config startup-config</code>）保存配置。</p>
<h3 id="3-路由环路的问题"><a class="header" href="#3-路由环路的问题">3. 路由环路的问题</a></h3>
<h4 id="31-路由环路的定义"><a class="header" href="#31-路由环路的定义">3.1 路由环路的定义</a></h4>
<p>路由环路是指数据包在网络中循环传输，永远无法到达目标的情况。这种现象通常是由错误的静态路由配置或网络拓扑变化引起的。</p>
<h4 id="32-路由环路的产生原因"><a class="header" href="#32-路由环路的产生原因">3.2 路由环路的产生原因</a></h4>
<ul>
<li>
<p><strong>错误的静态路由配置</strong>：如果一个路由器指向自身或指向其他已死链接的下一跳，就会导致环路。例如，如果路由器A将路由指向路由器B，路由器B又将路由指向路由器A，这样的数据连接会导致持续的循环。</p>
</li>
<li>
<p><strong>网络拓扑变化</strong>：在网络结构发生变化（如链路断开或硬件故障）后，如果静态路由没有及时更新，依然保留指向无效路由的条目，将导致数据包不断尝试通过无效路径传输。</p>
</li>
</ul>
<h4 id="33-路由环路的影响"><a class="header" href="#33-路由环路的影响">3.3 路由环路的影响</a></h4>
<ul>
<li>
<p><strong>资源消耗</strong>：数据包在环路中不断传输，导致网络带宽和路由器资源的消耗，最终可能使网络瘫痪。</p>
</li>
<li>
<p><strong>延迟和丢包</strong>：由于数据包无法及时到达目标，导致延迟增加，并可能发生丢包，影响应用程序的性能和用户体验。</p>
</li>
<li>
<p><strong>路由表过载</strong>：长时间的环路传输会使路由表出现大量不必要的路由记录，增加路由器的工作负担。</p>
</li>
</ul>
<h3 id="4-避免路由环路的方法"><a class="header" href="#4-避免路由环路的方法">4. 避免路由环路的方法</a></h3>
<p>为了避免静态路由配置中的环路问题，可以采取以下措施：</p>
<ul>
<li>
<p><strong>审查和测试配置</strong>：在实施静态路由之前，充分审查路由表，确保不会出现相互指向的情况，并使用网络模拟软件进行测试。</p>
</li>
<li>
<p><strong>定期更新</strong>：及时对静态路由配置进行审查和更新，尤其是在网络拓扑发生改变时，确保所有路由条目仍然有效。</p>
</li>
<li>
<p><strong>启用路由环路保护机制</strong>：在适当情况下，采用动态路由协议自适应地识别和避免路由环路问题。</p>
</li>
</ul>
<h2 id="路由选择协议"><a class="header" href="#路由选择协议">路由选择协议</a></h2>
<p>路由选择协议是网络中用于决定数据包传输路径的重要组件。它们通过不同的算法和机制确定最佳转发路径，以确保数据可以高效且准确地从源设备到达目的设备。</p>
<p>掌握不同的路由选择协议是网络工程师的重要任务。通过合理选择适合的路由协议，可以优化网络性能，提升数据传输的效率和稳定性。静态路由适合小型和简单的网络环境，而动态路由协议则在大规模和动态变化的网络中发挥了不可或缺的作用。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131214443.png" alt="" /></p>
<div class="table-wrapper"><table><thead><tr><th>路由选择方式</th><th>定义</th><th>特点</th></tr></thead><tbody>
<tr><td>静态路由选择</td><td>由人工配置的网络路由、默认路由、特定主机路由、黑洞路由等都属于静态路由。</td><td>这种人工配置方式简单、开销小。但不能及时适应网络状态（流量、拓扑等）的变化。一般只在小规模网络中采用。</td></tr>
<tr><td>动态路由选择</td><td>路由器通过路由选择协议自动获取路由信息。</td><td>比较复杂、开销比较大。能较好地适应网络状态的变化适用于大规模网络</td></tr>
</tbody></table>
</div>
<p><strong>因特网所采用的路由选择协议的主要特点</strong></p>
<ul>
<li>自适应：动态路由选择，能较好地适应网络状态的变化</li>
<li>分布式：路由器之间交换路由信息</li>
<li>分层次：将整个因特网划分为许多较小的自治系统AS（Autonomous System）</li>
</ul>
<p><strong>因特网采用分层次的路由选择协议</strong></p>
<ul>
<li><strong>自治系统 AS</strong>：在单一的技术管理下的一组路由器，而这些路由器使用一种 AS 内部的路由选择协议和共同的度量以确定分组在该 AS 内的路由，同时还使用一种 AS 之间的路由选择协议用以确定分组在 AS之间的路由。</li>
</ul>
<p>自治系统之间的路由选择简称为域间路由选择，自治系统内部的路由选择简称为域内路由选择</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241112182307.png" alt="" /></p>
<p>域间路由选择使用外部网关协议EGP这个类别的路由选择协议</p>
<p>域内路由选择使用内部网关协议IGP这个类别的路由选择协议</p>
<p><strong>网关协议</strong>的名称可称为<strong>路由协议</strong></p>
<h2 id="常见的路由选择协议"><a class="header" href="#常见的路由选择协议">常见的路由选择协议</a></h2>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241112182505.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241112183114.png" alt="" /></p>
<p>以下是一些常见的路由选择协议，按类别分类进行详细介绍。</p>
<h3 id="1-静态路由"><a class="header" href="#1-静态路由">1. 静态路由</a></h3>
<p>静态路由是一种手动配置路由的方式，网络管理员直接在路由器上设置路由条目。虽然不依赖于自动化协议，但静态路由在某些固定和小型网络环境中非常有效。</p>
<p>特点：</p>
<ul>
<li><strong>简单性</strong>：配置简单，容易理解。</li>
<li><strong>控制性</strong>：网络管理员可以精确控制数据流向。</li>
<li><strong>资源消耗小</strong>：没有额外的路由更新开销。</li>
</ul>
<p>使用场景：</p>
<ul>
<li>小型网络或知名设备间的连接</li>
<li>需要高安全性且不允许动态变化的网络</li>
</ul>
<h3 id="2-动态路由协议"><a class="header" href="#2-动态路由协议">2. 动态路由协议</a></h3>
<p>动态路由协议允许路由器自动交换信息以更新其路由表。与静态路由相比，动态路由能够更好地适应网络的变化。以下是几种主要的动态路由协议：</p>
<h4 id="21-路由信息协议-rip"><a class="header" href="#21-路由信息协议-rip">2.1 路由信息协议 (RIP)</a></h4>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131214528.png" alt="" /></p>
<p>RIP是最早的动态路由协议之一，采用基于跳数的路由选择机制。</p>
<ul>
<li><strong>类型</strong>：距离矢量协议</li>
<li><strong>最大跳数限制</strong>：15跳，超过则不可达</li>
<li><strong>更新周期</strong>：每30秒广播整个路由表</li>
</ul>
<p>优点：</p>
<ul>
<li>简单，易于配置</li>
<li>适用于小型和中型网络</li>
</ul>
<p>缺点：</p>
<ul>
<li>受限于跳数限制，不能在大型网络中使用</li>
<li>收敛速度慢，容易产生路由环路</li>
</ul>
<h4 id="22-开放最短路径优先-ospf"><a class="header" href="#22-开放最短路径优先-ospf">2.2 开放最短路径优先 (OSPF)</a></h4>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131214600.png" alt="" /></p>
<p>OSPF是一个更复杂的链路状态路由协议，广泛应用于大型企业网络。</p>
<ul>
<li><strong>类型</strong>：链路状态协议</li>
<li><strong>收敛速度</strong>：比RIP快</li>
<li><strong>区域划分</strong>：支持区域的划分，便于组织和管理</li>
</ul>
<p>优点：</p>
<ul>
<li>可扩展性强，特别适用于大型网络</li>
<li>支持多路径路由和负载均衡</li>
</ul>
<p>缺点：</p>
<ul>
<li>配置复杂，学习成本较高</li>
</ul>
<h4 id="23-增强型内部网关路由协议-eigrp"><a class="header" href="#23-增强型内部网关路由协议-eigrp">2.3 增强型内部网关路由协议 (EIGRP)</a></h4>
<p>EIGRP是思科开发的一种混合型路由协议，结合了距离矢量和链路状态的特性。</p>
<ul>
<li><strong>类型</strong>：混合路由协议</li>
<li><strong>收敛速度</strong>：快速，使用Diffusing Update Algorithm (DUAL)</li>
<li><strong>支持多种协议</strong>：包括IP、IPX和AppleTalk</li>
</ul>
<p>优点：</p>
<ul>
<li>具备较快的收敛时间</li>
<li>能够进行负载均衡</li>
</ul>
<p>缺点：</p>
<ul>
<li>主要由思科设备支持，互操作性较差</li>
</ul>
<h3 id="3-边界网关协议-bgp"><a class="header" href="#3-边界网关协议-bgp">3. 边界网关协议 (BGP)</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131214629.png" alt="" /></p>
<p>BGP是用来在不同自主管理系统（AS）之间交换路由信息的协议，是互联网的核心路由协议。</p>
<ul>
<li><strong>类型</strong>：路径向量协议</li>
<li><strong>功能</strong>：处理跨域路由选择，决定最佳路由路径</li>
<li><strong>政策控制</strong>：支持通过网络政策和策略选择</li>
</ul>
<p>优点：</p>
<ul>
<li>可扩展性极强，能够处理非常大的路由表</li>
<li>具备复杂的路由决策能力，支持多种策略</li>
</ul>
<p>缺点：</p>
<ul>
<li>配置复杂，了解和管理需要较高的专业知识</li>
<li>收敛速度比OSPF和EIGRP慢</li>
</ul>
<h3 id="4-路由选择协议的比较"><a class="header" href="#4-路由选择协议的比较">4. 路由选择协议的比较</a></h3>
<div class="table-wrapper"><table><thead><tr><th>协议类型</th><th>协议名称</th><th>最大跳数</th><th>收敛速度</th><th>复杂性</th><th>适用场景</th></tr></thead><tbody>
<tr><td>距离矢量协议</td><td>RIP</td><td>15</td><td>慢</td><td>简单</td><td>小型和中型网络</td></tr>
<tr><td>链路状态协议</td><td>OSPF</td><td>不限</td><td>快</td><td>中等</td><td>大型企业网络</td></tr>
<tr><td>混合路由协议</td><td>EIGRP</td><td>不限</td><td>非常快</td><td>中等偏高</td><td>大型或复杂网络</td></tr>
<tr><td>路径向量协议</td><td>BGP</td><td>不限</td><td>慢</td><td>高</td><td>跨域互联网路由选择</td></tr>
</tbody></table>
</div>
<h3 id="路由器的基本结构"><a class="header" href="#路由器的基本结构"><strong>路由器的基本结构</strong></a></h3>
<p>路由器是一种具有多个输入端口和输出端口的专用计算机，其任务是转发分组。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img/20241112182700.png" alt="" /></p>
<p>路由器结构可划分为两大部分：</p>
<p>1、<strong>分组转发部分</strong></p>
<p>由三部分构成</p>
<ul>
<li>交换结构</li>
<li>一组输入端口</li>
<li>一组输出端口</li>
</ul>
<p>一组输入端口：</p>
<ol>
<li>信号从某个输入端口进入路由器</li>
<li>物理层将信号转换成比特流，送交数据链路层处理</li>
<li>数据链路层识别从比特流中识别出帧，去掉帧头和帧尾后，送交网络层处理</li>
<li>如果送交网络层的分组是普通待转发的数据分组则根据分组首部中的目的地址进行查表转发</li>
<li>若找不到匹配的转发条目，则丢弃该分组，否则，按照匹配条目中所指示的端口进行转发</li>
</ol>
<p>一组输出端口</p>
<ol>
<li>网络层更新数据分组首部中某些字段的值，例如将数据分组的生存时间减1，然后送交数据链路层进行封装</li>
<li>数据链路层将数据分组封装成帧，交给物理层处理</li>
<li>物理层将帧看成比特流将其变换成相应的电信号进行发送</li>
</ol>
<p>路由器的各端口还会有输入缓冲区和输出缓冲区</p>
<ul>
<li>输入缓冲区用来暂存新进入路由器但还来不及处理的分组</li>
<li>输出缓冲区用来暂存已经处理完毕但还来不及发送的分组</li>
</ul>
<p><strong>路由器的端口一般都具有输入和输出功能</strong>，这些实例分出了输入端口和输出端口是更好演示路由基本工作过程。</p>
<p>2、<strong>路由选择部分</strong></p>
<p>路由选择部分的核心构件是路由选择处理机，它的任务是根据所使用的路由选择协议。周期性地与其他路由器 进行路由信息的交互，来更新路由表。</p>
<p>如果送交给输入端口的网络层的分组是路由器之间交换路由信息的路由报文，则把这种分组送交给路由选择处理机。</p>
<p>路由选择处理机根据分组的内容来更新自己的<strong>路由表</strong>。</p>
<p>路由选择处理机还会周期性地给其他路由器发送自己所知道的路由信息。</p>
<h2 id="ipv4数据报的首部格式"><a class="header" href="#ipv4数据报的首部格式">IPv4数据报的首部格式</a></h2>
<p>IPv4数据报的首部包含控制数据和地址信息，指示数据包的传输方式，并提供必需的数据包处理信息。IPv4数据报的首部格式由多个字段组成，这些字段都具有特定的功能。</p>
<p>IPv4数据报的首部格式是了解数据包在网络中传输的基础。每个字段在数据报的传输、路由和处理方面均起着关键作用，确保数据能够有效、安全地送达目的地。掌握这些字段及其含义，有助于网络工程师调试和优化网络性能。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131214815.png" alt="" /></p>
<p>以下是IPv4数据报首部格式的详细说明。</p>
<h3 id="1-ipv4首部总览"><a class="header" href="#1-ipv4首部总览">1. IPv4首部总览</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131214952.png" alt="" /></p>
<p>IPv4首部的总长度为20字节（160位），但可以通过选项字段扩展到最大60字节（480位）。每个字段的功能和大小一般如下所述。</p>
<pre><code>0         4         8          12        16                 31
+--------+--------+---------+---------+---------------------+
| Version | IHL    | Type of Service  | Total Length        |
+--------+--------+---------+---------+---------------------+
| Identification | Flags | Fragment Offset  |
+-----------------+--------------------+---------------------+
| Time to Live    | Protocol | Header Checksum  |
+-----------------+--------------------+---------------------+
| Source Address   (32 bits)                              |
+--------------------------------------------------------+
| Destination Address (32 bits)                          |
+--------------------------------------------------------+
| Options (Variable Length)                               |
+--------------------------------------------------------+
| Data (Variable Length)                                  |
+--------------------------------------------------------+
</code></pre>
<h3 id="2-各字段详细说明"><a class="header" href="#2-各字段详细说明">2. 各字段详细说明</a></h3>
<ol>
<li>
<p><strong>Version（版本）</strong> (4位)</p>
<ul>
<li>指示IP协议的版本。IPv4的值为<code>4</code>，IPv6的值为<code>6</code>。</li>
</ul>
</li>
<li>
<p><strong>IHL（Internet Header Length，首部长度）</strong> (4位)</p>
<ul>
<li>表示IPv4首部的长度，以32位字（4字节）为单位。最小值为5（5×4=20字节），最大值为15（15×4=60字节）。</li>
</ul>
</li>
<li>
<p><strong>Type of Service（服务类型）</strong> (8位)</p>
<ul>
<li>包含服务质量(QoS)的信息，通常用于指定优先级和路由要求，实际上已经被更新为“生存时间”。该字段包括以下子字段：
<ul>
<li><strong>优先级（3位）</strong>：用于指定转发的优先级。</li>
<li><strong>吞吐量（4位）</strong>：用于指定吞吐量要求。</li>
<li><strong>延迟（1位）</strong>：优先考虑低延迟。</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Total Length（总长度）</strong> (16位)</p>
<ul>
<li>指示整个IPv4数据报的长度，包括首部和数据部分，以字节为单位，最小长度为20字节（无数据的情况），最大长度为65535字节。</li>
</ul>
</li>
<li>
<p><strong>Identification（标识）</strong> (16位)</p>
<ul>
<li>唯一标识数据报的值，用于区分数据报的片段。当数据报被分片时，各片段将共享同一标识符。</li>
</ul>
</li>
<li>
<p><strong>Flags（标志）</strong> (3位)</p>
<ul>
<li>用于控制和标识数据报的分片行为：
<ul>
<li><strong>位0</strong> — 保留位，通常为0。</li>
<li><strong>位1</strong> — DF（Don’t Fragment，禁止分片），指示不允许对数据报进行分片。</li>
<li><strong>位2</strong> — MF（More Fragments，还有片段），指示该片段后还有更多片段。</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Fragment Offset（片段偏移量）</strong> (13位)</p>
<ul>
<li>指示数据在原始数据报中相对于首部开始的偏移量，以8个字节为单位，用于重组分片。</li>
</ul>
</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131214916.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131215045.png" alt="" /></p>
<ol start="8">
<li>
<p><strong>Time to Live（TTL，生存时间）</strong> (8位)</p>
<ul>
<li>记录数据报在网络中可以存在的时间，以防止数据包在网络中无限循环。每经过一个路由器，TTL值减1，一旦TTL为0，数据报将被丢弃。</li>
</ul>
</li>
<li>
<p><strong>Protocol（协议）</strong> (8位)</p>
<ul>
<li>指示数据的上层协议类型，如TCP（6）、UDP（17）、ICMP（1）等，帮助接收方正确处理数据部分。</li>
</ul>
</li>
<li>
<p><strong>Header Checksum（首部校验和）</strong> (16位)</p>
<ul>
<li>用于检测IP头部在传输过程中是否发生了错误。发送方计算头部所有16位字的和，并存储在此字段，接收方再进行计算以验证数据是否完整。</li>
</ul>
</li>
<li>
<p><strong>Source Address（源地址）</strong> (32位)</p>
<ul>
<li>指示发送方的IPv4地址，以便接收方进行回复。</li>
</ul>
</li>
<li>
<p><strong>Destination Address（目标地址）</strong> (32位)</p>
<ul>
<li>指示数据报的接收方的IPv4地址，确保数据能准确到达目的地。</li>
</ul>
</li>
<li>
<p><strong>Options（选项字段）</strong> (可变长度)</p>
<ul>
<li>可选字段，用于携带附加信息，如时间戳、记录路由等。该字段长度可变，包含在IHL字段中，以确定选项的实际长度。</li>
</ul>
</li>
<li>
<p><strong>Data（数据部分）</strong> (可变长度)</p>
<ul>
<li>IPv4数据报的实际数据部分，包含要传输的有效载荷。</li>
</ul>
</li>
</ol>
<h2 id="网际控制报文协议icmp"><a class="header" href="#网际控制报文协议icmp">网际控制报文协议ICMP</a></h2>
<p>网际控制报文协议（Internet Control Message Protocol，ICMP）是互联网协议套件中重要的网络层协议之一，它主要用于在IP网络中传递控制消息、错误报告和状态信息。ICMP并不传递应用数据，而是与IP协议共同使用，以增强网络的功能和可靠性。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131215311.png" alt="" /></p>
<p>网际控制报文协议（ICMP）是网络通信的重要组成部分，为网络提供了错误报告、诊断和控制功能。理解ICMP的基本工作原理、常用消息类型及其应用场景，将帮助网络专业人士更有效地管理和故障排查网络。</p>
<p>以下将详细介绍ICMP的目的、工作原理、常用消息类型及应用场景。</p>
<h3 id="1-icmp的目的和功能"><a class="header" href="#1-icmp的目的和功能">1. ICMP的目的和功能</a></h3>
<p>ICMP的主要目的包括：</p>
<ul>
<li><strong>错误报告</strong>：当路由器或主机在传输过程中发现问题时，ICMP负责生成错误消息并将其返回给源主机。这包括目的地不可达、超时、参数问题等。</li>
<li><strong>网络诊断</strong>：ICMP提供了一些诊断工具，如 <code>ping</code> 和 <code>traceroute</code>，帮助网络管理员检测网络连接性和路径。</li>
<li><strong>控制消息</strong>：ICMP用于传输网络状态的控制消息，例如路由器重定向信息，以便源主机选择更优的路由路径。</li>
</ul>
<h3 id="2-icmp的工作原理"><a class="header" href="#2-icmp的工作原理">2. ICMP的工作原理</a></h3>
<p>ICMP运行在网络层，依赖于IP协议。每当IP数据报发送至目的地址时，IP协议会尝试转发这条数据。如果在转发过程中发生了错误，路由器（或主机）可以利用ICMP生成错误消息并将其发送回原发送者。这些错误消息包含描述故障的详细信息，帮助网络管理员进行故障排除。</p>
<h3 id="3-icmp消息类型"><a class="header" href="#3-icmp消息类型">3. ICMP消息类型</a></h3>
<p>ICMP消息可以分为两大类：错误消息和查询消息。每类消息都有不同的类型，以下是一些最常用的ICMP消息类型：</p>
<h4 id="31-错误消息"><a class="header" href="#31-错误消息">3.1 错误消息</a></h4>
<ul>
<li>
<p><strong>目标不可达（Destination Unreachable）</strong>：当数据包无法送达目标时，返回此消息。该消息有多个代码：</p>
<ul>
<li><strong>0</strong>：网络不可达</li>
<li><strong>1</strong>：主机不可达</li>
<li><strong>2</strong>：协议不可达</li>
<li><strong>3</strong>：端口不可达</li>
</ul>
</li>
<li>
<p><strong>超时（Time Exceeded）</strong>：当数据包在传输过程中TTL值减至0时，生成此消息。通常表示网络环路。</p>
</li>
<li>
<p><strong>参数问题（Parameter Problem）</strong>：当IP数据包的首部字段无效时，返回此消息。</p>
</li>
<li>
<p><strong>重定向（Redirect）</strong>：当路由器接收到数据包，并发现一条更优的路由时，发送此消息以提醒源主机更改路由。</p>
</li>
</ul>
<h4 id="32-查询消息"><a class="header" href="#32-查询消息">3.2 查询消息</a></h4>
<ul>
<li>
<p><strong>回显请求/应答（Echo Request / Echo Reply）</strong>：由<code>ping</code>命令生成的请求和应答，用于检测网络的连通性。</p>
</li>
<li>
<p><strong>时间戳请求/应答（Timestamp Request / Timestamp Reply）</strong>：用于计算往返时间，以检测网络延迟。</p>
</li>
<li>
<p><strong>信息请求/应答（Information Request / Information Reply）</strong>：用于请求网络信息（此类型较少使用）。</p>
</li>
</ul>
<h3 id="4-icmp的报文格式"><a class="header" href="#4-icmp的报文格式">4. ICMP的报文格式</a></h3>
<p>ICMP报文的基本格式如下：</p>
<pre><code>0        8        16               24
+--------+--------+---------+--------+
| Type   | Code   | Checksum     |
+--------+--------+---------+--------+
| Identifier               | Sequence Number              |
+----------------------------------------------------------+
| Data (Variable Length)                                         |
+----------------------------------------------------------+
</code></pre>
<ul>
<li><strong>Type（类型）</strong>：消息的类型，指示ICMP消息的具体功能。</li>
<li><strong>Code（代码）</strong>：具体的子类型，提供更详细的错误或状态信息。</li>
<li><strong>Checksum（校验和）</strong>：用于错误检测。</li>
<li><strong>Identifier（标识符）</strong>：用于标识回显请求和应答的匹配。</li>
<li><strong>Sequence Number（序列号）</strong>：用于区分回显请求的不同数据报文。</li>
<li><strong>Data（数据）</strong>：附加的数据信息，长度可变，具体取决于消息类型。</li>
</ul>
<h3 id="5-icmp的应用场景"><a class="header" href="#5-icmp的应用场景">5. ICMP的应用场景</a></h3>
<p>ICMP在网络管理和故障排除中起着重要作用，常见的应用场景包括：</p>
<ul>
<li><strong>网络连通性测试</strong>：使用<code>ping</code>命令发送ICMP回显请求，确认目标主机是否可达，并测量往返时间。</li>
<li><strong>路径跟踪</strong>：通过<code>traceroute</code>命令利用ICMP超时消息跟踪数据包的路径，帮助识别网络中的瓶颈或故障。</li>
<li><strong>故障诊断</strong>：网络管理员使用ICMP错误消息来确定网络故障的原因，以便及时解决问题。</li>
</ul>
<h3 id="6-icmp的安全考虑"><a class="header" href="#6-icmp的安全考虑">6. ICMP的安全考虑</a></h3>
<p>尽管ICMP具有重要的网络控制和管理功能，但也可能被滥用，成为网络攻击的工具，例如：</p>
<ul>
<li><strong>Ping洪水攻击</strong>：利用大量ICMP回显请求发送到目标，导致服务器过载。</li>
<li><strong>IP欺骗</strong>：伪造源地址的ICMP消息，以误导系统对数据包的处理。</li>
</ul>
<p>因此，在网络设备上配置适当的ICMP过滤和控制策略对于保护网络安全至关重要。</p>
<h2 id="网络地址转换nat"><a class="header" href="#网络地址转换nat">网络地址转换NAT</a></h2>
<p>网络地址转换（Network Address Translation，NAT）是一种用于IPv4地址空间管理和私有网络内设备连接互联网的技术。NAT通过将私有IP地址转换为公共IP地址，使多个设备能够共享一个或少量公共IP地址，从而有效延长IPv4地址的使用寿命。NAT同时还增强了网络的安全性和灵活性。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131215719.png" alt="" /></p>
<p>网络地址转换（NAT）是一项关乎网络资源管理和安全的重要技术。通过实现IP地址的转换，NAT使多个内部设备能够共享公共IP地址，从而保障有效的网络连接与安全。尽管NAT在节约IP地址和提高网络安全性方面发挥着重要作用，但也需要注意其对某些应用程序的兼容性和性能影响。理解NAT的基本原理、类型及其优缺点，有助于网络管理人员更好地规划和管理网络。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131215957.png" alt="" /></p>
<p>下面将详细介绍NAT的工作原理、类型、优缺点及应用场景。</p>
<h3 id="1-nat的工作原理"><a class="header" href="#1-nat的工作原理">1. NAT的工作原理</a></h3>
<p>NAT的核心工作原理是在网络设备（如路由器）上转换IP地址。主要涉及以下几个方面：</p>
<ul>
<li><strong>地址映射</strong>：路由器维护一个地址映射表，跟踪每个内部私有IP地址与其对应的公共IP地址之间的映射关系。</li>
<li><strong>数据包转换</strong>：当内部设备发送数据包到外部网络时，NAT路由器会将私有IP地址和端口号转换为公共IP地址和端口号，并更新映射表。当外部设备响应时，NAT路由器使用映射表将公共IP地址和端口号转换回内部设备的私有IP地址和端口号。</li>
<li><strong>通信重定向</strong>：通过目标端口的转换，外部设备可以将响应数据发送回正确的内部设备，确保数据的顺利传输。</li>
</ul>
<p>这种转换过程通常包括源地址转换和目的地址转换，确保数据包在传输到达正确的源和目的地。</p>
<h3 id="2-nat的类型"><a class="header" href="#2-nat的类型">2. NAT的类型</a></h3>
<p>根据实现方式和功能，NAT可以分为几个主要类型：</p>
<h4 id="21-静态nat"><a class="header" href="#21-静态nat">2.1 静态NAT</a></h4>
<p>在静态NAT中，特定的私有IP地址与特定的公共IP地址之间建立一种一对一的映射关系。这种类型的NAT适用于需要从外部网络访问特定内部设备的情况，如Web服务器。</p>
<p><strong>优点</strong>：</p>
<ul>
<li>提供固定的公共IP地址，方便外部访问。</li>
</ul>
<p><strong>缺点</strong>：</p>
<ul>
<li>公共IP地址资源耗费较大，不适用于动态变化的内部设备。</li>
</ul>
<h4 id="22-动态nat"><a class="header" href="#22-动态nat">2.2 动态NAT</a></h4>
<p>动态NAT从一组公共IP地址中分配公共地址给内部设备。当内部设备需要访问外部网络时，NAT路由器会动态分配一个公共IP地址，并更新映射表。</p>
<p><strong>优点</strong>：</p>
<ul>
<li>更有效地利用公共IP地址，适用于内部设备数量少于可用的公共IP地址的场景。</li>
</ul>
<p><strong>缺点</strong>：</p>
<ul>
<li>公共IP地址是动态分配的，外部设备无法直接访问内部设备。</li>
</ul>
<h4 id="23-pat端口地址转换"><a class="header" href="#23-pat端口地址转换">2.3 PAT（端口地址转换）</a></h4>
<p>PAT，又称为源地址NAT或多重NAT，允许多个内部设备使用同一个公共IP地址，通过唯一的端口号进行区分。每当内部设备访问外部网络时，NAT路由器会为其分配一个不同的端口号。</p>
<p><strong>优点</strong>：</p>
<ul>
<li>极大地节约了公共IP地址资源，几乎可以支持任意数量的内部设备连接。</li>
</ul>
<p><strong>缺点</strong>：</p>
<ul>
<li>由于所有内部设备使用同一个公共IP，某些应用程序（如某些P2P应用程序或视频会议）可能受到限制。</li>
</ul>
<h3 id="3-nat的优势"><a class="header" href="#3-nat的优势">3. NAT的优势</a></h3>
<p>NAT具有多种优势，具体包括：</p>
<ul>
<li>
<p><strong>节省IP地址</strong>：</p>
<ul>
<li>通过使多个内部设备共享一个或多个公共IP地址，NAT有效地延缓了IPv4地址耗尽的问题。</li>
</ul>
</li>
<li>
<p><strong>提高安全性</strong>：</p>
<ul>
<li>NAT帮助隐藏内部网络的结构和设备IP地址，从而减少外部攻击的风险。</li>
</ul>
</li>
<li>
<p><strong>灵活性</strong>：</p>
<ul>
<li>内部网络可以随时更改或重新配置，而无需重新提交公共IP地址，适应性强。</li>
</ul>
</li>
<li>
<p><strong>解决地址不足问题</strong>：</p>
<ul>
<li>在部分互联网服务商服务中，NAT允许没有足够公共IP地址的用户正常连接互联网。</li>
</ul>
</li>
</ul>
<h3 id="4-nat的缺点"><a class="header" href="#4-nat的缺点">4. NAT的缺点</a></h3>
<p>尽管NAT有许多优点，但也存在一些缺点或限制：</p>
<ul>
<li>
<p><strong>延迟和性能问题</strong>：</p>
<ul>
<li>NAT转换过程可能增加数据包的延迟，影响网络性能。</li>
</ul>
</li>
<li>
<p><strong>应用程序兼容性</strong>：</p>
<ul>
<li>某些协议（如FTP、SIP等）依赖于IP地址进行通信，其在NAT环境下可能出现问题，需要额外配置或使用NAT穿越技术。</li>
</ul>
</li>
<li>
<p><strong>简化的网络拓扑</strong>：</p>
<ul>
<li>NAT隐藏了网络内的设备IP地址，网络管理员较难管理和监控这些设备。</li>
</ul>
</li>
<li>
<p><strong>不支持某些连接</strong>：</p>
<ul>
<li>NAT可能导致某些基于IP的应用程序（如P2P应用、VPN等）工作不正常。</li>
</ul>
</li>
</ul>
<h3 id="5-nat在网络中的应用场景"><a class="header" href="#5-nat在网络中的应用场景">5. NAT在网络中的应用场景</a></h3>
<p>NAT被广泛应用于各种网络环境，以下是一些典型应用场景：</p>
<ul>
<li>
<p><strong>家庭网络</strong>：</p>
<ul>
<li>在家庭或小型企业网络中，路由器通常使用NAT，允许多个设备通过一个公共IP地址访问互联网。</li>
</ul>
</li>
<li>
<p><strong>企业网络</strong>：</p>
<ul>
<li>企业内部网络使用NAT可大幅降低公共IP地址的消耗，同时提升内部网络的安全性。</li>
</ul>
</li>
<li>
<p><strong>移动网络</strong>：</p>
<ul>
<li>移动运营商利用NAT技术有效管理其有限的IPv4地址，为移动用户提供网络连接。</li>
</ul>
</li>
</ul>
<h2 id="虚拟专用网vpn"><a class="header" href="#虚拟专用网vpn">虚拟专用网VPN</a></h2>
<p>虚拟专用网（Virtual Private Network，VPN）是一种通过公共网络（如互联网）建立安全、加密的连接，以保护用户的隐私和敏感数据的技术。VPN可以有效地隔离用户的通信，以防止未授权访问，确保数据在传输过程中的安全性和完整性。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131215719.png" alt="" /></p>
<p>虚拟专用网（VPN）是一项强大的网络技术，能够为用户提供更高的在线隐私性和数据安全性。它在远程工作、数据保护和绕过地理限制方面发挥着重要作用。然而，在选择和使用VPN服务时，用户需谨慎考虑安全性、速度以及适用性。了解VPN的基本原理及适用场景，有助于更好地利用这一技术。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131215922.png" alt="" /></p>
<p>以下将详细探讨VPN的工作原理、类型、优势、使用场景及安全考虑。</p>
<h3 id="1-vpn的工作原理"><a class="header" href="#1-vpn的工作原理">1. VPN的工作原理</a></h3>
<p>VPN使用隧道技术在用户的设备（如个人电脑、手机等）和VPN服务器之间建立安全的连接。这个过程通常涉及以下步骤：</p>
<ul>
<li><strong>加密</strong>：数据在从用户设备到VPN服务器的传输过程中进行加密，确保数据即使在被截获的情况下也无法被解读。</li>
<li><strong>隧道化</strong>：建立一个安全隧道，用户的网络数据通过这个隧道发送，外界无法直接访问用户的真实IP地址和网络内容。</li>
<li><strong>认证</strong>：在建立连接时，用户需要提供认证信息（如用户名和密码）来验证身份，以防止未授权的访问。</li>
<li><strong>封装</strong>：通过VPN协议（如IPSec、L2TP等），使得原始数据包被封装在包含VPN头的新的数据包中，以增强数据的隐私性和完整性。</li>
</ul>
<h3 id="2-vpn的类型"><a class="header" href="#2-vpn的类型">2. VPN的类型</a></h3>
<p>根据部署方式、连接方式和使用需求，VPN可以分为多种类型：</p>
<h4 id="21-按照部署方式分类"><a class="header" href="#21-按照部署方式分类">2.1 按照部署方式分类</a></h4>
<ul>
<li>
<p><strong>远程访问VPN</strong>：</p>
<ul>
<li>允许个人用户从任何地点通过互联网连接到企业或个人网络。适用于远程工作和访问内部资源。</li>
</ul>
</li>
<li>
<p><strong>站点对站点VPN</strong>：</p>
<ul>
<li>将两个或多个网络（如分支机构与总部之间）通过加密隧道连接起来，常用于企业之间的数据安全通信。</li>
</ul>
</li>
</ul>
<h4 id="22-按照连接方式分类"><a class="header" href="#22-按照连接方式分类">2.2 按照连接方式分类</a></h4>
<ul>
<li>
<p><strong>基于客户端的VPN</strong>：</p>
<ul>
<li>用户需要安装VPN客户端软件，通过该软件创建安全连接。</li>
</ul>
</li>
<li>
<p><strong>基于浏览器的VPN</strong>：</p>
<ul>
<li>通过浏览器扩展（如Chrome扩展）直接提供VPN服务，便于快速连接，适合日常上网。</li>
</ul>
</li>
<li>
<p><strong>企业级VPN</strong>：</p>
<ul>
<li>由企业IT部门管理，通常涉及复杂的网络配置，并为员工提供访问公司内部资源的连接。</li>
</ul>
</li>
</ul>
<h3 id="3-常见的vpn协议"><a class="header" href="#3-常见的vpn协议">3. 常见的VPN协议</a></h3>
<p>VPN的安全性和性能很大程度上取决于所使用的协议，以下是几种常见的VPN协议：</p>
<ul>
<li>
<p><strong>IPSec（互联网协议安全）</strong>：</p>
<ul>
<li>提供数据包加密、身份认证及数据完整性，常用于站点对站点VPN。</li>
</ul>
</li>
<li>
<p><strong>L2TP（第二层隧道协议）</strong>：</p>
<ul>
<li>通常与IPSec结合使用，以提供额外的加密，适合点对点VPN连接。</li>
</ul>
</li>
<li>
<p><strong>OpenVPN</strong>：</p>
<ul>
<li>一个开源解决方案，灵活性高，支持多种加密协议和配置，广泛应用于安全连接。</li>
</ul>
</li>
<li>
<p><strong>PPTP（点对点隧道协议）</strong>：</p>
<ul>
<li>一种较老的协议，易于设置和使用，但安全性相对较低，逐渐被淘汰。</li>
</ul>
</li>
<li>
<p><strong>SSL/TLS VPN</strong>：</p>
<ul>
<li>通过SSL/TLS加密层创建安全连接，用户可以通过Web浏览器访问资源，无需特殊客户端。</li>
</ul>
</li>
</ul>
<h3 id="4-vpn的优势"><a class="header" href="#4-vpn的优势">4. VPN的优势</a></h3>
<p>使用VPN带来的主要优势包括：</p>
<ul>
<li>
<p><strong>隐私和匿名性</strong>：</p>
<ul>
<li>VPN可以隐藏用户的真实IP地址，保护其在线活动不被跟踪，增强个人隐私。</li>
</ul>
</li>
<li>
<p><strong>安全性</strong>：</p>
<ul>
<li>通过加密和认证机制，确保数据在传输过程中不被截获或篡改，大大提高网络安全性。</li>
</ul>
</li>
<li>
<p><strong>绕过地理限制</strong>：</p>
<ul>
<li>用户可以通过VPN连接到不同国家的服务器，绕过内容的地域限制，用于访问地区限制的服务（如流媒体、社交媒体）。</li>
</ul>
</li>
<li>
<p><strong>远程访问</strong>：</p>
<ul>
<li>允许用户安全地从任何地点访问公司的内部网络和资源，支持远程办公和提高生产力。</li>
</ul>
</li>
<li>
<p><strong>抵御网络攻击</strong>：</p>
<ul>
<li>在公共Wi-Fi环境中，VPN提供额外的保护层，减少用户数据被黑客窃取的风险。</li>
</ul>
</li>
</ul>
<h3 id="5-vpn的使用场景"><a class="header" href="#5-vpn的使用场景">5. VPN的使用场景</a></h3>
<p>VPN广泛应用于多种场合，具体场景包括：</p>
<ul>
<li>
<p><strong>企业员工远程办公</strong>：</p>
<ul>
<li>员工通过VPN安全地访问公司网络和内部资源，支持灵活的工作模式。</li>
</ul>
</li>
<li>
<p><strong>提供员工安全访问</strong>：</p>
<ul>
<li>企业利用VPN确保远程工作人员可以安全地访问敏感数据，减少数据泄露风险。</li>
</ul>
</li>
<li>
<p><strong>访问受限内容</strong>：</p>
<ul>
<li>用户通过VPN可以访问地理限制的内容和服务，如Netflix、Hulu等流媒体网站，或者在某些地区被屏蔽的网站。</li>
</ul>
</li>
<li>
<p><strong>保护公共Wi-Fi连接</strong>：</p>
<ul>
<li>用户在咖啡厅、机场等公共场所使用VPN，可以有效保护个人信息安全，防止数据监视和劫持。</li>
</ul>
</li>
</ul>
<h3 id="6-安全考虑及潜在风险"><a class="header" href="#6-安全考虑及潜在风险">6. 安全考虑及潜在风险</a></h3>
<p>虽然VPN提供了一定的安全保障，但也存在一些潜在的风险和挑战：</p>
<ul>
<li>
<p><strong>服务器安全性</strong>：</p>
<ul>
<li>使用不安全或不信任的VPN服务可能导致数据泄露或被追踪。因此，选择信誉良好的VPN提供商是至关重要的。</li>
</ul>
</li>
<li>
<p><strong>连接速度与稳定性</strong>：</p>
<ul>
<li>由于加密过程，VPN可能会导致网络连接速度降低，用户在选择VPN时需权衡速度和安全性。</li>
</ul>
</li>
<li>
<p><strong>法律和使用政策</strong>：</p>
<ul>
<li>某些国家或地区对VPN的使用有限制，用户需遵守当地法规，以避免法律风险。</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="传输层"><a class="header" href="#传输层">传输层</a></h1>
<ul>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E6%A6%82%E8%BF%B0">概述</a>
<ul>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E4%BC%A0%E8%BE%93%E5%B1%82%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD">传输层的主要功能</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE">传输层协议</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E4%BC%A0%E8%BE%93%E5%B1%82%E7%9A%84%E7%AB%AF%E5%8F%A3">传输层的端口</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E4%BC%A0%E8%BE%93%E5%B1%82%E5%9C%A8%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B%E4%B8%AD%E7%9A%84%E4%BD%8D%E7%BD%AE">传输层在网络模型中的位置</a></li>
</ul>
</li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AEudp">用户数据报协议（UDP）</a>
<ul>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#udp-%E7%9A%84%E4%B8%BB%E8%A6%81%E7%89%B9%E7%82%B9">UDP 的主要特点</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#udp-%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%BB%93%E6%9E%84">UDP 数据报结构</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#udp-%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B">UDP 的工作流程</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#udp-%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9">UDP 的优缺点</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#udp-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">UDP 应用场景</a></li>
</ul>
</li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AEtcp">传输控制协议（TCP）</a>
<ul>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#tcp-%E7%9A%84%E4%B8%BB%E8%A6%81%E7%89%B9%E7%82%B9">TCP 的主要特点</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#tcp-%E6%95%B0%E6%8D%AE%E6%AE%B5%E7%BB%93%E6%9E%84">TCP 数据段结构</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#tcp-%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9">TCP 的优缺点</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#tcp-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF">TCP 应用场景</a></li>
</ul>
</li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#udp%E5%92%8Ctcp%E7%9A%84%E5%AF%B9%E6%AF%94">UDP和TCP的对比</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#tcp-%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6">TCP 流量控制</a>
<ul>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E7%9A%84%E7%9B%AE%E6%A0%87">流量控制的目标</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#tcp-%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%9C%BA%E5%88%B6">TCP 流量控制的工作机制</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9">流量控制的优缺点</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E4%B8%8E%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E5%8C%BA%E5%88%AB">与拥塞控制的区别</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF">适用场景</a></li>
</ul>
</li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#tcp-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6">TCP 拥塞控制</a>
<ul>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E7%9B%AE%E6%A0%87">拥塞控制的目标</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">拥塞控制的工作原理</a>
<ul>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#1-%E6%85%A2%E5%90%AF%E5%8A%A8slow-start">1. 慢启动（Slow Start）</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#2-%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8Dcongestion-avoidance">2. 拥塞避免（Congestion Avoidance）</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#3-%E5%BF%AB%E9%80%9F%E9%87%8D%E4%BC%A0fast-retransmit">3. 快速重传（Fast Retransmit）</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#4-%E5%BF%AB%E9%80%9F%E6%81%A2%E5%A4%8Dfast-recovery">4. 快速恢复（Fast Recovery）</a></li>
</ul>
</li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E8%B6%85%E6%97%B6%E9%87%8D%E4%BC%A0%E6%97%B6%E9%97%B4%E7%9A%84%E9%80%89%E6%8B%A9">超时重传时间的选择</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#tcp-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B">TCP 拥塞控制的整体流程</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E8%BF%9B%E6%AD%A5%E4%B8%8E%E6%8C%91%E6%88%98">拥塞控制的进步与挑战</a></li>
</ul>
</li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#tcp-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93">TCP 可靠传输</a>
<ul>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%85%B3%E9%94%AE%E6%9C%BA%E5%88%B6">可靠传输的关键机制</a>
<ul>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#1-%E6%95%B0%E6%8D%AE%E5%88%86%E6%AE%B5">1. 数据分段</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#2-%E5%BA%8F%E5%88%97%E5%8F%B7">2. 序列号</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#3-%E7%A1%AE%E8%AE%A4%E5%BA%94%E7%AD%94ack">3. 确认应答（ACK）</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#4-%E9%87%8D%E4%BC%A0%E6%9C%BA%E5%88%B6">4. 重传机制</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#5-%E6%A0%A1%E9%AA%8C%E5%92%8C">5. 校验和</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#6-%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6">6. 流量控制</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#7-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6">7. 拥塞控制</a></li>
</ul>
</li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#tcp-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B">TCP 可靠传输的工作流程</a></li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E5%8F%AF%E9%9D%A0%E6%80%A7%E4%BF%9D%E8%AF%81%E7%9A%84%E6%A1%88%E4%BE%8B">可靠性保证的案例</a></li>
</ul>
</li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#tcp%E8%BF%90%E8%BE%93%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B%E5%92%8C%E8%BF%9E%E6%8E%A5%E9%87%8A%E6%94%BE">TCP运输连接管理（连接建立和连接释放）</a>
<ul>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B">连接建立</a>
<ul>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E7%9A%84%E5%85%B7%E4%BD%93%E6%AD%A5%E9%AA%A4">三次握手的具体步骤</a></li>
</ul>
</li>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E8%BF%9E%E6%8E%A5%E9%87%8A%E6%94%BE">连接释放</a>
<ul>
<li><a href="%E4%BC%A0%E8%BE%93%E5%B1%82.html#%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%E7%9A%84%E5%85%B7%E4%BD%93%E6%AD%A5%E9%AA%A4">四次挥手的具体步骤</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="概述-2"><a class="header" href="#概述-2">概述</a></h2>
<p><strong>传输层</strong> 是计算机网络体系结构中的一个重要层次，位于网络层之上，应用层之下。传输层的主要任务是为不同主机上的应用程序提供可靠和高效的数据传输服务。它负责数据的分段、重组、流量控制以及错误检测和修正等功能。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131203334.png" alt="" /></p>
<p>传输层在计算机网络中扮演着至关重要的角色，确保了数据在不同主机之间的可靠传输。通过 TCP 和 UDP 等协议，传输层为各种类型的应用提供了必要的支持，以满足不同的网络通信需求。</p>
<h3 id="传输层的主要功能"><a class="header" href="#传输层的主要功能">传输层的主要功能</a></h3>
<ol>
<li>
<p><strong>数据传输控制</strong>：</p>
<ul>
<li>传输层确保端到端的数据传输，确保发送方和接收方之间的数据能够按顺序正确传输。</li>
</ul>
</li>
<li>
<p><strong>可靠性</strong>：</p>
<ul>
<li>通过协议机制提供数据传输的可靠性，确保数据在传输过程中不会丢失，并在需要时进行重传。</li>
</ul>
</li>
<li>
<p><strong>流量控制</strong>：</p>
<ul>
<li>控制数据传输速度，防止发送方发送数据过快，导致接收方缓冲区溢出，从而出现数据丢失。</li>
</ul>
</li>
<li>
<p><strong>拥塞控制</strong>：</p>
<ul>
<li>监控网络状态，并在网络发生拥塞时采取措施减少数据流量，避免使网络进一步拥堵。</li>
</ul>
</li>
<li>
<p><strong>分段与重组</strong>：</p>
<ul>
<li>传输层将应用层传来的数据分段以适应网络的传输要求，并在接收方重组这些数据段。</li>
</ul>
</li>
</ol>
<h3 id="传输层协议"><a class="header" href="#传输层协议">传输层协议</a></h3>
<p>传输层常用的协议主要有两种：<strong>传输控制协议（TCP）</strong> 和 <strong>用户数据报协议（UDP）</strong>。</p>
<ol>
<li>传输控制协议（TCP）</li>
</ol>
<ul>
<li>
<p><strong>特点</strong>：</p>
<ul>
<li><strong>面向连接</strong>：在数据传输开始前，TCP 在发送方和接收方之间建立连接。</li>
<li><strong>可靠性</strong>：TCP 通过序列号、确认应答、重传机制等方式确保数据的可靠性。</li>
<li><strong>有序传输</strong>：数据段按顺序到达接收方，如果发生乱序，则通过序列号进行排序。</li>
<li><strong>流量控制</strong>：使用滑动窗口机制调节数据流量。</li>
<li><strong>拥塞控制</strong>：采用慢启动、拥塞避免、快重传和快恢复等算法来避免网络拥塞。</li>
</ul>
</li>
<li>
<p><strong>工作流程</strong>：</p>
<ol>
<li>
<p><strong>连接建立</strong>：通过三次握手（Three-Way Handshake）建立连接：</p>
<ul>
<li>客户端发送 SYN（同步序列编号）请求连接。</li>
<li>服务器响应 SYN-ACK（同步序列编号确认）。</li>
<li>客户端发送 ACK 确认建立连接。</li>
</ul>
</li>
<li>
<p><strong>数据传输</strong>：在连接建立后，双方可以进行数据的交换。</p>
</li>
<li>
<p><strong>连接终止</strong>：通过四次挥手（Four-Way Handshake）终止连接。</p>
</li>
</ol>
</li>
</ul>
<ol start="2">
<li>用户数据报协议（UDP）</li>
</ol>
<ul>
<li>
<p><strong>特点</strong>：</p>
<ul>
<li><strong>无连接</strong>：UDP 在传输数据之前不建立连接，数据包直接发送。</li>
<li><strong>不可靠性</strong>：UDP 不保证数据的可靠接收，没有重传机制，可能会丢失或重复数据。</li>
<li><strong>数据包无序</strong>：数据包的到达顺序不保证在应用层正确。接收方只能根据收到的数据包进行处理。</li>
<li><strong>轻量级</strong>：UDP 协议头部开销小，适合对延迟敏感的应用。</li>
</ul>
</li>
<li>
<p><strong>工作流程</strong>：</p>
<ul>
<li>数据以数据报形式通过 UDP 发送，一旦数据发送完，不需要进行连接的建立和终止。</li>
</ul>
</li>
</ul>
<ol start="3">
<li>选择协议</li>
</ol>
<ul>
<li><strong>TCP</strong> 适合需要高可靠性和有序传输的应用，如文件传输（FTP）、网页浏览（HTTP/HTTPS）、邮件传输（SMTP）等。</li>
<li><strong>UDP</strong> 更适合实时性要求高的应用，如在线游戏、视频会议、直播流媒体等，因其传输延迟低。</li>
</ul>
<h3 id="传输层的端口"><a class="header" href="#传输层的端口">传输层的端口</a></h3>
<p>传输层使用<strong>端口</strong>来区分不同的应用程序。每个运行的应用程序都有一个或多个端口号。端口可以分为：</p>
<ul>
<li><strong>知名端口</strong>（0-1023）：由系统保留给常用服务（如 HTTP: 80, FTP: 21, SMTP: 25 等）。</li>
<li><strong>注册端口</strong>（1024-49151）：供用户和应用程序使用的端口，通常需要申请。</li>
<li><strong>动态/私有端口</strong>（49152-65535）：由客户端应用临时分配，通常在发起连接时使用。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131203455.png" alt="" /></p>
<h3 id="传输层在网络模型中的位置"><a class="header" href="#传输层在网络模型中的位置">传输层在网络模型中的位置</a></h3>
<p>传输层属于互联网协议套件的四层模型和 OSI 七层模型的第四层。</p>
<ul>
<li>
<p><strong>互联网协议套件（TCP/IP 模型）</strong>：</p>
<ul>
<li>链接层</li>
<li>网络层</li>
<li><strong>传输层</strong></li>
<li>应用层</li>
</ul>
</li>
<li>
<p><strong>OSI 模型</strong>：</p>
<ul>
<li>物理层</li>
<li>数据链路层</li>
<li>网络层</li>
<li><strong>传输层</strong></li>
<li>会话层</li>
<li>表示层</li>
<li>应用层</li>
</ul>
</li>
</ul>
<h2 id="用户数据报协议udp"><a class="header" href="#用户数据报协议udp">用户数据报协议（UDP）</a></h2>
<p><strong>用户数据报协议（UDP, User Datagram Protocol）</strong> 是一种简单的通信协议，属于传输层协议，主要用于在网络上发送数据报文。与传输控制协议（TCP）相比，UDP 提供了更简单的机制和较低的开销，适用于对延迟敏感、但不要求可靠性的应用。</p>
<p>用户数据报协议（UDP）是一种简单且高效的传输协议，适用于对速度敏感的应用。虽然其不可靠性较高，但通过明确的应用场景选择，使得 UDP 成为许多实时和多媒体应用的理想选择。</p>
<h3 id="udp-的主要特点"><a class="header" href="#udp-的主要特点">UDP 的主要特点</a></h3>
<ol>
<li>
<p><strong>无连接性</strong>：</p>
<ul>
<li>UDP 是一种无连接协议，在传输数据之前不需要建立和管理连接。这允许迅速发送数据包，但缺乏连接的控制和管理。</li>
</ul>
</li>
<li>
<p><strong>不可靠性</strong>：</p>
<ul>
<li>UDP 不保证数据包的可靠传输。数据包可能在传输过程中丢失、重复、或者乱序。发送方发送数据后，不会收到任何确认（ACK）响应。</li>
</ul>
</li>
<li>
<p><strong>数据报方式</strong>：</p>
<ul>
<li>UDP 以数据报（Datagram）形式发送数据，每个数据报都是独立的信息单元，UDP 网络层不对数据报的到达状态进行追踪。</li>
</ul>
</li>
<li>
<p><strong>低延迟</strong>：</p>
<ul>
<li>由于 UDP 的简单性和无连接特性，其延迟较低，适合需要快速传输的应用。</li>
</ul>
</li>
<li>
<p><strong>头部开销小</strong>：</p>
<ul>
<li>UDP 的头部相对较小，仅包含 8 字节，较 TCP 的 20 字节头部开销要少，从而提高了传输效率。</li>
</ul>
</li>
</ol>
<h3 id="udp-数据报结构"><a class="header" href="#udp-数据报结构">UDP 数据报结构</a></h3>
<p>UDP 数据报的结构由两个部分组成：头部（Header）和数据（Data）。</p>
<ol>
<li>头部（8 字节）</li>
</ol>
<p>UDP 头部包含以下字段：</p>
<div class="table-wrapper"><table><thead><tr><th>字段</th><th>大小（字节）</th><th>描述</th></tr></thead><tbody>
<tr><td>源端口</td><td>2</td><td>发送方的端口号</td></tr>
<tr><td>目的端口</td><td>2</td><td>接收方的端口号</td></tr>
<tr><td>长度</td><td>2</td><td>UDP 数据报的总长度，包括头部和数据部分</td></tr>
<tr><td>校验和</td><td>2</td><td>用于错误检测的数据完整性校验</td></tr>
</tbody></table>
</div>
<ul>
<li>源端口和目的端口用于标识应用程序。</li>
<li>长度字段用于指示UDP数据报的总长度。</li>
<li>校验和用于检查数据在传输过程中是否出现损坏。</li>
</ul>
<ol start="2">
<li>数据</li>
</ol>
<p>数据部分包含要传送的有效负载，可以是任意类型的数据，大小限制在 65,507 字节以内（UDP 数据报的最大长度为 65,535 字节，而头部占用 8 字节）。</p>
<h3 id="udp-的工作流程"><a class="header" href="#udp-的工作流程">UDP 的工作流程</a></h3>
<p>UDP 的工作过程大致包括以下几个步骤：</p>
<ol>
<li>
<p><strong>创建数据报</strong>：</p>
<ul>
<li>源应用程序通过 UDP 在数据链路层上创建一个数据报并指定目标 IP 地址和端口。</li>
</ul>
</li>
<li>
<p><strong>发送数据</strong>：</p>
<ul>
<li>UDP 发送数据时，将数据报封装为 UDP 数据包并通过网络层发送。不进行连接的建立。</li>
</ul>
</li>
<li>
<p><strong>接收数据</strong>：</p>
<ul>
<li>目的主机的 UDP 协议将接收到的数据包传递给对应的应用程序。由于无需确认和重传，即使数据丢失或乱序，UDP 仍会继续发送下一数据包。</li>
</ul>
</li>
</ol>
<h3 id="udp-的优缺点"><a class="header" href="#udp-的优缺点">UDP 的优缺点</a></h3>
<p>优点</p>
<ol>
<li><strong>低延迟</strong>：由于缺少连接建立和管理，UDP 能够实现快速数据传输。</li>
<li><strong>简单高效</strong>：UDP 的头部开销小，适合高效传输小数据块。</li>
<li><strong>适用场景丰富</strong>：适合实时性要求高的应用，如在线游戏、流媒体、VoIP（语音传输）等。</li>
</ol>
<p>缺点</p>
<ol>
<li><strong>不可靠性</strong>：数据可能会丢失、重复或乱序，无法保证数据完整性。</li>
<li><strong>缺乏流量控制与拥塞控制</strong>：UDP 不对传输速度进行调节，可能导致网络拥塞。</li>
<li><strong>错误检测有限</strong>：虽然有校验和字段，但UDP不提供重传机制。</li>
</ol>
<h3 id="udp-应用场景"><a class="header" href="#udp-应用场景">UDP 应用场景</a></h3>
<p>UDP 在许多领域有广泛应用，具体包括：</p>
<ul>
<li><strong>实时应用</strong>：如视频会议、即时消息、在线游戏等，强调当前数据的快速传输，即使丢失少量数据也在所不惜。</li>
<li><strong>流媒体应用</strong>：如音频和视频流传输，在不保证顺序的情况下，允许通过数据包的连续传输实现流畅播放。</li>
<li><strong>广播和组播</strong>：UDP 支持广播（向网络中的所有主机发送）和组播（向特定的一组主机发送），常用于网络服务发现和在线直播传输。</li>
</ul>
<h2 id="传输控制协议tcp"><a class="header" href="#传输控制协议tcp">传输控制协议（TCP）</a></h2>
<p><strong>传输控制协议（TCP，Transmission Control Protocol）</strong> 是一种面向连接的传输层协议，主要用于提供可靠的数据传输服务。TCP 被广泛应用于 Internet 的各种应用，如网络浏览（HTTP/HTTPS）、文件传输（FTP）和电子邮件（SMTP）等。它能确保数据的正确性、顺序、完整性并控制数据的流量。</p>
<p>传输控制协议（TCP）是确保网络上数据可靠传输的基本协议，它为应用程序间提供了一种强有力的机制。在需要高可靠性和顺序性的系统中，TCP 是不可或缺的。</p>
<h3 id="tcp-的主要特点"><a class="header" href="#tcp-的主要特点">TCP 的主要特点</a></h3>
<ol>
<li>
<p><strong>面向连接</strong>：</p>
<ul>
<li>TCP 在发送数据之前，必须在通信双方之间建立虚拟连接，确保两者之间的可靠性和同步。</li>
</ul>
</li>
<li>
<p><strong>可靠性</strong>：</p>
<ul>
<li>TCP 通过序列号、确认应答（ACK）和重传机制确保数据的可靠传输。每个数据段在发送后都需要确认，未被确认的数据会被重新发送。</li>
</ul>
</li>
<li>
<p><strong>有序传输</strong>：</p>
<ul>
<li>TCP 确保数据包按正确的顺序到达接收方。即使发送方以不同顺序发送数据包，TCP 也能在接收方进行排序。</li>
</ul>
</li>
<li>
<p><strong>流量控制</strong>：</p>
<ul>
<li>TCP 使用滑动窗口机制控制数据流的速度，避免接收方缓冲区溢出，从而确保传输的平稳性。</li>
</ul>
</li>
<li>
<p><strong>拥塞控制</strong>：</p>
<ul>
<li>TCP 能够监控网络的状态，并在网络拥堵时调整数据发送速率，防止进一步的拥塞。</li>
</ul>
</li>
<li>
<p><strong>错误检测与修正</strong>：</p>
<ul>
<li>TCP 对每个数据段使用校验和对数据完整性进行验证，确保传输的数据未被损坏。</li>
</ul>
</li>
</ol>
<h3 id="tcp-数据段结构"><a class="header" href="#tcp-数据段结构">TCP 数据段结构</a></h3>
<p>TCP 数据段由头部和数据部分组成。头部用于控制和标识数据段的特性，数据部分则携带应用层的有效负载。</p>
<ol>
<li>TCP 头部结构</li>
</ol>
<p>TCP 头部最小长度为 20 字节，可以附加选项字段，最大长度可达 60 字节。其主要字段包括：</p>
<div class="table-wrapper"><table><thead><tr><th>字段</th><th>大小（字节）</th><th>描述</th></tr></thead><tbody>
<tr><td>源端口</td><td>2</td><td>发送方的端口号</td></tr>
<tr><td>目的端口</td><td>2</td><td>接收方的端口号</td></tr>
<tr><td>序列号</td><td>4</td><td>确定数据段的顺序，用于数据的重新组装</td></tr>
<tr><td>确认号</td><td>4</td><td>下一个期望接收的数据段的序列号</td></tr>
<tr><td>头部长度</td><td>4</td><td>TCP 头部长度</td></tr>
<tr><td>标志位</td><td>6</td><td>控制连接和传输的各种标志（如 SYN、ACK、FIN 等）</td></tr>
<tr><td>窗口大小</td><td>2</td><td>用于流量控制，表示接收方可接收的字节数</td></tr>
<tr><td>校验和</td><td>2</td><td>用于错误检测的校验和</td></tr>
<tr><td>紧急指针</td><td>2</td><td>如果设置了紧急标志，则指示紧急数据的字节数</td></tr>
<tr><td>选项</td><td>可变</td><td>包含可选参数（如最大报文段长度）</td></tr>
<tr><td>数据</td><td>可变</td><td>实际传输的数据</td></tr>
</tbody></table>
</div>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131211159.png" alt="" /></p>
<ol start="2">
<li>TCP 数据的传输流程</li>
</ol>
<p>TCP 数据传输的流程主要包括以下几个步骤：</p>
<ol>
<li>
<p><strong>连接建立</strong>：</p>
<ul>
<li>使用 <strong>三次握手</strong>（Three-Way Handshake）协议建立连接：
<ul>
<li><strong>第一步</strong>：客户端发送一个 SYN（同步序列编号）包到服务器，请求建立连接。</li>
<li><strong>第二步</strong>：服务器响应一个 SYN-ACK（同步序列编号确认）包，确认连接请求。</li>
<li><strong>第三步</strong>：客户端再发送一个 ACK（确认）包，完成连接建立。</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>数据传输</strong>：</p>
<ul>
<li>连接建立后，数据开始顺序传输。发送方通过序列号将数据段分配编号，而接受方通过确认号告知发送方已收到的数据。</li>
</ul>
</li>
<li>
<p><strong>连接终止</strong>：</p>
<ul>
<li>使用 <strong>四次挥手</strong>（Four-Way Handshake）协议终止连接：
<ul>
<li><strong>第一步</strong>：主动关闭连接的一方发送一个 FIN（终止）包。</li>
<li><strong>第二步</strong>：接收方确认该 FIN 包，发送 ACK。</li>
<li><strong>第三步</strong>：接收方发送一个 FIN 包，表示也要关闭连接。</li>
<li><strong>第四步</strong>：主动关闭的一方确认 FIN，完成连接终止。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="tcp-的优缺点"><a class="header" href="#tcp-的优缺点">TCP 的优缺点</a></h3>
<p>优点</p>
<ol>
<li><strong>可靠性</strong>：确保数据可靠性和完整性，通过重传机制处理丢失的数据。</li>
<li><strong>顺序控制</strong>：能将数据按发送顺序接收并恢复。</li>
<li><strong>流量控制与拥塞控制</strong>：有效管理网络流量，避免拥塞。</li>
</ol>
<p>缺点</p>
<ol>
<li><strong>延迟</strong>：由于建立连接和确认机制，引入了一定的延迟。</li>
<li><strong>开销较大</strong>：相比于 UDP，TCP 的头部较大，具有更高的开销。</li>
<li><strong>复杂性</strong>：管理连接状态、流量及拥塞控制的实现较复杂。</li>
</ol>
<h3 id="tcp-应用场景"><a class="header" href="#tcp-应用场景">TCP 应用场景</a></h3>
<p>TCP 被广泛应用于各种需要可靠传输的场景，包括但不限于：</p>
<ul>
<li><strong>Web 浏览</strong>：HTTP/HTTPS 协议通过 TCP 进行数据传输，确保网页的完整和正确加载。</li>
<li><strong>文件传输</strong>：FTP 协议通过 TCP 传输文件，保证数据的可靠性和顺序。</li>
<li><strong>电子邮件</strong>：SMTP、POP3 和 IMAP 协议依赖于 TCP 进行邮件的发送与接收。</li>
</ul>
<h2 id="udp和tcp的对比"><a class="header" href="#udp和tcp的对比">UDP和TCP的对比</a></h2>
<div class="table-wrapper"><table><thead><tr><th>特性</th><th>TCP</th><th>UDP</th></tr></thead><tbody>
<tr><td>连接方式</td><td>面向连接（三次握手）</td><td>无连接</td></tr>
<tr><td>可靠性</td><td>可靠（重传、确认）</td><td>不可靠（无重传、确认机制）</td></tr>
<tr><td>数据顺序</td><td>保证顺序</td><td>不保证顺序</td></tr>
<tr><td>开销</td><td>较大（头部20-60字节）</td><td>较小（头部8字节）</td></tr>
<tr><td>适用场景</td><td>Web、文件传输、电子邮件等</td><td>在线游戏、视频流、语音传输等</td></tr>
</tbody></table>
</div>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131203552.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131203613.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131203629.png" alt="" /></p>
<p>TCP（传输控制协议）和UDP（用户数据报协议）是两种在互联网中广泛使用的传输层协议，各自适用于不同的应用场景。以下是三种使用它们的协议及其特点：</p>
<p>使用 TCP 的协议</p>
<ol>
<li>
<p><strong>HTTP/HTTPS（超文本传输协议）</strong></p>
<ul>
<li><strong>特点</strong>：HTTP/HTTPS 是用于网页浏览的协议，基于请求-响应模型。它需要可靠的数据传输，确保请求和响应的完整性与顺序，因此使用 TCP。</li>
<li><strong>使用原因</strong>：网页内容往往需要完整传输，任何丢失或错误都会影响用户体验。</li>
</ul>
</li>
<li>
<p><strong>FTP（文件传输协议）</strong></p>
<ul>
<li><strong>特点</strong>：FTP 用于在网络之间传输文件，支持用户登录、文件上传和下载。它需要确认数据的接收和完整性。</li>
<li><strong>使用原因</strong>：文件传输时，确保所有数据完整无误是至关重要的，TCP 提供了这种可靠性。</li>
</ul>
</li>
<li>
<p><strong>SMTP（简单邮件传输协议）</strong></p>
<ul>
<li><strong>特点</strong>：SMTP 用于发送邮件，它需要保证邮件数据的传输可靠性和顺序。</li>
<li><strong>使用原因</strong>：邮件内容必须完整且按照顺序到达接收者，TCP 适合这种需求。</li>
</ul>
</li>
</ol>
<p>使用 UDP 的协议</p>
<ol>
<li>
<p><strong>DNS（域名系统）</strong></p>
<ul>
<li><strong>特点</strong>：DNS 通过 UDP 解析域名与 IP 地址之间的映射，通常使用较小的数据包。</li>
<li><strong>使用原因</strong>：DNS 查询通常很短，且对速度要求高，丢包后可以重试，不需要像 TCP 那样保证每次都可靠。</li>
</ul>
</li>
<li>
<p><strong>DHCP（动态主机配置协议）</strong></p>
<ul>
<li><strong>特点</strong>：DHCP 用于自动分配 IP 地址。它在网络启动时快速发送请求并接收地址。</li>
<li><strong>使用原因</strong>：速度快且不需要每一个数据包都被确认，UDP 适合这种实时需求。</li>
</ul>
</li>
<li>
<p><strong>实时流媒体协议（RTP）</strong></p>
<ul>
<li><strong>特点</strong>：RTP 用于音频和视频流的实时传输，对延迟敏感，通常在 VoIP 或视频会议中使用。</li>
<li><strong>使用原因</strong>：RTP 更注重速度和实时性，偶尔的数据丢失不会显著影响体验，因此使用 UDP。</li>
</ul>
</li>
</ol>
<p>总结</p>
<ul>
<li><strong>TCP</strong>：提供可靠、顺序的传输，适用于需要完整性和确认的应用，如网页、文件传输、邮件等。</li>
<li><strong>UDP</strong>：提供无连接的快速传输，适用于实时应用和对速度有较高要求但可以容忍丢包的场景，如 DNS、DHCP 和流媒体传输。</li>
</ul>
<h2 id="tcp-流量控制"><a class="header" href="#tcp-流量控制">TCP 流量控制</a></h2>
<p>TCP 流量控制是一个重要机制，用于确保发送方和接收方之间的通信是有效和高效的。它通过调节数据的发送速率，避免接收方的缓冲区溢出，从而确保数据的可靠传输。流量控制主要通过调节 TCP 的<strong>窗口大小</strong>来实现。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131204741.png" alt="" /></p>
<p>TCP 的流量控制通过动态调整窗口大小，确保发送和接收之间的信息流保持平衡，避免拥塞和数据丢失。通过这一机制，TCP 能够在不同的网络条件下高效运行，保持数据传输的可靠性。</p>
<h3 id="流量控制的目标"><a class="header" href="#流量控制的目标">流量控制的目标</a></h3>
<ul>
<li><strong>避免数据丢失</strong>：保护接收方的缓冲区，防止数据溢出。</li>
<li><strong>优化传输效率</strong>：在不导致拥塞的情况下，尽可能利用网络带宽。</li>
<li><strong>增强可靠性</strong>：确保所有数据都能被成功接收，不会因缓冲区的不足而被丢弃。</li>
</ul>
<h3 id="tcp-流量控制的工作机制"><a class="header" href="#tcp-流量控制的工作机制">TCP 流量控制的工作机制</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131204706.png" alt="" /></p>
<p>TCP 的流量控制主要依赖于<strong>滑动窗口</strong>（Sliding Window）机制。以下是这一机制的详细说明：</p>
<ol>
<li>滑动窗口（Sliding Window）机制</li>
</ol>
<ul>
<li><strong>定义</strong>：滑动窗口是一种动态调整的缓冲区的大小，指示发送方可以发送多少字节而无需等待接收方确认。</li>
<li><strong>窗口大小</strong>：窗口大小由接收方的缓冲区的可用空间决定。接收方会在 TCP 头部的窗口大小字段中告知发送方当前的可用窗口大小。</li>
</ul>
<ol start="2">
<li>窗口大小的更新</li>
</ol>
<ul>
<li><strong>初始化</strong>：连接建立后，接收方会告知发送方其缓冲区的大小作为初始的窗口大小。</li>
<li><strong>动态调整</strong>：当接收方处理完一定的数据后，它可以通过发送 ACK 报文来通知发送方更新窗口大小。如果接收方的缓冲区满了，它会将窗口大小设置为 0，通知发送方停止发送更多数据。</li>
<li><strong>例子</strong>：假设接收方的初始窗口大小为 10,000 字节，发送方可以在不等待确认的情况下发送最多 10,000 字节的数据。当接收方处理完数据后，可以将窗口大小更新为 5,000 字节。如果接收方的缓冲区为空，又可以上调窗口大小为 8,000 字节。</li>
</ul>
<ol start="3">
<li>自动调整过程</li>
</ol>
<ul>
<li><strong>流量控制的循环</strong>：
<ol>
<li>当接收方缓冲区有更多空间时，它会发送窗口更新消息，允许发送方继续发送数据。</li>
<li>当接收方的缓冲区接近满负荷时，会将窗口大小设置为 0，指示发送方暂时停止发送数据。</li>
<li>发送方随后开始监控窗口更新，并在接收到新的窗口大小后继续发送数据。</li>
</ol>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131204815.png" alt="" /></p>
<h3 id="流量控制的优缺点"><a class="header" href="#流量控制的优缺点">流量控制的优缺点</a></h3>
<p>优点</p>
<ol>
<li><strong>保护接收方</strong>：避免由于接收方处理能力不足而导致的数据丢失和网络拥塞。</li>
<li><strong>灵活性</strong>：窗口大小的动态调整能够根据不同的网络条件优化数据传输。</li>
<li><strong>提升可靠性</strong>：能够确保所有数据在传输过程中保持完整与有序。</li>
</ol>
<p>缺点</p>
<ol>
<li><strong>延迟增加</strong>：如果接收方的缓冲区设置小，可能导致发送方频繁暂停，影响整体的传输效率。</li>
<li><strong>传输优化复杂性</strong>：在高带宽延迟的条件下，流量控制可能无法充分利用带宽（如 TCP 的慢启动机制）。</li>
<li><strong>额外的开销</strong>：流量控制需要额外的控制报文，可能增加网络流量。</li>
</ol>
<h3 id="与拥塞控制的区别"><a class="header" href="#与拥塞控制的区别">与拥塞控制的区别</a></h3>
<ul>
<li><strong>流量控制</strong>：主要关注接收方的处理能力，确保不会因接收方缓冲区不足而丢失数据。</li>
<li><strong>拥塞控制</strong>：关注整个网络的状态，确保网络资源的合理使用，防止避免带宽过载和数据包丢失。</li>
</ul>
<h3 id="适用场景"><a class="header" href="#适用场景">适用场景</a></h3>
<p>TCP 流量控制适用于多种场景，尤其在以下情况下效果显著：</p>
<ul>
<li><strong>文件传输</strong>：如 FTP 协议，确保文件在传输过程中不会因为接收方的处理能力不足而被丢失。</li>
<li><strong>实时应用</strong>：如视频流和 VoIP 通信，能够动态调整流量以适应网络状况。</li>
</ul>
<h2 id="tcp-拥塞控制"><a class="header" href="#tcp-拥塞控制">TCP 拥塞控制</a></h2>
<p>TCP 拥塞控制是确保网络稳定性和高效性的重要机制。它通过监控网络状态，调整数据传输速率，从而避免引发拥塞，确保网络资源的合理分配。拥塞控制是通过控制发送数据的速率和数量来完成的，以避免网络在传输时过载。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131204853.png" alt="" /></p>
<p>TCP 拥塞控制为解决网络拥塞问题提供了一系列高效的工具，确保了数据可靠和高效地在不同的网络条件下传输。通过不同的模式和算法，TCP 能够动态适应网络的变化，处理数据流量，保证了互联网服务的稳定性和可靠性。</p>
<h3 id="拥塞控制的目标"><a class="header" href="#拥塞控制的目标">拥塞控制的目标</a></h3>
<ul>
<li><strong>避免丢包</strong>：通过控制发送速率，减少数据包在网络中丢失的可能性。</li>
<li><strong>提高网络利用率</strong>：在网络状态良好时，尽可能提高数据传输的效率和速率。</li>
<li><strong>公平性</strong>：确保在同一网络中不同连接之间的流量分配尽量公平，防止某个连接占用过多资源。</li>
</ul>
<h3 id="拥塞控制的工作原理"><a class="header" href="#拥塞控制的工作原理">拥塞控制的工作原理</a></h3>
<p>TCP 的拥塞控制主要依赖于以下四种算法：</p>
<ol>
<li><strong>慢启动（Slow Start）</strong></li>
<li><strong>拥塞避免（Congestion Avoidance）</strong></li>
<li><strong>快速重传（Fast Retransmit）</strong></li>
<li><strong>快速恢复（Fast Recovery）</strong></li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131204936.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131205018.png" alt="" /></p>
<h4 id="1-慢启动slow-start"><a class="header" href="#1-慢启动slow-start">1. 慢启动（Slow Start）</a></h4>
<ul>
<li>
<p><strong>定义</strong>：慢启动是 TCP 拥塞控制的初始阶段，用于避免网络的初始拥塞。在这个阶段，TCP 会以指数方式增加发送窗口（cwnd），逐步测试网络的承载能力。</p>
</li>
<li>
<p><strong>工作机制</strong>：</p>
<ul>
<li>初始化时，cwnd（拥塞窗口）通常设置为 1-2 个最大报文段（MSS）。</li>
<li>每当收到一个确认（ACK），cwnd 就增加 1（每次成功发送一段数据包）。</li>
<li>当收到的 ACK 数量为 cwnd 的值时，cwnd 就加倍，形成指数增长。</li>
</ul>
</li>
<li>
<p><strong>例子</strong>：</p>
<ul>
<li>在每个 RTT（往返时延）内，假设在第一轮发送 1 MSS，确认到达后 cwnd 变为 2 MSS，第二轮发送 2 MSS，再次确认到达后 cwnd 变为 4 MSS，如此类推，直到达到阈值。</li>
</ul>
</li>
</ul>
<h4 id="2-拥塞避免congestion-avoidance"><a class="header" href="#2-拥塞避免congestion-avoidance">2. 拥塞避免（Congestion Avoidance）</a></h4>
<ul>
<li>
<p><strong>定义</strong>：当 cwnd 达到一个预设的阈值（ssthresh, slow start threshold）后，TCP 进入拥塞避免阶段。</p>
</li>
<li>
<p><strong>工作机制</strong>：</p>
<ul>
<li>在这一阶段，cwnd 以线性方式增长。每接收到一个 ACK，只增加 1/cwnd。其增长的速率比慢启动阶段缓慢得多，以避免网络拥堵。</li>
</ul>
</li>
<li>
<p><strong>例子</strong>：</p>
<ul>
<li>如果 cwnd 当前值为 16 MSS，当产生一个新的 ACK 时，cwnd 仅增加 1，使得下一轮发送的数据量较之前增长缓慢。</li>
</ul>
</li>
</ul>
<h4 id="3-快速重传fast-retransmit"><a class="header" href="#3-快速重传fast-retransmit">3. 快速重传（Fast Retransmit）</a></h4>
<ul>
<li>
<p><strong>定义</strong>：此机制用于在数据包丢失时进行快速重传，减少等待超时的时间。</p>
</li>
<li>
<p><strong>工作机制</strong>：</p>
<ul>
<li>当接收方收到乱序的数据包时，会向发送方发送重复的 ACK。连续收到三个相同的 ACK 可以认为是数据包的丢失，此时发送方会立即重传丢失的数据包，而不必等待重传超时。</li>
</ul>
</li>
<li>
<p><strong>优点</strong>：</p>
<ul>
<li>提高了响应速度；比依赖超 time-out 重传效率更高。</li>
</ul>
</li>
</ul>
<h4 id="4-快速恢复fast-recovery"><a class="header" href="#4-快速恢复fast-recovery">4. 快速恢复（Fast Recovery）</a></h4>
<ul>
<li>
<p><strong>定义</strong>：在触发快速重传后，进入快速恢复阶段。用于在丢包发生后先继续传输数据，再逐渐增加 cwnd 以恢复到较高的发送速率。</p>
</li>
<li>
<p><strong>工作机制</strong>：</p>
<ul>
<li>当触发快速重传时，ssthresh 被设置为当前 cwnd 值的一半。</li>
<li>cwnd 在重传后的每次收到 ACK 时增加 1，直至达到 ssthresh，后进入拥塞避免阶段。</li>
</ul>
</li>
</ul>
<h3 id="超时重传时间的选择"><a class="header" href="#超时重传时间的选择">超时重传时间的选择</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131205133.png" alt="" /></p>
<h3 id="tcp-拥塞控制的整体流程"><a class="header" href="#tcp-拥塞控制的整体流程">TCP 拥塞控制的整体流程</a></h3>
<ol>
<li>
<p><strong>连接开始</strong>：</p>
<ul>
<li>TCP 在连接时进入慢启动阶段，逐步增加 cwnd，以了解网络的可用带宽。</li>
</ul>
</li>
<li>
<p><strong>达到拥塞阈值</strong>：</p>
<ul>
<li>一旦 cwnd 达到 ssthresh，转入拥塞避免模式，通过线性增加 cwnd 继续稳定数据传输。</li>
</ul>
</li>
<li>
<p><strong>发生拥塞</strong>：</p>
<ul>
<li>当丢包被检测（如通过重传或接收到三次重复 ACK），TCP 迅速进入快速重传和快速恢复阶段。</li>
<li>cwnd 被调整，以避免进一步的丢包，并根据当前网络状况逐步恢复数据发送。</li>
</ul>
</li>
<li>
<p><strong>拥塞恢复</strong>：</p>
<ul>
<li>持续增(减)少 cwnd 以适应网络实际情况，确保流量的有效传输。</li>
</ul>
</li>
</ol>
<h3 id="拥塞控制的进步与挑战"><a class="header" href="#拥塞控制的进步与挑战">拥塞控制的进步与挑战</a></h3>
<p>进步</p>
<ul>
<li><strong>TCP Vegas</strong>：改进传统结构，基于 RTT 估算拥塞，提前进行拥塞避免。</li>
<li><strong>TCP Reno</strong>：集成了快重传与快恢复机制，有效提升了传输的灵活性与鲁棒性。</li>
<li><strong>TCP BBR</strong>：采用带宽和往返时延分析，实现观测与反馈控制，增强对动态网络环境的适应性。</li>
</ul>
<p>挑战</p>
<ul>
<li><strong>网络变化</strong>：在高度动态的网络环境中，如无线网络，拥塞控制算法需要灵活调整以适应频繁的带宽变化。</li>
<li><strong>公平性问题</strong>：多个 TCP 连接共享相同的带宽时，需要解决竞争与公平性的问题，确保没有一种连接异常占用大部分资源。</li>
</ul>
<h2 id="tcp-可靠传输"><a class="header" href="#tcp-可靠传输">TCP 可靠传输</a></h2>
<p>TCP（传输控制协议）是一种面向连接的协议，设计旨在提供可靠的数据传输服务。它确保数据从发送方到接收方的完整性、顺序性和无差错性。TCP 通过多个机制和算法实现这一目标，下面将详细介绍这些机制。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131205229.png" alt="" /></p>
<p>TCP 的可靠传输机制通过数据分段、序列号、确认应答、重传机制、校验和、流量控制及拥塞控制等多种手段，确保数据在不可靠网络上的安全、高效传输。这样的设计使得它成为互联网应用的基础，为数据的无失真、按序、按需传输提供了保证。</p>
<h3 id="可靠传输的关键机制"><a class="header" href="#可靠传输的关键机制">可靠传输的关键机制</a></h3>
<ol>
<li><strong>数据分段</strong></li>
<li><strong>序列号</strong></li>
<li><strong>确认应答</strong></li>
<li><strong>重传机制</strong></li>
<li><strong>校验和</strong></li>
<li><strong>流量控制</strong></li>
<li><strong>拥塞控制</strong></li>
</ol>
<h4 id="1-数据分段"><a class="header" href="#1-数据分段">1. 数据分段</a></h4>
<ul>
<li><strong>定义</strong>：TCP 将传输的数据流分割成适合网络传输的大小的多个数据段（segments）。</li>
<li><strong>作用</strong>：每个数据段都有自己的 TCP 头部，包含序列号和其他控制信息，便于确保每部分数据在传输中的完整性与顺序。</li>
</ul>
<h4 id="2-序列号"><a class="header" href="#2-序列号">2. 序列号</a></h4>
<ul>
<li><strong>定义</strong>：每个 TCP 数据段都包括一个序列号，唯一标识数据段的顺序。</li>
<li><strong>作用</strong>：接收方可以根据序列号重新组装数据，确保数据按正确的顺序交付给应用层。</li>
</ul>
<h4 id="3-确认应答ack"><a class="header" href="#3-确认应答ack">3. 确认应答（ACK）</a></h4>
<ul>
<li><strong>定义</strong>：接收方在成功接收到数据段后，会发送一个 ACK 包回给发送方，告知已成功接收到哪个序列号的数据。</li>
<li><strong>作用</strong>：通过确认应答机制，发送方可以了解到哪些数据段已经安全到达，进而决定是否需要重传丢失的部分。</li>
</ul>
<h4 id="4-重传机制"><a class="header" href="#4-重传机制">4. 重传机制</a></h4>
<ul>
<li><strong>定义</strong>：如果发送方在超时时间内未收到某个数据段的确认应答，它会认为该数据段在传输过程中丢失，并重传该数据段。</li>
<li><strong>快速重传</strong>：接收方会发送重复的 ACK，以指示丢失的数据段位置，发送方会立即重传丢失的部分，减少传输延迟。</li>
</ul>
<h4 id="5-校验和"><a class="header" href="#5-校验和">5. 校验和</a></h4>
<ul>
<li><strong>定义</strong>：TCP 在每个数据段中包含一个校验和字段，用于检测数据传输中可能发生的错误。</li>
<li><strong>作用</strong>：接收方在接收数据段后，会计算该数据段的校验和与头部的校验和进行比较。如果不匹配，接收方可确定该数据段存在错误，要求重传。</li>
</ul>
<h4 id="6-流量控制"><a class="header" href="#6-流量控制">6. 流量控制</a></h4>
<ul>
<li><strong>定义</strong>：TCP 使用流量控制机制（如滑动窗口）以确定发送方可发送的数据量，以防止接收方因负载过重而丢失数据。</li>
<li><strong>作用</strong>：通过动态调整窗口大小，使得接收方不会因无法及时处理数据而出现缓冲区溢出。</li>
</ul>
<h4 id="7-拥塞控制"><a class="header" href="#7-拥塞控制">7. 拥塞控制</a></h4>
<ul>
<li><strong>定义</strong>：TCP 采用拥塞控制算法（如慢启动、拥塞避免、快速重传和快速恢复）调节网络流量，以防止网络拥塞。</li>
<li><strong>作用</strong>：在网络负载过高时，控制数据的发送速率，减少数据丢失，提高网络的整体稳定性和可靠性。</li>
</ul>
<h3 id="tcp-可靠传输的工作流程"><a class="header" href="#tcp-可靠传输的工作流程">TCP 可靠传输的工作流程</a></h3>
<ol>
<li><strong>连接建立</strong>：通过三次握手（SYN, SYN-ACK, ACK）建立连接，使发送方和接收方都知道连接状态。</li>
<li><strong>数据发送</strong>：
<ul>
<li>发送方分段并发送数据。</li>
<li>每个数据段会带有序列号，并且在发送时会启动计时器监测确认应答的接收。</li>
</ul>
</li>
<li><strong>接收和确认</strong>：
<ul>
<li>接收方接收数据段并检查校验和，确认数据的完整性。</li>
<li>对成功接收到的数据段发送 ACK，告知发送方已接收的数据的序列号。</li>
</ul>
</li>
<li><strong>重传机制</strong>：
<ul>
<li>发送方监测超时情况或接收到重复 ACK 时，进行相应的数据重传。</li>
</ul>
</li>
<li><strong>连接终止</strong>：数据传输完毕后，通过四次挥手（FIN, ACK, FIN, ACK）来优雅地关闭连接，确保所有数据均已发送且确认。</li>
</ol>
<h3 id="可靠性保证的案例"><a class="header" href="#可靠性保证的案例">可靠性保证的案例</a></h3>
<ul>
<li><strong>文件传输协议（FTP）</strong>：要求文件被完整且准确地传输，通常使用 TCP 实现其可靠数据传输。</li>
<li><strong>邮件传输协议（SMTP）</strong>：发送邮件时，依赖于 TCP 确保邮件内容的完整性。</li>
</ul>
<h2 id="tcp运输连接管理连接建立和连接释放"><a class="header" href="#tcp运输连接管理连接建立和连接释放">TCP运输连接管理（连接建立和连接释放）</a></h2>
<p>TCP（传输控制协议）是一个面向连接的协议，这意味着在双方开始数据传输之前，必须首先建立一个连接。在传输结束后，必须优雅地释放这个连接。连接的建立和释放过程使用特定的机制来确保双方都完全同步。下面将详细介绍TCP的连接建立和连接释放过程。</p>
<p>TCP连接的建立和释放都是基于严格的协议规范，通过三次握手和四次挥手的过程，确保了在通信双方之间保持同步，明确连接的状态。这一机制有效防止了数据的丢失和通信的不完整，是TCP能够提供可靠传输的重要因素。</p>
<h3 id="连接建立"><a class="header" href="#连接建立">连接建立</a></h3>
<p>TCP使用**三次握手（Three-Way Handshake）**协议来建立连接。过程中，客户端和服务器之间通过交换特定的报文来确保双方都处于准备状态。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131205653.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131211031.png" alt="" /></p>
<h4 id="三次握手的具体步骤"><a class="header" href="#三次握手的具体步骤">三次握手的具体步骤</a></h4>
<ol>
<li>
<p><strong>SYN（Synchronize）</strong></p>
<ul>
<li><strong>发起方</strong>（客户端）向<strong>目标方</strong>（服务器）发送一个SYN包，表明希望建立连接，并指定一个初始的序列号（ISN，Initial Sequence Number）。</li>
<li>这一步开始了连接的请求。</li>
</ul>
<p><strong>示例</strong>：</p>
<ul>
<li>客户端：<code>SYN, Seq = x</code></li>
</ul>
</li>
<li>
<p><strong>SYN-ACK（Synchronize-Acknowledge）</strong></p>
<ul>
<li><strong>目标方</strong>（服务器）收到SYN包后，如果同意建立连接，就会回复一个SYN-ACK包。这个包中既包含ACK确认字段，确认客户端的SYN请求（Seq = x），又包含服务器自己所选择的初始序列号（Seq = y）。</li>
<li>这一步完成了对发起连接请求的确认。</li>
</ul>
<p><strong>示例</strong>：</p>
<ul>
<li>服务器：<code>SYN-ACK, Seq = y, Ack = x+1</code></li>
</ul>
</li>
<li>
<p><strong>ACK（Acknowledge）</strong></p>
<ul>
<li><strong>发起方</strong>（客户端）收到SYN-ACK包后，发送一个ACK包，确认收到了服务器的SYN-ACK包。此ACK包的确认号（Ack）为服务器的序列号加1（Ack = y+1）。</li>
<li>这一过程结束了连接的建立。</li>
</ul>
<p><strong>示例</strong>：</p>
<ul>
<li>客户端：<code>ACK, Seq = x+1, Ack = y+1</code></li>
</ul>
</li>
</ol>
<p>完成这三次握手后，TCP连接就建立成功，双方可以开始进行数据传输。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131211015.png" alt="" /></p>
<h3 id="连接释放"><a class="header" href="#连接释放">连接释放</a></h3>
<p>TCP使用**四次挥手（Four-Way Handshake）**来释放连接，确保双方都确认停止数据传输，并正确关闭连接。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131211112.png" alt="" /></p>
<h4 id="四次挥手的具体步骤"><a class="header" href="#四次挥手的具体步骤">四次挥手的具体步骤</a></h4>
<ol>
<li>
<p><strong>FIN（Finish）</strong></p>
<ul>
<li>某一方（假设为发起方）决定关闭连接，它会向另一方（目标方）发送一个FIN包，表示希望终止数据传输。此FIN包带有一个序列号。</li>
<li>这表明发起方没有更多数据要发送。</li>
</ul>
<p><strong>示例</strong>：</p>
<ul>
<li>发起方：<code>FIN, Seq = a</code></li>
</ul>
</li>
<li>
<p><strong>ACK（Acknowledge）</strong></p>
<ul>
<li>目标方收到FIN包后，发送一个ACK包，确认发起方的请求。此ACK包的确认号（Ack）为发起方的序列号加1（Ack = a+1）。此时，目标方可以继续接收数据，直到它准备好关闭连接。</li>
<li>这一步标志着目标方已经同意关闭连接，但仍然可以发送数据。</li>
</ul>
<p><strong>示例</strong>：</p>
<ul>
<li>目标方：<code>ACK, Seq = b, Ack = a+1</code></li>
</ul>
</li>
<li>
<p><strong>FIN</strong></p>
<ul>
<li>目标方在完成数据发送后，向发起方发送一个FIN包，表示它也没有更多数据要发送，并请求关闭连接。</li>
<li>目标方同样会选择一个序列号。</li>
</ul>
<p><strong>示例</strong>：</p>
<ul>
<li>目标方：<code>FIN, Seq = c</code></li>
</ul>
</li>
<li>
<p><strong>ACK（Acknowledge）</strong></p>
<ul>
<li>发起方接收到目标方的FIN包，发送一个ACK包作为确认。该ACK包的确认号（Ack）为目标方的序列号加1（Ack = c+1）。</li>
<li>此时，发起方完成了对连接的释放过程。</li>
</ul>
<p><strong>示例</strong>：</p>
<ul>
<li>发起方：<code>ACK, Seq = a+1, Ack = c+1</code></li>
</ul>
</li>
</ol>
<p>在此四次挥手之后，TCP连接被成功释放。此时，两方资源均可重新分配以供其他连接使用。</p>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="应用层"><a class="header" href="#应用层">应用层</a></h1>
<ul>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#%E5%BA%94%E7%94%A8%E5%B1%82%E6%A6%82%E8%BF%B0">应用层概述</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#cs%E6%A8%A1%E5%BC%8F%E4%B8%8Ep2p%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%BC%82%E5%90%8C">C/S模式与P2P模式的异同</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AEdhcp">动态主机配置协议（DHCP）</a>
<ul>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD">主要功能</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#dhcp-%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">DHCP 工作原理</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#dhcp%E4%B8%AD%E7%BB%A7%E4%BB%A3%E7%90%86">DHCP中继代理</a></li>
</ul>
</li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#dhcp-%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9">DHCP 的优缺点</a>
<ul>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#%E4%BC%98%E7%82%B9">优点</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#%E7%BC%BA%E7%82%B9">缺点</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#dhcp-%E4%B8%8E%E5%85%B6%E4%BB%96%E5%8D%8F%E8%AE%AE%E7%9A%84%E6%AF%94%E8%BE%83">DHCP 与其他协议的比较</a></li>
</ul>
</li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9Fdns">域名系统（DNS）</a>
<ul>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#dns-%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD">DNS 的主要功能</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#dns-%E7%9A%84%E7%BB%93%E6%9E%84">DNS 的结构</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#dns-%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B">DNS 工作过程</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#dns-%E7%9A%84%E8%80%97%E6%97%B6%E4%B8%8E%E6%80%A7%E8%83%BD%E8%80%83%E8%99%91">DNS 的耗时与性能考虑</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#dns-%E5%AE%89%E5%85%A8%E6%80%A7">DNS 安全性</a></li>
</ul>
</li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE-ftp">文件传输协议 (FTP)</a>
<ul>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#ftp-%E7%9A%84%E4%B8%BB%E8%A6%81%E7%89%B9%E7%82%B9">FTP 的主要特点</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#ftp-%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">FTP 的工作原理</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#ftp-%E5%91%BD%E4%BB%A4%E7%A4%BA%E4%BE%8B">FTP 命令示例</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#ftp-%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9">FTP 的优缺点</a>
<ul>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#%E4%BC%98%E7%82%B9-1">优点</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#%E7%BC%BA%E7%82%B9-1">缺点</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6-email">电子邮件 (Email)</a>
<ul>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E7%9A%84%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86">电子邮件的组成部分</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">电子邮件工作原理</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E7%9A%84%E6%A0%BC%E5%BC%8F">电子邮件的格式</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9">电子邮件的优缺点</a></li>
</ul>
</li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#%E4%B8%87%E7%BB%B4%E7%BD%91www%E5%8D%8F%E8%AE%AE">万维网（WWW）协议</a>
<ul>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#%E5%85%B3%E9%94%AE%E7%BB%84%E4%BB%B6">关键组件</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#www-%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">WWW 协议的工作原理</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#http-%E5%92%8C-https">HTTP 和 HTTPS</a></li>
<li><a href="%E5%BA%94%E7%94%A8%E5%B1%82.html#url-%E7%9A%84%E7%BB%84%E6%88%90">URL 的组成</a></li>
</ul>
</li>
</ul>
<h2 id="应用层概述"><a class="header" href="#应用层概述">应用层概述</a></h2>
<p>在计算机网络中，<strong>应用层</strong>是OSI模型的第七层，负责为用户和应用程序提供网络服务。应用层的主要功能包括：</p>
<ol>
<li><strong>协议支持</strong>：为各类应用程序提供必要的协议，如HTTP、FTP、SMTP等。</li>
<li><strong>数据表示</strong>：处理数据格式、编码和转换，以确保不同系统间的数据可以被理解。</li>
<li><strong>会话管理</strong>：建立、管理和终止会话，确保数据在网络中的流动有序和可靠。</li>
</ol>
<p>应用层直接与用户交互，利用下层的运输层提供的服务，完成数据的发送和接收。</p>
<p>我们在浏览器的地址中输入某个网站的域名后，就可以访问该网站的内容，这个就是<strong>万维网WWW应用</strong>，其相关的应用层协议为<strong>超文本传送协议HTTP</strong></p>
<p>用户在浏览器地址栏中输入的是“见名知意”的<strong>域名</strong>，而TCP/IP的网际层使用<strong>IP地址</strong>来表示目的主机，从域名到IP地址的装转换，由属于<strong>应用层范畴的域名系统DNS</strong>，在后台帮用户完成。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131173839.png" alt="" /></p>
<h2 id="cs模式与p2p模式的异同"><a class="header" href="#cs模式与p2p模式的异同">C/S模式与P2P模式的异同</a></h2>
<div class="table-wrapper"><table><thead><tr><th>特性</th><th>C/S模式</th><th>P2P模式</th></tr></thead><tbody>
<tr><td>架构类型</td><td>客户端-服务器（Client/Server）</td><td>对等网络（Peer-to-Peer）</td></tr>
<tr><td>角色</td><td>明确的客户端与服务器角色</td><td>每个节点都有客户端和服务器的功能</td></tr>
<tr><td>数据处理</td><td>服务器集中处理数据，客户端请求服务</td><td>节点之间直接传输数据，相互处理数据</td></tr>
<tr><td>拓展性</td><td>服务器的负担可能随着用户增加而增加，扩展难度大</td><td>易于扩展，增加节点可直接参与网络</td></tr>
<tr><td>资源共享</td><td>服务器资源集中管理</td><td>节点资源去中心化，资源由所有参与者共享</td></tr>
<tr><td>可靠性</td><td>服务器故障可能导致整个系统不可用</td><td>节点故障不会影响整个网络，系统更为稳定</td></tr>
<tr><td>安全性</td><td>服务器集中管理安全措施，易于控制</td><td>安全性分散，需更强的对等节点间安全协议</td></tr>
</tbody></table>
</div>
<p>C/S模式适合于需要集中管理和高安全性的场景，而P2P模式则更适合于去中心化和资源共享的应用需求。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131174010.png" alt="" /></p>
<h2 id="动态主机配置协议dhcp"><a class="header" href="#动态主机配置协议dhcp">动态主机配置协议（DHCP）</a></h2>
<p><strong>动态主机配置协议（DHCP, Dynamic Host Configuration Protocol）</strong> 是一种网络管理协议，用于动态分配 IP 地址和其他网络配置参数给网络中的计算机和设备。这使得设备在加入网络时无需手动配置，简化了网络管理。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131181125.png" alt="" /></p>
<p>DHCP 是现代网络中不可或缺的一部分，通过简化 IP 地址的分配和管理，提高了网络的灵活性与可维护性。适用于绝大多数需要频繁变动设备连接的场景，如企业办公环境、校园网络等。</p>
<h3 id="主要功能"><a class="header" href="#主要功能">主要功能</a></h3>
<ol>
<li><strong>自动配置 IP 地址</strong>：DHCP 服务器为 DHCP 客户端动态分配可用的 IP 地址，避免了手动设置的复杂性和潜在错误。</li>
<li><strong>传递网络参数</strong>：除了 IP 地址，DHCP 还可以提供其他网络配置参数，如子网掩码、默认网关、DNS 服务器等。</li>
<li><strong>地址租用</strong>：DHCP 实施地址租用协议，给设备分配 IP 地址的时间限制，确保 IP 地址资源的有效利用。</li>
<li><strong>易于管理</strong>：网络管理员可以集中管理和监控整个网络的中所有 IP 地址的分配状态，方便进行维护和故障排查。</li>
</ol>
<h3 id="dhcp-工作原理"><a class="header" href="#dhcp-工作原理">DHCP 工作原理</a></h3>
<p>DHCP 的工作机制一般分为以下几个步骤：</p>
<ol>
<li><strong>DHCP Discover</strong>：当设备连接到网络时，它会发送一个 DHCP Discover 广播包，试图找到可用的 DHCP 服务器。</li>
<li><strong>DHCP Offer</strong>：DHCP 服务器收到 Discover 消息后，回复一个 DHCP Offer 消息，其中包含了可用的 IP 地址和其他配置信息。</li>
<li><strong>DHCP Request</strong>：客户端接收到多个 Offer 后，会选择其中一个并发送 DHCP Request 消息，表明接受该 Offer。</li>
<li><strong>DHCP Acknowledgment (ACK)</strong>：DHCP 服务器确认客户端的请求，并发送 DHCP ACK 消息，最终完成配置。</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131180512.png" alt="" /></p>
<h3 id="dhcp中继代理"><a class="header" href="#dhcp中继代理">DHCP中继代理</a></h3>
<p>使用DHCP中继代理是因为我们不用给每一个网络上都设置一个DHCP服务器。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131180635.png" alt="" /></p>
<h2 id="dhcp-的优缺点"><a class="header" href="#dhcp-的优缺点">DHCP 的优缺点</a></h2>
<h3 id="优点"><a class="header" href="#优点">优点</a></h3>
<ul>
<li><strong>简化管理</strong>：自动化 IP 地址配置，减少了手动错误和管理成本。</li>
<li><strong>动态分配</strong>：可以根据需求动态调整 IP 地址的分配，提高地址利用率。</li>
<li><strong>集中管理</strong>：网络管理员可以通过统一的 DHCP 服务器管理所有设备的网络配置。</li>
</ul>
<h3 id="缺点"><a class="header" href="#缺点">缺点</a></h3>
<ul>
<li><strong>单点故障</strong>：如果 DHCP 服务器故障，网络中的设备将无法获得地址，可能会影响网络可用性。</li>
<li><strong>安全风险</strong>：未经过身份验证的 DHCP 服务器可能会影响网络安全，导致 IP 地址冲突或恶意配置。</li>
<li><strong>延迟</strong>：DHCP 流程中涉及多个步骤，可能导致设备连接网络的时间延迟。</li>
</ul>
<h3 id="dhcp-与其他协议的比较"><a class="header" href="#dhcp-与其他协议的比较">DHCP 与其他协议的比较</a></h3>
<ul>
<li><strong>静态 IP 地址分配</strong>：与 DHCP 相比，静态 IP 地址需要手动配置，适合一些需要固定地址的设备，如服务器和打印机。</li>
<li><strong>BOOTP 协议</strong>：DHCP 是 BOOTP 的扩展，除了提供 IP 地址外，还能传递更多的网络配置信息。</li>
</ul>
<h2 id="域名系统dns"><a class="header" href="#域名系统dns">域名系统（DNS）</a></h2>
<p><strong>域名系统（DNS, Domain Name System）</strong> 是互联网的核心组件之一，负责将用户友好的域名（如 <code>www.example.com</code>）转换为机器可读的 IP 地址（如 192.0.2.1），从而允许用户通过简单的文字形式访问网络资源。DNS 使得互联网使用更加便捷，避免了用户记忆复杂数字地址的困扰。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131181504.png" alt="" /></p>
<p>DNS 是现代互联网不可或缺的一部分，它通过将易于理解的域名与机器可读的 IP 地址关联，使得用户可以方便地访问在线资源。其工作过程涉及多层次的查询机制，提高了网络的可用性和可管理性。尽管存在一些安全隐患，但凭借协议升级和技术演进，DNS 的稳定性和安全性不断提升。</p>
<h3 id="dns-的主要功能"><a class="header" href="#dns-的主要功能">DNS 的主要功能</a></h3>
<ol>
<li><strong>名称解析</strong>：将域名转换为 IP 地址，使得应用程序可以找到和联系服务器。</li>
<li><strong>负载均衡</strong>：通过 DNS 可以将用户请求分发到多个服务器上，实现负载均衡。</li>
<li><strong>邮件交换（MX）记录</strong>：指明负责处理邮件的服务器，支持电子邮件的流动。</li>
<li><strong>其他记录类型</strong>：如 CNAME（别名记录）、TXT（文本记录）等，提供更多功能。</li>
</ol>
<h3 id="dns-的结构"><a class="header" href="#dns-的结构">DNS 的结构</a></h3>
<p>DNS 是一个分层的系统，主要由以下几个部分组成：</p>
<ol>
<li><strong>根域名服务器</strong>：位于最顶层，管理顶级域（例如 .com, .org, .net 等）。</li>
<li><strong>顶级域名服务器</strong>：负责管理各个顶级域名下的区域（如 .com 下的各个公司域名）。</li>
<li><strong>权威域名服务器</strong>：存储特定域的 DNS 记录，提供该域名的最终解析结果。</li>
</ol>
<h3 id="dns-工作过程"><a class="header" href="#dns-工作过程">DNS 工作过程</a></h3>
<p>DNS 工作的过程通常包括以下几个步骤：</p>
<ol>
<li>
<p><strong>查询发起</strong>：</p>
<ul>
<li>用户在浏览器中输入域名（如 <code>www.example.com</code>），浏览器会首先检查本地缓存是否有该域名的 IP 地址。</li>
</ul>
</li>
<li>
<p><strong>DNS Resolver</strong>：</p>
<ul>
<li>如果本地缓存中没有对应记录，浏览器会向 <strong>DNS 解析器</strong> 发起请求。解析器通常由用户的 ISP 提供。</li>
</ul>
</li>
<li>
<p><strong>根域名服务器查询</strong>：</p>
<ul>
<li>解析器向根域名服务器发送请求，询问指定域名的权威服务器地址，根服务器返回指向顶级域（如 .com）的服务器地址。</li>
</ul>
</li>
<li>
<p><strong>顶级域名服务器查询</strong>：</p>
<ul>
<li>解析器随后向顶级域名服务器发送请求，询问目标域名的权威服务器，顶级服务器返回对应的权威域名服务器地址。</li>
</ul>
</li>
<li>
<p><strong>权威域名服务器查询</strong>：</p>
<ul>
<li>解析器接着向权威域名服务器发送请求，获取最终的 IP 地址，该服务器返回域名对应的 IP 地址。</li>
</ul>
</li>
<li>
<p><strong>返回结果</strong>：</p>
<ul>
<li>解析器将接收到的 IP 地址返回给用户的浏览器，浏览器使用该地址建立连接，访问目标网站。</li>
</ul>
</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131181558.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131181634.png" alt="" /></p>
<p>并行查询与缓存</p>
<ul>
<li><strong>并行查询</strong>：为了加快解析速度，解析器通常会同时进行多个查询。</li>
<li><strong>缓存</strong>：为了减轻 DNS 服务器负担，提高解析效率，DNS 解析器和浏览器通常会缓存 DNS 查询结果，在一定时间内再请求同一域名时直接使用缓存的结果。</li>
</ul>
<h3 id="dns-的耗时与性能考虑"><a class="header" href="#dns-的耗时与性能考虑">DNS 的耗时与性能考虑</a></h3>
<ul>
<li><strong>TTL（生存时间）</strong>：每个 DNS 记录都有一个 TTL 值，表示该记录在缓存中的有效时间。TTL 时间到之后，缓存会失效，并需重新查询。</li>
<li><strong>负载均衡</strong>：通过设定多个 A 记录（同一域名指向多个 IP 地址），实现负载均衡与故障转移。</li>
</ul>
<h3 id="dns-安全性"><a class="header" href="#dns-安全性">DNS 安全性</a></h3>
<p>随着 DNS 的普及，也面临安全挑战：</p>
<ul>
<li><strong>DNS 欺骗</strong>：攻击者通过伪造 DNS 响应，导致用户访问恶意网站。</li>
<li><strong>DDoS 攻击</strong>：分布式拒绝服务攻击可能针对 DNS 服务器，造成服务瘫痪。</li>
</ul>
<p>为了解决这些问题，DNSSEC（DNS 安全扩展）等协议被提出，可以为 DNS 响应提供数字签名，以确保数据的完整性和真实性。</p>
<h2 id="文件传输协议-ftp"><a class="header" href="#文件传输协议-ftp">文件传输协议 (FTP)</a></h2>
<p><strong>文件传输协议（FTP, File Transfer Protocol）</strong> 是一种用于在计算机网络中进行文件传输的标准网络协议。FTP 是 TCP/IP 协议簇的一部分，设计之初就是为了在不同主机之间方便地交换文件。此协议支持登录功能以及文件的上传、下载、删除、重命名、移动等多种操作。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131183328.png" alt="" /></p>
<p>文件传输协议（FTP）是一个功能强大的文件传输工具，广泛应用于网页开发、备份和文件共享等场景。虽然其安全性存在不足，但在内部网络或私有环境中仍能有效地满足文件传输的需求。针对安全问题，用户可考虑使用基于 FTP 的安全变种（如 SFTP）以保护数据传输的安全性。</p>
<h3 id="ftp-的主要特点"><a class="header" href="#ftp-的主要特点">FTP 的主要特点</a></h3>
<ol>
<li>
<p><strong>双通道传输</strong>：FTP 使用一个控制连接和一个或多个数据连接进行通信。控制连接用于命令和响应的传输，而数据连接用于传输实际的文件内容。</p>
</li>
<li>
<p><strong>匿名和身份验证</strong>：FTP 支持匿名访问（使用用户名为“anonymous”，密码通常为空），也支持用户通过用户名和密码进行身份验证。</p>
</li>
<li>
<p><strong>支持多种文件类型</strong>：FTP 可以传输文本文件和二进制文件，例如图片、视频、文档等。</p>
</li>
<li>
<p><strong>易于使用</strong>：FTP 客户端通常提供图形用户界面，使得文件传输过程更加直观即便不熟悉命令行操作的用户也可以轻松上手。</p>
</li>
</ol>
<h3 id="ftp-的工作原理"><a class="header" href="#ftp-的工作原理">FTP 的工作原理</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131182656.png" alt="" /></p>
<p>FTP 的工作过程通常可分为以下几个步骤：</p>
<ol>
<li>
<p><strong>建立控制连接</strong>：</p>
<ul>
<li>客户端首先与 FTP 服务器建立控制连接，通常使用 TCP 21 端口。客户端发送连接请求，服务器接收请求后返回响应，双方确认连接成功。</li>
</ul>
</li>
<li>
<p><strong>用户身份验证</strong>：</p>
<ul>
<li>用户使用命令（如 USER 和 PASS）进行身份验证。服务器验证用户名和密码，如果合法，则客户端获得访问权限。</li>
</ul>
</li>
<li>
<p><strong>建立数据连接</strong>：</p>
<ul>
<li>FTP 支持两种连接模式：主动模式和被动模式。</li>
<li><strong>主动模式</strong>（Port Mode）：客户端向服务器发送 PORT 命令，告知服务器客户端的 IP 地址和随机端口号，服务器随后通过该连接发送数据。</li>
<li><strong>被动模式</strong>（Passive Mode）：客户端向服务器发送 PASV 命令，服务器打开一个随机端口，并将该端口号发送给客户端，然后客户端通过该端口连接服务器以进行数据传输。</li>
</ul>
</li>
<li>
<p><strong>传输文件</strong>：</p>
<ul>
<li>客户端可以使用 FTP 命令（如 RETR 和 STOR）来下载（接收）和上传（发送）文件。</li>
<li>对于二进制文件，使用 <strong>BIN</strong> 命令切换到二进制模式传输文件；对于文本文件，使用 <strong>ASC</strong> 命令切换到 ASCII 模式。</li>
</ul>
</li>
<li>
<p><strong>关闭连接</strong>：</p>
<ul>
<li>传输完成后，客户端可以发送 QUIT 命令以结束会话，服务器会相应关闭控制连接和数据连接。</li>
</ul>
</li>
</ol>
<h3 id="ftp-命令示例"><a class="header" href="#ftp-命令示例">FTP 命令示例</a></h3>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131183401.png" alt="" /></p>
<ul>
<li>
<p><strong>用户登录</strong>：</p>
<pre><code>USER &lt;username&gt;
PASS &lt;password&gt;
</code></pre>
</li>
<li>
<p><strong>列出目录内容</strong>：</p>
<pre><code>LIST
</code></pre>
</li>
<li>
<p><strong>上传文件</strong>：</p>
<pre><code>STOR &lt;filename&gt;
</code></pre>
</li>
<li>
<p><strong>下载文件</strong>：</p>
<pre><code>RETR &lt;filename&gt;
</code></pre>
</li>
</ul>
<h3 id="ftp-的优缺点"><a class="header" href="#ftp-的优缺点">FTP 的优缺点</a></h3>
<h4 id="优点-1"><a class="header" href="#优点-1">优点</a></h4>
<ol>
<li><strong>简单易用</strong>：通过命令行或图形界面都能方便操作。</li>
<li><strong>多功能性</strong>：支持多种文件操作，如上传、下载、删除、重命名等。</li>
<li><strong>大文件支持</strong>：能够有效传输大容量的文件，适合文件备份和文件共享。</li>
</ol>
<h4 id="缺点-1"><a class="header" href="#缺点-1">缺点</a></h4>
<ol>
<li><strong>安全性较低</strong>：FTP 使用明文传输用户名和密码，容易受到网络窃听。为此，通常建议使用 SFTP 或 FTPS（FTP Secure）进行加密传输。</li>
<li><strong>火墙穿越问题</strong>：由于使用多个连接，FTP 在某些情况下可能会被企业防火墙阻止。</li>
</ol>
<h2 id="电子邮件-email"><a class="header" href="#电子邮件-email">电子邮件 (Email)</a></h2>
<p><strong>电子邮件（Email）</strong> 是一种基于互联网的通信方式，允许用户通过网络发送和接收文字、文件和其他类型数据。电邮以其快速、便捷和高效的特点，成为现代通信中不可或缺的工具，广泛应用于个人交流、商业沟通和新闻发布等多个领域。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131183721.png" alt="" /></p>
<p>电子邮件是实现现代通信的重要工具，其快速、便捷的特点使其广泛应用于个人和商业领域。尽管在安全性和隐私方面存在一些挑战，但通过合适的技术（如加密和反垃圾邮件系统），电子邮件的安全性和实用性得到了显著提高。</p>
<h3 id="电子邮件的组成部分"><a class="header" href="#电子邮件的组成部分">电子邮件的组成部分</a></h3>
<ol>
<li>
<p><strong>邮件客户端</strong>：这是用户用于撰写、发送、接收和管理电子邮件的软件或应用，如 Microsoft Outlook、Mozilla Thunderbird、或网页邮件服务（如 Gmail、Outlook.com）。</p>
</li>
<li>
<p><strong>邮件服务器</strong>：负责接收、存储和转发电子邮件的计算机。主要分为两类：</p>
<ul>
<li><strong>SMTP 服务器</strong>：负责发送邮件。</li>
<li><strong>POP3/IMAP 服务器</strong>：负责接收邮件，IMAP 支持多设备同步，POP3 通常下载邮件到本地只保留一份。</li>
</ul>
</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131183610.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131183642.png" alt="" /></p>
<h3 id="电子邮件工作原理"><a class="header" href="#电子邮件工作原理">电子邮件工作原理</a></h3>
<p>电子邮件的工作通常涉及以下几个步骤：</p>
<ol>
<li>
<p><strong>撰写邮件</strong>：</p>
<ul>
<li>用户使用邮件客户端撰写邮件，包括填入收件人地址、主题和邮件内容。邮件客户端将邮件内容封装为特定格式（通常为 MIME 格式）。</li>
</ul>
</li>
<li>
<p><strong>发送邮件</strong>：</p>
<ul>
<li>当用户点击“发送”按钮时，邮件客户端将通过 SMTP（简单邮件传输协议）与邮件服务器建立连接。</li>
<li>邮件客户端通过 SMTP 协议将邮件发送给 SMTP 服务器，SMTP 服务器验证邮件内容并将其排队发送。</li>
</ul>
</li>
<li>
<p><strong>邮件递送</strong>：</p>
<ul>
<li>SMTP 服务器接收邮件后，根据邮件头中的收件人地址，查找目标邮箱对应的 SMTP 服务器。如果目标SMTP服务器在同一网络，邮件直接传递；如果在不同网络，则通过 DNS 查找目标域名的 MX（邮件交换）记录，找到对应的目标邮件服务器。</li>
</ul>
</li>
<li>
<p><strong>邮件存储</strong>：</p>
<ul>
<li>目标邮件服务器接收邮件后，将其存储在目标用户的邮箱中，通常采用 POP3 或 IMAP 协议进行管理。</li>
<li>POP3 通常会将邮件下载到本地，服务器上一般保留副本。IMAP 则允许用户在多个设备上访问同一邮件，不会将邮件从服务器上删除。</li>
</ul>
</li>
<li>
<p><strong>接收邮件</strong>：</p>
<ul>
<li>用户通过邮件客户端连接到 POP3 或 IMAP 服务器下载或查看邮件。接收邮件的过程如下：
<ul>
<li>对于 POP3：客户端向服务器请求邮件，服务器将邮件发送到客户端，邮件通常在服务器上被删除。</li>
<li>对于 IMAP：客户端与服务器保持同步，邮件在服务器上保留，用户可以在不同设备上查看相同的邮件。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="电子邮件的格式"><a class="header" href="#电子邮件的格式">电子邮件的格式</a></h3>
<p>电子邮件的格式通常包括以下几个部分：</p>
<ol>
<li>
<p><strong>邮件头</strong>：包含发件人、收件人、主题、发送日期等信息。常见字段包括：</p>
<ul>
<li>From：发件人地址</li>
<li>To：收件人地址</li>
<li>Cc（抄送）：其他收件人</li>
<li>Bcc（密送）：隐秘收件人</li>
<li>Subject：邮件主题</li>
</ul>
</li>
<li>
<p><strong>邮件正文</strong>：包含实际的邮件内容，可以是纯文本或 HTML 格式，允许插入图片、链接等富媒体内容。</p>
</li>
<li>
<p><strong>附件</strong>：包含发送的文件，如文档、图片、音频等，通常以 MIME 编码进行处理。</p>
</li>
</ol>
<h3 id="电子邮件的优缺点"><a class="header" href="#电子邮件的优缺点">电子邮件的优缺点</a></h3>
<p>优点</p>
<ol>
<li><strong>快速</strong>：电子邮件可以几乎瞬时地发送和接收。</li>
<li><strong>低成本</strong>：发送电子邮件的费用相对较低，尤其是在国际间通信时。</li>
<li><strong>便捷性</strong>：可以随时随地访问，只需连接互联网即可收发邮件。</li>
<li><strong>批量发送</strong>：支持群发邮件，方便与多位联系人进行沟通。</li>
</ol>
<p>缺点</p>
<ol>
<li><strong>安全隐患</strong>：电子邮件容易受到垃圾邮件、病毒和网络钓鱼攻击。</li>
<li><strong>隐私问题</strong>：邮件内容在传输过程中可能被窃取，因此需要加密措施。</li>
<li><strong>信息过载</strong>：由于电子邮件使用的普及，用户可能面临大量邮件的管理问题。</li>
</ol>
<h2 id="万维网www协议"><a class="header" href="#万维网www协议">万维网（WWW）协议</a></h2>
<p><strong>万维网（WWW, World Wide Web）</strong> 是一种信息系统，通过互联网为用户提供连结和访问信息的手段。WWW 建立于超文本传输协议（HTTP）之上，使用统一资源定位符（URL）来识别资源，广泛应用于信息查询、交流、商业活动等多个领域。</p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131184405.png" alt="" /></p>
<p>万维网（WWW）是构建在互联网基础上的信息传播和交流平台，依赖于超文本传输协议（HTTP）进行资源的请求和传输。虽然 WWW 的基本结构和原理相对简单，但其背后的网络技术和协议则极为复杂，支持着当今网络的高速发展。</p>
<h3 id="关键组件"><a class="header" href="#关键组件">关键组件</a></h3>
<ol>
<li>
<p><strong>网页</strong>：万维网上的信息以网页的形式展示，通常使用 HTML（超文本标记语言）编写。网页包含文本、图像、视频等多种多媒体内容。</p>
</li>
<li>
<p><strong>Web 服务器</strong>：存储和提供网页及其他资源的服务器。用户通过浏览器请求访问这些资源，Web 服务器根据请求返回对应的网页内容。</p>
</li>
<li>
<p><strong>Web 浏览器</strong>：用户与 WWW 交互的工具（如 Google Chrome、Mozilla Firefox、Safari 等）。浏览器负责向 Web 服务器发送请求，解析返回的网页内容，并将其呈现给用户。</p>
</li>
<li>
<p><strong>URL（统一资源定位符）</strong>：用于定位和访问互联网上资源的地址。构成格式通常为：</p>
<pre><code>http://www.example.com/path/to/resource
</code></pre>
</li>
</ol>
<h3 id="www-协议的工作原理"><a class="header" href="#www-协议的工作原理">WWW 协议的工作原理</a></h3>
<p>WWW 的工作过程可以通过以下步骤概述：</p>
<ol>
<li>
<p><strong>用户请求</strong>：</p>
<ul>
<li>用户在浏览器中输入 URL，或点击页面链接。浏览器解析 URL，并建立与指定 Web 服务器的连接。</li>
</ul>
</li>
<li>
<p><strong>建立 TCP 连接</strong>：</p>
<ul>
<li>浏览器通过 TCP（传输控制协议）与 Web 服务器建立连接。此连接通常使用 80 端口（HTTP）或 443 端口（HTTPS，安全HTTP）。</li>
</ul>
</li>
<li>
<p><strong>HTTP 请求</strong>：</p>
<ul>
<li>一旦连接建立，浏览器发送 HTTP 请求（如 GET、POST 命令）。常见请求类型包括：
<ul>
<li><strong>GET</strong>：请求指定的资源，常用于获取数据。</li>
<li><strong>POST</strong>：向服务器提交数据，通常用于表单提交。</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>服务器处理请求</strong>：</p>
<ul>
<li>Web 服务器收到请求后，处理请求并根据请求资源生成响应。这可能包括从数据库中获取数据、读取文件或执行动态内容生成等。</li>
</ul>
</li>
<li>
<p><strong>返回 HTTP 响应</strong>：</p>
<ul>
<li>Web 服务器将处理结果以 HTTP 响应的形式返回给浏览器。响应报文通常包括状态码（如 200 表示成功，404 表示未找到）和所请求的网页内容。</li>
</ul>
</li>
<li>
<p><strong>浏览器呈现内容</strong>：</p>
<ul>
<li>浏览器接收到响应后解析 HTML、CSS 和 JavaScript，渲染并显示网页。用户便能看到所请求的网站内容。</li>
</ul>
</li>
<li>
<p><strong>断开连接</strong>：</p>
<ul>
<li>在完成请求后，浏览器和服务器可以选择是否保持 TCP 连接，HTTP/1.1默认使用持久连接，而 HTTP/2 则改进了连接管理，提高了传输效率。</li>
</ul>
</li>
</ol>
<h3 id="http-和-https"><a class="header" href="#http-和-https">HTTP 和 HTTPS</a></h3>
<ul>
<li>
<p><strong>HTTP</strong>（超文本传输协议）是无状态的协议，主要用于网页内容的传输。HTTP 不提供安全性，包括加密和数据完整性，因此容易受到窃听和篡改。</p>
</li>
<li>
<p><strong>HTTPS</strong>（安全超文本传输协议）在 HTTP 基础上加入了 SSL/TLS（安全套接层/传输层安全性）协议，提供加密通信，确保数据在传输过程中的安全性与完整性。HTTPS 通常用于在线支付、敏感信息传输等安全要求高的场景。</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131184252.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131184236.png" alt="" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Rosefinch-Midsummer/MyImagesHost04/img20250131184324.png" alt="" /></p>
<h3 id="url-的组成"><a class="header" href="#url-的组成">URL 的组成</a></h3>
<p>URL 是定位互联网资源的标准格式，通常由以下部分组成：</p>
<ol>
<li><strong>协议</strong>：如 <code>http://</code> 或 <code>https://</code>，指明使用的通信协议。</li>
<li><strong>主机名</strong>：指定服务器的域名，如 <code>www.example.com</code>。</li>
<li><strong>端口号</strong>（可选）：指定连接的端口号，默认为 80（HTTP）和 443（HTTPS）。</li>
<li><strong>路径</strong>：资源在服务器上的具体位置，如 <code>/path/to/resource</code>。</li>
<li><strong>查询字符串</strong>（可选）：用于传递参数的键值对，如 <code>?key=value</code>。</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="计算机网络仿真实验"><a class="header" href="#计算机网络仿真实验">计算机网络仿真实验</a></h1>
<h2 id="71-仿真软件的获取安装和汉化"><a class="header" href="#71-仿真软件的获取安装和汉化">7.1 仿真软件的获取、安装和汉化</a></h2>
<h2 id="72-仿真软件的使用"><a class="header" href="#72-仿真软件的使用">7.2 仿真软件的使用</a></h2>
<h2 id="73-实验1-访问web服务器加深对网络体系结构的理解"><a class="header" href="#73-实验1-访问web服务器加深对网络体系结构的理解">7.3 实验1 访问WEB服务器(加深对网络体系结构的理解)</a></h2>
<h2 id="74-实验2-mac地址ip地址arp协议"><a class="header" href="#74-实验2-mac地址ip地址arp协议">7.4 实验2 MAC地址，IP地址，ARP协议</a></h2>
<h2 id="75-实验3-总线型以太网的特性广播竞争总线冲突"><a class="header" href="#75-实验3-总线型以太网的特性广播竞争总线冲突">7.5 实验3 总线型以太网的特性（广播，竞争总线，冲突）</a></h2>
<h2 id="76-实验4-集线器和交换机的区别"><a class="header" href="#76-实验4-集线器和交换机的区别">7.6 实验4 集线器和交换机的区别</a></h2>
<h2 id="77-实验5-交换机的自学习算法"><a class="header" href="#77-实验5-交换机的自学习算法">7.7 实验5 交换机的自学习算法</a></h2>
<h2 id="78-实验6-生成树协议stp的功能"><a class="header" href="#78-实验6-生成树协议stp的功能">7.8 实验6 生成树协议STP的功能</a></h2>
<h2 id="79-实验7-虚拟局域网vlan"><a class="header" href="#79-实验7-虚拟局域网vlan">7.9 实验7 虚拟局域网VLAN</a></h2>
<h2 id="710-实验8-ipv4地址--分类地址"><a class="header" href="#710-实验8-ipv4地址--分类地址">7.10 实验8 IPv4地址 — 分类地址</a></h2>
<h2 id="711-实验9-ipv4地址--划分子网"><a class="header" href="#711-实验9-ipv4地址--划分子网">7.11 实验9 IPv4地址 — 划分子网</a></h2>
<h2 id="712-实验10-ipv4地址--构造超网无分类编址"><a class="header" href="#712-实验10-ipv4地址--构造超网无分类编址">7.12 实验10 IPv4地址 — 构造超网（无分类编址）</a></h2>
<h2 id="713-实验11-ip数据报的发送和转发流程"><a class="header" href="#713-实验11-ip数据报的发送和转发流程">7.13 实验11 IP数据报的发送和转发流程</a></h2>
<h2 id="714-实验12-默认路由和特定主机路由"><a class="header" href="#714-实验12-默认路由和特定主机路由">7.14 实验12 默认路由和特定主机路由</a></h2>
<h2 id="715-实验13-静态路由配置错误导致的路由环路问题"><a class="header" href="#715-实验13-静态路由配置错误导致的路由环路问题">7.15 实验13 静态路由配置错误导致的路由环路问题</a></h2>
<h2 id="716-实验14-聚合了不存在的网络导致的路由环路问题"><a class="header" href="#716-实验14-聚合了不存在的网络导致的路由环路问题">7.16 实验14 聚合了不存在的网络导致的路由环路问题</a></h2>
<h2 id="717-实验15-网络故障导致的路由环路问题"><a class="header" href="#717-实验15-网络故障导致的路由环路问题">7.17 实验15 网络故障导致的路由环路问题</a></h2>
<h2 id="718-实验16-路由信息协议rip"><a class="header" href="#718-实验16-路由信息协议rip">7.18 实验16 路由信息协议RIP</a></h2>
<h2 id="719-实验17-开放最短路径优先ospf"><a class="header" href="#719-实验17-开放最短路径优先ospf">7.19 实验17 开放最短路径优先OSPF</a></h2>
<h2 id="720-实验18-边界网关协议bgp"><a class="header" href="#720-实验18-边界网关协议bgp">7.20 实验18 边界网关协议BGP</a></h2>
<h2 id="721-实验19-网际控制报文协议icmp的应用"><a class="header" href="#721-实验19-网际控制报文协议icmp的应用">7.21 实验19 网际控制报文协议ICMP的应用</a></h2>
<h2 id="722-实验20-运输层端口"><a class="header" href="#722-实验20-运输层端口">7.22 实验20 运输层端口</a></h2>
<h2 id="723-实验21-vlan间通信的实现方法多臂路由"><a class="header" href="#723-实验21-vlan间通信的实现方法多臂路由">7.23 实验21 VLAN间通信的实现方法—“多臂路由”</a></h2>
<h2 id="724-实验22-vlan间通信的实现方法单臂路由"><a class="header" href="#724-实验22-vlan间通信的实现方法单臂路由">7.24 实验22 VLAN间通信的实现方法—“单臂路由”</a></h2>
<h2 id="725-实验23-vlan间通信的实现使用三层交换机"><a class="header" href="#725-实验23-vlan间通信的实现使用三层交换机">7.25 实验23 VLAN间通信的实现—使用三层交换机</a></h2>
<h2 id="726-实验24-tcp的运输连接管理"><a class="header" href="#726-实验24-tcp的运输连接管理">7.26 实验24 TCP的运输连接管理</a></h2>
<h2 id="727-实验25-动态主机配置协议dhcp的作用"><a class="header" href="#727-实验25-动态主机配置协议dhcp的作用">7.27 实验25 动态主机配置协议DHCP的作用</a></h2>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
